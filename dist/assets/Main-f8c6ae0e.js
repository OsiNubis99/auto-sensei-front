import{_ as E,U as T,r as w,A as U,M as F,u as L,b as R,e as C,V as J,o as d,Q as B,c as u,F as P,J as O,N as _,O as K,g as y,f as m,K as Q,n as D,k as S,v as q,m as j}from"./index-cbe9063f.js";import{u as G}from"./auctions-b6613efc.js";import{M as H,a as W}from"./ModalViewImage-ff9471b3.js";import{B as X}from"./Basic-b9c2a6d0.js";import"./moment-fbc5633a.js";const p="/assets/photo-camera-c9a40c97.png",Y={components:{ModalViewImageVue:H,loadimage:T,Basic:X},setup(){const c=w(!1),o=G(),M=w(U(()=>"https://s3.us-east-2.amazonaws.com/files.autosensei.ca/")),t=F();L();const b=w(),k=W(),r=w([{id:0,title:"Update Order",children:[]},{id:1,title:"Current Order",children:[]}]),g=w(-1),V=(e,a)=>{const i=parseInt(e.dataTransfer.getData("itemId")),l=a===0?1:0,h=r.value[l].children.find(A=>A.id===i);h.categoryId=a,v(l,i),x(a,h)},x=(e,a)=>{r.value[e].children=[...r.value[e].children,a]},n=e=>{g.value=-1},s=e=>{console.log("e",e),g.value=e.target.textContent},v=(e,a)=>{r.value[e].children=r.value[e].children.filter(i=>i.id!==a)},f=(e,a,i)=>{console.log("hola"),e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("itemId",a.id.toString()),g.value=i},I=async e=>{c.value=!0;try{let a=await o.getAutionById({uuid:e});if(a){let i=[];i=a.data.vehicleDetails.exteriorPhotos.map((l,h)=>({id:h,img:l,categoryId:1})),i.length>0&&(r.value[1].children=i,c.value=!1)}}catch(a){c.value=!1,console.log("error",a)}},z=async()=>{c.value=!0;let e=[],a=[];e=r.value[0].children;for(let l=0;l<e.length;l++){const h=e[l];a.push(h.img)}let i={vehicleDetails:{exteriorPhotos:a}};try{await o.update({uuid:b.value,payload:i})&&(K("Successfully order photos",{type:"success",position:"top-center",theme:"colored"}),r.value=[{id:0,title:"Update Order",children:[]},{id:1,title:"Current Order",children:[]}],I(b.value))}catch{c.value=!1}},N=e=>{console.log("photo",e),k.openModal({active:!0,img:{bucket:!0,preview:e}})};return R(()=>{t.params.id&&(b.value=t.params.id,I(t.params.id))}),{bucket:M,dragEnd:n,onDrop:V,addClass:s,onDragStart:f,updatePhotos:z,categories:r,showAnimation:g,viewPhoto:N,statusModalViewImage:k}}},Z={key:1,class:"max-w-full m-auto bg-[#efefef]"},$=["onDrop"],ee={class:"!text-[#3b3737] animate-fade-up animate-ease-in-out animate-delay-200 font-semibold font-Nohemi"},te={key:0,class:"w-full"},ae={class:"w-full h-[190px] flex justify-center items-center bg-[#e4e4e4] rounded-lg animate-fade-up animate-ease-in-out animate-delay-100"},oe=j('<div class="effecto-camera animate-fade-up animate-ease-in-out animate-delay-300"><img class="!w-[80px] !h-[80px]" src="'+p+'" alt=""><img class="!w-[80px] !h-[80px]" src="'+p+'" alt=""><img class="!w-[80px] !h-[80px]" src="'+p+'" alt=""></div><p class="animate-fade-up animate-ease-in-out animate-delay-400 font-semibold text-lg text-[#6d53b0] capitalize"> Drag with mouse to sort images </p>',2),se=[oe],ie=["onDragstart"],re=["onClick","data-src"],ne={class:"w-full child h-[250px] gap-4 flex-col flex justify-end items-end"},le=j('<div class="effecto-camera"><img class="!w-[80px] !h-[80px]" src="'+p+'" alt=""><img class="!w-[80px] !h-[80px]" src="'+p+'" alt=""><img class="!w-[80px] !h-[80px]" src="'+p+'" alt=""></div><p class="font-semibold text-lg text-[#6d53b0] capitalize">Drag with mouse to sort images </p>',2),de=[le];function ce(c,o,M,t,b,k){var x;const r=C("Basic"),g=C("ModalViewImageVue"),V=J("lazy-container");return c.loading?(d(),B(r,{key:0})):(d(),u("div",Z,[(d(!0),u(P,null,O(t.categories,n=>(d(),u("div",{key:n.id,onDrop:s=>t.onDrop(s,n.id),class:"droppable",onDragover:o[4]||(o[4]=y(()=>{},["prevent"])),onDragenter:o[5]||(o[5]=y(()=>{},["prevent"]))},[m("h4",ee,Q(n.title),1),n.id==0?(d(),u("div",te,[t.categories[0].children.length===0?(d(),u("div",{key:c.index},[m("div",ae,[m("div",{class:D([t.showAnimation>-1?"contend-drag":"","border-dashed border-2 flex-col gap-4 h-full rounded-lg w-full flex justify-center items-center bg-[#6d53b01c] border-[#6d53b0b6]"]),onDragover:o[0]||(o[0]=y(()=>{},["prevent"]))},se,34)])])):_("",!0)])):_("",!0),n.children.length>0?(d(),u("div",{key:1,class:D(["child",[n.id==0?"child-0":"child-1",t.categories[1].children.length===0&&"child-1"]])},[(d(!0),u(P,null,O(n.children.filter(s=>s.categoryId===n.id),(s,v)=>S((d(),u("div",{key:s.id,class:D([`animate-delay-${v}00 animate-duration-${v+1}000`,"draggable animate-ease-in-out animate-fade-up"]),onDragend:o[1]||(o[1]=(...f)=>t.dragEnd&&t.dragEnd(...f)),onDragstart:f=>t.onDragStart(f,s,v),draggable:"true"},[m("img",{onClick:f=>t.viewPhoto(s.img),class:"draggable-img hover:-translate-y-6 cursor-pointer transition-all duration-700 ease-out","data-src":t.bucket+s.img},null,8,re)],42,ie)),[[V,{selector:"img"}]])),128))],2)):_("",!0),S(m("div",ne,[m("div",{class:D([t.showAnimation>-1?"contend-drag":"","border-dashed border-2 flex-col gap-4 h-full rounded-lg w-full flex justify-center items-center bg-[#6d53b01c] border-[#6d53b0b6]"]),onDragover:o[2]||(o[2]=y(()=>{},["prevent"]))},de,34),m("button",{onClick:o[3]||(o[3]=(...s)=>t.updatePhotos&&t.updatePhotos(...s)),class:"btn rounded-lg bg-[#6d53b0] text-white flex justify-center items-center"}," Update Photos ")],512),[[q,t.categories[1].children.length===0&&n.id==1]])],40,$))),128)),(x=t.statusModalViewImage)!=null&&x.isActive?(d(),B(g,{key:0})):_("",!0)]))}const pe=E(Y,[["render",ce]]);export{pe as default};
