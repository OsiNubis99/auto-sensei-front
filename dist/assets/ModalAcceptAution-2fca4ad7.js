import{_ as C,r as n,A as F,k as z,v as B,o as a,c as l,f as e,N as p,F as E,K as r,l as w,U as N,m as V}from"./index-445d5a23.js";import{M as P}from"./modalAcceptAution-845bed40.js";import"./pspdfkit-974af0d0.js";import{_ as S}from"./image-0fc6b0a0.js";const I={props:{form:{type:Object},acceptAution:{type:Function},index:{type:Function}},setup(u){const i=n(u.form);n(null);const f=n(!1),t=P(),b=n(F(()=>"https://s3.us-east-2.amazonaws.com/files.autosensei.ca/")),m=n("");n(null);const s=n({step1:!0,step2:!1,step3:!1});return{formData:i,statusModal:t,bucket:b,steps:s,next:async o=>{console.log("statusModal.dataAutiont",t.dataAutiont),o==1&&(s.value.step1=!1,s.value.step2=!0,f.value=!0,s.value.step2&&(t.dataAutiont.contract?(m.value="https://apidev.autosensei.ca/files/"+t.dataAutiont.contract,await u.acceptAution(t.dataAutiont.contract)&&(s.value.step1=!1,s.value.step2=!1,s.value.step3=!0,f.value=!1)):N.get(`/auction/contract/${t.dataAutiont._id}`).then(async d=>{console.log("resPDF",d),m.value="https://apidev.autosensei.ca/files/"+d.data.contract,await u.acceptAution(d.data.contract)&&(s.value.step1=!1,s.value.step2=!1,s.value.step3=!0,f.value=!1)})))},close:()=>{t.closeModal(!1),s.value.step2&&u.index()},loading:f,showPdf:m,pdfDonwload:()=>{const o=document.createElement("a");o.href=m.value,o.target="_blank",o.download="contect-file.pdf",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}}},O={class:"fixed inset-0 flex items-end md:items-center z-50 md:justify-center bg-base-black bg-opacity-50"},H={class:"max-w-xl w-full overflow-hidden bg-white rounded-lg shadow-xl animation-fade-modal"},K={class:"p-2 md:p-4 rounded-t-lg bg-[#22282F] flex items-center justify-between"},L={key:0,class:"text-sm md:text-xl text-white"},T={key:1,class:"text-sm md:text-xl text-white"},U={key:2,class:"text-sm md:text-xl text-white"},Y=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),q=[Y],G={key:0,class:"w-full h-[30vh]"},J=V('<div class="w-full h-full flex justify-center items-center"><div class="absolute top-1/2 left-1/2 -mt-4 -ml-2 h-8 w-4 text-indigo-700"><div class="absolute -left-[30px] z-10 h-[80px] w-[80px]"><div class="animate-bounce"><svg xmlns="http://www.w3.org/2000/svg" class="animate-spin" fill="#c1f861" stroke="#fff" stroke-width="0" viewBox="0 0 16 16"><path d="M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 4c2.209 0 4 1.791 4 4s-1.791 4-4 4-4-1.791-4-4 1.791-4 4-4zM12.773 12.773c-1.275 1.275-2.97 1.977-4.773 1.977s-3.498-0.702-4.773-1.977-1.977-2.97-1.977-4.773c0-1.803 0.702-3.498 1.977-4.773l1.061 1.061c0 0 0 0 0 0-2.047 2.047-2.047 5.378 0 7.425 0.992 0.992 2.31 1.538 3.712 1.538s2.721-0.546 3.712-1.538c2.047-2.047 2.047-5.378 0-7.425l1.061-1.061c1.275 1.275 1.977 2.97 1.977 4.773s-0.702 3.498-1.977 4.773z"></path></svg></div><p class="text-base-gray font-medium pl-2">Loading...</p></div></div></div>',1),Q=[J],R={key:0,class:"p-2 md:p-4 flex md:gap-3 flex-col"},W={class:"flex justify-start items-center gap-2"},X={class:"flex gap-3 items-start"},Z={class:"w-[80px] md:w-[120px] md:h-[90px]"},$=["src"],tt={key:1,class:"shadow-xl w-full h-full rounded-lg object-cover",src:S,alt:""},et={class:"flex justify-between flex-col h-full"},st={class:"font-semibold capitalize md:text-base text-sm"},ot=e("p",{class:"capitalize text-sm md:text-base"},"Final Bid",-1),at={class:"font-medium text-sm text-base-black md:text-2xl"},lt={class:"text-[#666666] mt-1 text-xs md:text-base"},it={class:"mt-2 border-[#E0E0E0] border-t-[1px]"},dt={class:"pt-4"},nt={class:"text-xs md:text-base"},ct={class:"flex pt-4 gap-2 items-center justify-between"},rt=e("div",{id:"pspdfkit",style:{width:"100%",height:"70vh"}},null,-1),ut=[rt],ft={key:1,class:"p-4 flex justify-center items-center flex-col gap-3"},mt=e("p",{class:"font-semibold capitalize md:text-xl"},"Final Bid Approved!",-1),pt=e("p",{class:"capitalize text-xs md:text-base"},"Download the Actual Sheet Below and Hand It to the Buyer During the Vehicle Drop-Off Process.",-1),ht={class:"w-full"},xt=["src"];function _t(u,i,f,t,b,m){var s,h,x,_,o,d,v,g,y,k,A,M,D,j;return z((a(),l("div",O,[e("div",H,[e("div",K,[t.steps.step1?(a(),l("p",L,"Accept Auction")):p("",!0),t.steps.step2?(a(),l("p",T,"Contract Auction")):p("",!0),t.steps.step3?(a(),l("p",U,"Download Contract")):p("",!0),(a(),l("svg",{onClick:i[0]||(i[0]=(...c)=>t.close&&t.close(...c)),xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-8 md:w-8 md:h-8 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"#fff"},q))]),t.loading?(a(),l("div",G,Q)):(a(),l(E,{key:1},[t.steps.step1?(a(),l("div",R,[e("div",W,[e("div",X,[e("div",Z,[(s=t.statusModal.dataAutiont)!=null&&s.photos?(a(),l("img",{key:0,class:"w-full h-full shadow-xl rounded-lg object-cover",src:t.bucket+((h=t.statusModal.dataAutiont)==null?void 0:h.photos[0].url),alt:""},null,8,$)):(a(),l("img",tt))]),e("div",et,[e("p",st,r((_=(x=t.statusModal.dataAutiont)==null?void 0:x.vehicleDetails)==null?void 0:_.year)+" "+r((d=(o=t.statusModal.dataAutiont)==null?void 0:o.vehicleDetails)==null?void 0:d.make)+" "+r((g=(v=t.statusModal.dataAutiont)==null?void 0:v.vehicleDetails)==null?void 0:g.model),1),ot,e("p",at,[w("$"+r((k=(y=t.statusModal.dataAutiont)==null?void 0:y.bids[0])==null?void 0:k.amount)+"/",1),e("span",lt,r((M=(A=t.statusModal.dataAutiont)==null?void 0:A.bids)==null?void 0:M.length)+" Bids",1)])])])]),e("div",it,[e("div",dt,[e("p",nt,[w("Are you sure you want to accept the final bid for the "),e("strong",null,r((j=(D=t.statusModal.dataAutiont)==null?void 0:D.vehicleDetails)==null?void 0:j.model),1),w("? ")]),e("div",ct,[e("button",{onClick:i[1]||(i[1]=(...c)=>t.close&&t.close(...c)),class:"btn w-full border border-[#E0E0E0]"},"No"),e("button",{onClick:i[2]||(i[2]=c=>t.next(1)),class:"btn w-full bg-primary rounded-md"},"Yes")])])])])):p("",!0),z(e("div",null,ut,512),[[B,t.steps.step2]]),t.steps.step3?(a(),l("div",ft,[mt,pt,e("div",ht,[e("iframe",{class:"w-full h-[60vh]",src:t.showPdf,frameborder:"0"},null,8,xt)]),e("button",{onClick:i[3]||(i[3]=(...c)=>t.pdfDonwload&&t.pdfDonwload(...c)),class:"btn w-full bg-primary rounded-md"}," Download PDF ")])):p("",!0)],64))])],512)),[[B,t.statusModal.isActive]])}const yt=C(I,[["render",_t]]);export{yt as M};
