import{_ as z,r as n,A as B,b as C,V as F,k as E,v as V,o as a,c as l,f as e,N as p,F as N,K as u,l as w,U as P,m as S}from"./index-a1508264.js";import{M as I}from"./modalAcceptAution-ff480a3c.js";import"./pspdfkit-f9915a14.js";const O={props:{form:{type:Object},acceptAution:{type:Function},index:{type:Function}},setup(h){const i=n(h.form);n(null);const d=n(!1),t=I(),b=n(B(()=>"https://s3.us-east-2.amazonaws.com/files.autosensei.ca/")),f=n(""),c=n(null);n(null);const o=n({step1:!0,step2:!1,step3:!1}),x=()=>{const s=document.createElement("a");s.href=f.value,s.target="_blank",s.download="contect-file.pdf",document.body.appendChild(s),s.click(),document.body.removeChild(s)},_=async s=>{if(console.log("statusModal.dataAutiont",t.dataAutiont),s==1&&(o.value.step1=!1,o.value.step2=!0,d.value=!0,o.value.step2)){let m=await h.acceptAution(c.value);console.log("res",m),m&&(o.value.step1=!1,o.value.step2=!1,o.value.step3=!0,d.value=!1)}},v=()=>{t.closeModal(!1),o.value.step2&&h.index()};return C(()=>{d.value=!0,t.dataAutiont.contract?(f.value="https://apidev.autosensei.ca/files/"+t.dataAutiont.contract,c.value=t.dataAutiont.contract,d.value=!1):F.get(`/auction/contract/${t.dataAutiont._id}`).then(async s=>{console.log("resPDF",s),c.value=s.data.contract,f.value="https://apidev.autosensei.ca/files/"+s.data.contract,d.value=!1})}),{formData:i,statusModal:t,bucket:b,steps:o,next:_,close:v,loading:d,showPdf:f,pdfDonwload:x}}},H={class:"fixed inset-0 flex items-end md:items-center z-50 md:justify-center bg-base-black bg-opacity-50"},K={class:"max-w-xl w-full overflow-hidden bg-white rounded-lg shadow-xl animation-fade-modal"},L={class:"p-2 md:p-4 rounded-t-lg bg-[#22282F] flex items-center justify-between"},T={key:0,class:"text-sm md:text-xl text-white"},U={key:1,class:"text-sm md:text-xl text-white"},Y={key:2,class:"text-sm md:text-xl text-white"},q=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),G=[q],J={key:0,class:"w-full h-[30vh]"},Q=S('<div class="w-full h-full flex justify-center items-center"><div class="absolute top-1/2 left-1/2 -mt-4 -ml-2 h-8 w-4 text-indigo-700"><div class="absolute -left-[30px] z-10 h-[80px] w-[80px]"><div class="animate-bounce"><svg xmlns="http://www.w3.org/2000/svg" class="animate-spin" fill="#c1f861" stroke="#fff" stroke-width="0" viewBox="0 0 16 16"><path d="M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 4c2.209 0 4 1.791 4 4s-1.791 4-4 4-4-1.791-4-4 1.791-4 4-4zM12.773 12.773c-1.275 1.275-2.97 1.977-4.773 1.977s-3.498-0.702-4.773-1.977-1.977-2.97-1.977-4.773c0-1.803 0.702-3.498 1.977-4.773l1.061 1.061c0 0 0 0 0 0-2.047 2.047-2.047 5.378 0 7.425 0.992 0.992 2.31 1.538 3.712 1.538s2.721-0.546 3.712-1.538c2.047-2.047 2.047-5.378 0-7.425l1.061-1.061c1.275 1.275 1.977 2.97 1.977 4.773s-0.702 3.498-1.977 4.773z"></path></svg></div><p class="text-base-gray font-medium pl-2">Loading...</p></div></div></div>',1),R=[Q],W={key:0,class:"p-2 md:p-4 flex md:gap-3 flex-col"},X={class:"flex justify-start items-center gap-2"},Z={class:"flex gap-3 items-start"},$={class:"w-[80px] md:w-[120px] md:h-[90px]"},tt=["src"],et={key:1,class:"shadow-xl w-full h-full rounded-lg object-cover",src:P,alt:""},st={class:"flex justify-between flex-col h-full"},ot={class:"font-semibold capitalize md:text-base text-sm"},at=e("p",{class:"capitalize text-sm md:text-base"},"Final Bid",-1),lt={class:"font-medium text-sm text-base-black md:text-2xl"},it={class:"text-[#666666] mt-1 text-xs md:text-base"},nt={class:"mt-2 border-[#E0E0E0] border-t-[1px]"},dt={class:"pt-4"},ct={class:"text-xs md:text-base"},rt={class:"flex pt-4 gap-2 items-center justify-between"},ut={key:1,class:"p-4 flex justify-center items-center flex-col gap-3"},ft=e("p",{class:"font-semibold capitalize md:text-xl"},"Final Bid Approved!",-1),mt=e("p",{class:"capitalize text-xs md:text-base"},"Download the Actual Sheet Below and Hand It to the Buyer During the Vehicle Drop-Off Process.",-1),pt={class:"w-full"},ht=["src"];function xt(h,i,d,t,b,f){var c,o,x,_,v,s,m,g,y,k,A,M,D,j;return E((a(),l("div",H,[e("div",K,[e("div",L,[t.steps.step1?(a(),l("p",T,"Accept Auction")):p("",!0),t.steps.step2?(a(),l("p",U,"Contract Auction")):p("",!0),t.steps.step3?(a(),l("p",Y,"Download Contract")):p("",!0),(a(),l("svg",{onClick:i[0]||(i[0]=(...r)=>t.close&&t.close(...r)),xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-8 md:w-8 md:h-8 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"#fff"},G))]),t.loading?(a(),l("div",J,R)):(a(),l(N,{key:1},[t.steps.step1?(a(),l("div",W,[e("div",X,[e("div",Z,[e("div",$,[(c=t.statusModal.dataAutiont)!=null&&c.photos?(a(),l("img",{key:0,class:"w-full h-full shadow-xl rounded-lg object-cover",src:t.bucket+((o=t.statusModal.dataAutiont)==null?void 0:o.photos[0].url),alt:""},null,8,tt)):(a(),l("img",et))]),e("div",st,[e("p",ot,u((_=(x=t.statusModal.dataAutiont)==null?void 0:x.vehicleDetails)==null?void 0:_.year)+" "+u((s=(v=t.statusModal.dataAutiont)==null?void 0:v.vehicleDetails)==null?void 0:s.make)+" "+u((g=(m=t.statusModal.dataAutiont)==null?void 0:m.vehicleDetails)==null?void 0:g.model),1),at,e("p",lt,[w("$"+u((k=(y=t.statusModal.dataAutiont)==null?void 0:y.bids[0])==null?void 0:k.amount)+"/",1),e("span",it,u((M=(A=t.statusModal.dataAutiont)==null?void 0:A.bids)==null?void 0:M.length)+" Bids",1)])])])]),e("div",nt,[e("div",dt,[e("p",ct,[w("Are you sure you want to accept the final bid for the "),e("strong",null,u((j=(D=t.statusModal.dataAutiont)==null?void 0:D.vehicleDetails)==null?void 0:j.model),1),w("? ")]),e("div",rt,[e("button",{onClick:i[1]||(i[1]=(...r)=>t.close&&t.close(...r)),class:"btn w-full border border-[#E0E0E0]"},"No"),e("button",{onClick:i[2]||(i[2]=r=>t.next(1)),class:"btn w-full bg-primary rounded-md"},"Yes")])])])])):p("",!0),t.steps.step3?(a(),l("div",ut,[ft,mt,e("div",pt,[e("iframe",{class:"w-full h-[60vh]",src:t.showPdf,frameborder:"0"},null,8,ht)]),e("button",{onClick:i[3]||(i[3]=(...r)=>t.pdfDonwload&&t.pdfDonwload(...r)),class:"btn w-full bg-primary rounded-md"}," Download PDF ")])):p("",!0)],64))])],512)),[[V,t.statusModal.isActive]])}const bt=z(O,[["render",xt]]);export{bt as M};
