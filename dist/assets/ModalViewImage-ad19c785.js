import{_ as G,r as y,w as ke,e as O,o as v,c as z,h as D,i as X,f as d,n as B,K as L,k as F,a1 as se,N as k,F as q,m as re,R as Te,v as le,Q as _,a as K,J as qe,a4 as fe,a5 as Qe,g as ft,a3 as Ie,b as gt,O as vt}from"./index-fa39753b.js";import{h as Pe}from"./moment-fbc5633a.js";const je=(e,t,n)=>{let i={};return t=="generalInformation"&&(e.numberVinGenerals||(i.numberVinGenerals="Required field"),e.date||(i.date="Required field"),e.province?e.province==="Select province"&&(i.province="Required field"):i.province="Required field",e.city?e.city=="Select city"&&(i.city="Required field"):i.city="Required field",e.keys?e.keys=="Select number of keys"&&(i.keys="Required field"):i.keys="Required field",e.currently?(e.currently=="Financed"||e.currently=="Leased")&&(e.financingCompany||(i.financingCompany="Required field")):i.currently="Required field",e.buyoutVehicle=="Yes"&&(e.yourVehicleAmount||(i.yourVehicleAmount="Required field")),e.newVehicle=="Yes"&&(e.anyVehicle||(i.anyVehicle="Required field"),e.makePreferences||(i.makePreferences="Required field"),e.modelPreferences||(i.modelPreferences="Required field"),e.modelFromPreferences||(i.modelFromPreferences="Required field"),e.modelToPreferences||(i.modelToPreferences="Required field"),e.yearFromPreferences||(i.yearFromPreferences="Required field"),e.yearToPreferences||(i.yearToPreferences="Required field"))),t=="vehiclesDetails"&&(e.numberVin||(i.numberVin="Required field"),e.year||(i.year="Required field"),e.make||(i.make="Required field"),e.model||(i.model="Required field"),e.trim||(i.trim="Required field"),e.bodyType||(i.bodyType="Required field"),e.cylinder||(i.cylinder="Required field"),e.transmission||(i.transmission="Required field"),e.odometer||(i.odometer="Required field"),e.doors||(i.doors="Required field"),e.color||(i.color="Required field"),e.color=="other"&&(e.customColor||(i.customColor="Required field")),e.driveTrain||(i.driveTrain="Required field"),e.tireCondition||(i.tireCondition="Required field"),e.lastReplacement||(i.lastReplacement="Required field"),e.brakePads||(i.brakePads="Required field"),e.lastReplacement2||(i.lastReplacement2="Required field")),t=="UploadPhotos"&&(e.frontPhoto||(i.frontPhoto="Required field"),e.front||(i.front="Required field"),e.driverSide||(i.driverSide="Required field"),e.back||(i.back="Required field"),e.passengerSide||(i.passengerSide="Required field"),e.tireAndRim||(i.tireAndRim="Required field"),e.driversDisplay||(i.driversDisplay="Required field"),e.driversSide||(i.driversSide="Required field"),e.centerConsole||(i.centerConsole="Required field"),e.rearSeats||(i.rearSeats="Required field")),t=="confirmation"&&(e.numberVinGenerals||(i.numberVinGenerals="Required field"),e.date||(i.date="Required field"),e.province?e.province==="Select province"&&(i.province="Required field"):i.province="Required field",e.city?e.city=="Select city"&&(i.city="Required field"):i.city="Required field",e.keys?e.keys=="Select number of keys"&&(i.keys="Required field"):i.keys="Required field",e.currently?(e.currently=="Financed"||e.currently=="Leased")&&(e.financingCompany||(i.financingCompany="Required field")):i.currently="Required field",e.buyoutVehicle=="Yes"&&(e.yourVehicleAmount||(i.yourVehicleAmount="Required field")),e.newVehicle=="Yes"&&(e.anyVehicle||(i.anyVehicle="Required field"),e.modelFromPreferences||(i.modelFromPreferences="Required field"),e.modelToPreferences||(i.modelToPreferences="Required field"),e.yearFromPreferences||(i.yearFromPreferences="Required field"),e.yearToPreferences||(i.yearToPreferences="Required field")),e.numberVin||(i.numberVin="Required field"),e.year||(i.year="Required field"),e.make||(i.make="Required field"),e.model||(i.model="Required field"),e.trim||(i.trim="Required field"),e.bodyType||(i.bodyType="Required field"),e.cylinder||(i.cylinder="Required field"),e.transmission||(i.transmission="Required field"),e.odometer||(i.odometer="Required field"),e.doors||(i.doors="Required field"),e.color||(i.color="Required field"),e.color=="other"&&(e.customColor||(i.customColor="Required field")),e.driveTrain||(i.driveTrain="Required field"),e.tireCondition||(i.tireCondition="Required field"),e.lastReplacement||(i.lastReplacement="Required field"),e.brakePads||(i.brakePads="Required field"),e.lastReplacement2||(i.lastReplacement2="Required field"),e.frontPhoto||(i.frontPhoto="Required field"),e.front||(i.front="Required field"),e.driverSide||(i.driverSide="Required field"),e.back||(i.back="Required field"),e.passengerSide||(i.passengerSide="Required field"),e.tireAndRim||(i.tireAndRim="Required field"),e.driversDisplay||(i.driversDisplay="Required field"),e.driversSide||(i.driversSide="Required field"),e.centerConsole||(i.centerConsole="Required field"),e.rearSeats||(i.rearSeats="Required field")),t=="Launch Auction"&&(n=="after verified"&&(e.auctionDuration||(i.auctionDuration="Required field")),n=="date and time"&&(e.auctionDate||(i.auctionDate="Required field"),e.auctionTime||(i.auctionTime="Required field"),e.auctionDuration||(i.auctionDuration="Required field")),n=="hours weekeng"&&e.dayMonday=="Select time"&&(i.dayMonday="Required field")),i},bt={props:{form:{type:Object},steps:{type:Object},save:{type:Function}},setup(e){const t=y(e.form),n=y(e.steps),i=y(null),s=y(),o=y(),r=a=>{n.value.step1=!0,n.value.step2=!1},l=a=>{switch(a){case 1:Object.entries(s.value).length===0&&(n.value.step1=!1,n.value.step2=!0);break;case 2:e.save();break}};return ke(t.value,async(a,h)=>{a&&(s.value=je(t.value,"Launch Auction","date and time"),i.value=Object.entries(s.value).length,o.value=null,o.value=Pe(t.value.auctionDate).format("LL"))}),{formData:t,next:l,steps:n,invalid:s,sizeObjet:i,back:r,newDate:o}}},wt={key:0,class:"w-full flex flex-col md:gap-2"},xt=d("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Auction Date",-1),yt={class:"w-full flex flex-col mt-4 md:gap-2"},Rt={class:"flex justify-center gap-6 items-center"},At={class:"w-full flex flex-col md:gap-2"},zt=d("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Auction Time",-1),Mt=re('<option value="00">00.00 AM</option><option value="01">01.00 AM</option><option value="02">02.00 AM</option><option value="03">03.00 AM</option><option value="04">04.00 AM</option><option value="05">05.00 AM</option><option value="06">06.00 AM</option><option value="07">07.00 AM</option><option value="08">08.00 AM</option><option value="09">09.00 AM</option><option value="10">10.00 AM</option><option value="11">11.00 AM</option><option value="12">12.00 PM</option><option value="13">13.00 PM</option><option value="14">14.00 PM</option><option value="15">15.00 PM</option><option value="16">16.00 PM</option><option value="17">17.00 PM</option><option value="18">18.00 PM</option><option value="19">19.00 PM</option><option value="20">20.00 PM</option><option value="21">21.00 PM</option><option value="22">22.00 PM</option><option value="23">23.00 PM</option><option value="24">24.00 PM</option>',25),_t=[Mt],St=d("p",{class:"mt-7"}," - ",-1),Et={class:"w-full flex flex-col md:gap-2"},Dt=d("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Auction Duration",-1),Ct=d("option",{value:"45"},"45 Minutes",-1),kt=d("option",{value:"50"},"50 Minutes",-1),Tt=d("option",{value:"60"},"60 Minutes",-1),Pt=d("option",{value:"65"},"65 Minutes",-1),jt=[Ct,kt,Tt,Pt],Ot={class:"m-4 p-4 rounded-lg border-[#E0E0E0] border-[1px]"},Lt=d("p",{class:"font-semibold text-xs md:text-base"},"Launch Information",-1),Wt=d("div",{class:"flex justify-between py-1 md:gap-2"},[d("p",{class:"text-xs md:text-base"},"Launch Option"),d("p",{class:"text-xs md:text-base"},"Choose the date & time")],-1),$t={class:"flex justify-between py-1 md:gap-2"},qt=d("p",{class:"text-xs md:text-base"},"Auction Date",-1),It={class:"font-semibold text-xs md:text-base"},Ht={class:"flex justify-between py-1 md:gap-2"},Bt=d("p",{class:"text-xs md:text-base"},"Auction Time",-1),Vt={class:"font-semibold text-xs md:text-base"},Ft={class:"flex justify-between py-1 md:gap-2"},Yt=d("p",{class:"text-xs md:text-base"},"Auction Duration",-1),Ut={class:"font-semibold text-xs md:text-base"},Nt=d("p",{class:"px-4 pt-4 text-xs md:text-base border-[#E0E0E0] border-t-[1px]"},"Are you sure you want to launch auction with this option?",-1),Xt=["disabled"],Zt={key:3,class:"pt-4 flex gap-4"};function Gt(e,t,n,i,s,o){var l,a,h;const r=O("VueDatePicker");return v(),z(q,null,[i.steps.step1?(v(),z("div",wt,[xt,D(r,{"enable-time-picker":!1,modelValue:i.formData.auctionDate,"onUpdate:modelValue":t[0]||(t[0]=c=>i.formData.auctionDate=c),"min-date":new Date,class:B(["custom-picker",((l=i.invalid)==null?void 0:l.auctionDate)&&"error-picker"])},{"calendar-header":X(({index:c,day:u})=>[d("div",{class:B(c===5||c===6?"red-color":"")},L(u),3)]),_:1},8,["modelValue","min-date","class"]),d("div",yt,[d("div",Rt,[d("div",At,[zt,F(d("select",{"onUpdate:modelValue":t[1]||(t[1]=c=>i.formData.auctionTime=c),class:B([(a=i.invalid)!=null&&a.auctionTime?"border-error":"border-[#E0E0E0]","border custom-select-launch text-[#858585] md:p-3 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"])},_t,2),[[se,i.formData.auctionTime]])]),St,d("div",Et,[Dt,F(d("select",{"onUpdate:modelValue":t[2]||(t[2]=c=>i.formData.auctionDuration=c),class:B([(h=i.invalid)!=null&&h.auctionDuration?"border-error":"border-[#E0E0E0]","border custom-select-launch text-[#858585] md:p-3 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"])},jt,2),[[se,i.formData.auctionDuration]])])])])])):k("",!0),i.steps.step2?(v(),z(q,{key:1},[d("div",Ot,[Lt,Wt,d("div",$t,[qt,d("p",It,L(i.newDate),1)]),d("div",Ht,[Bt,d("p",Vt,L(i.formData.auctionTime),1)]),d("div",Ft,[Yt,d("p",Ut,L(i.formData.auctionDuration)+" Minutes",1)])]),Nt],64)):k("",!0),i.steps.step1?(v(),z("div",{key:2,class:"pt-4",onClick:t[3]||(t[3]=c=>i.next(1))},[d("button",{disabled:i.sizeObjet!=0,class:B([i.sizeObjet==0?"bg-primary":"bg-base-gray text-white","w-full md:h-[41px] h-[35px] text-blue-100 text-xs font-semibold bg-primary rounded"])}," Next ",10,Xt)])):k("",!0),i.steps.step2?(v(),z("div",Zt,[d("button",{onClick:t[4]||(t[4]=(...c)=>i.back&&i.back(...c)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 border-[#E0E0E0] border-[1px] rounded"}," No "),d("button",{onClick:t[5]||(t[5]=c=>i.next(2)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 bg-primary rounded"}," Yes ")])):k("",!0)],64)}const Qt=G(bt,[["render",Gt]]),Kt={props:{form:{type:Object},steps:{type:Object},active:{type:Boolean},save:{type:Function}},components:{},setup(e){const t=y(e.form),n=y(e.steps),i=y(),s=y(null),o=y(),r=a=>{n.value.step1=!0,n.value.step2=!1},l=a=>{switch(a){case 1:Object.entries(i.value).length===0&&(n.value.step1=!1,n.value.step2=!0);break;case 2:e.save();break}};return ke(t.value,async(a,h)=>{a&&(i.value=je(t.value,"Launch Auction","hours weekeng"),s.value=Object.entries(i.value).length,o.value=null,o.value=Pe(t.value.auctionDate).format("LL"))}),{formData:t,next:l,back:r,steps:n,sizeObjet:s,invalid:i}}},Jt={key:0,class:"w-full flex flex-col p-4 mt-4 gap-2"},ei={class:"flex justify-center gap-6 items-center"},ti={class:"w-full flex flex-col md:gap-2"},ii=d("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Saturday",-1),ni=d("option",{value:"19.00 PM",selected:""},"19.00 PM",-1),oi=[ni],si=d("p",{class:"mt-7"}," - ",-1),ai={class:"w-full flex flex-col md:gap-2"},ri=d("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Monday",-1),li=re('<option value="Select time" selected>Select time</option><option value="00">00.00 AM</option><option value="01">01.00 AM</option><option value="02">02.00 AM</option><option value="03">03.00 AM</option><option value="04">04.00 AM</option><option value="05">05.00 AM</option><option value="06">06.00 AM</option><option value="07">07.00 AM</option><option value="08">08.00 AM</option><option value="09">09.00 AM</option><option value="10">10.00 AM</option><option value="11">11.00 AM</option><option value="12">12.00 PM</option><option value="13">13.00 PM</option><option value="14">14.00 PM</option><option value="15">15.00 PM</option><option value="16">16.00 PM</option><option value="17">17.00 PM</option><option value="18">18.00 PM</option><option value="19">19.00 PM</option><option value="20">20.00 PM</option><option value="21">21.00 PM</option><option value="22">22.00 PM</option><option value="23">23.00 PM</option><option value="24">24.00 PM</option>',26),hi=[li],ci={class:"m-4 p-4 rounded-lg border-[#E0E0E0] border-[1px]"},di=re('<p class="font-semibold text-xs md:text-base">Launch Information</p><div class="flex justify-between py-1 gap-2"><p class="text-xs md:text-base">Launch Options</p><p class="text-xs md:text-base">After Hours (Weekend)</p></div><div class="flex justify-between py-1 gap-2"><p class="text-xs md:text-base">Auction Date</p><p class="font-semibold text-xs md:text-base"></p></div><div class="flex justify-between py-1 gap-2"><p class="text-xs md:text-base">From</p><p class="font-semibold text-xs md:text-base">Saturday, 19.00 PM</p></div>',4),ui={class:"flex justify-between py-1 gap-2"},mi=d("p",{class:"text-xs md:text-base"},"To",-1),pi={class:"font-semibold text-xs md:text-base"},fi=d("p",{class:"px-4 pt-4 text-xs md:text-base border-[#E0E0E0] border-t-[1px]"}," Are you sure you want to launch auction with this option?",-1),gi=["disabled"],vi={key:3,class:"pt-4 flex gap-4"};function bi(e,t,n,i,s,o){var r;return v(),z(q,null,[i.steps.step1?(v(),z("div",Jt,[d("div",ei,[d("div",ti,[ii,F(d("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.formData.daySaturday=l),disabled:"",class:"custom-select-launch border-none text-[#858585] md:p-3 bg-[#E0E0E0] text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"},oi,512),[[se,i.formData.daySaturday]])]),si,d("div",ai,[ri,F(d("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>i.formData.dayMonday=l),class:B([(r=i.invalid)!=null&&r.auctionTime?"border-error":"border-[#E0E0E0]","custom-select-launch border text-[#858585] md:p-3 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"])},hi,2),[[se,i.formData.dayMonday]])])])])):k("",!0),i.steps.step2?(v(),z(q,{key:1},[d("div",ci,[di,d("div",ui,[mi,d("p",pi,"Monday, "+L(i.formData.dayMonday),1)])]),fi],64)):k("",!0),i.steps.step1?(v(),z("div",{key:2,class:"pt-4",onClick:t[2]||(t[2]=l=>i.next(1))},[d("button",{disabled:i.sizeObjet!=0,class:B([i.sizeObjet==0?"bg-primary":"bg-base-gray text-white","w-full md:h-[41px] h-[35px] text-blue-100 text-xs font-semibold bg-primary rounded"])}," Next ",10,gi)])):k("",!0),i.steps.step2?(v(),z("div",vi,[d("button",{onClick:t[3]||(t[3]=(...l)=>i.back&&i.back(...l)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 border-[#E0E0E0] border-[1px] rounded"}," No "),d("button",{onClick:t[4]||(t[4]=l=>i.next(2)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 bg-primary rounded"}," Yes ")])):k("",!0)],64)}const wi=G(Kt,[["render",bi]]),xi={props:{form:{type:Object},steps:{type:Object},save:{type:Function}},components:{},setup(e){const t=y(e.form),n=y(e.steps),i=y();return{formData:t,next:r=>{switch(i.value=je(t.value,"Launch Auction","after verified"),r){case 1:Object.entries(i.value).length===0&&(n.value.step1=!1,n.value.step2=!0);break;case 2:e.save();break}},back:r=>{n.value.step1=!0,n.value.step2=!1},steps:n,invalid:i}}},yi={key:0,class:"w-full flex mt-4 flex-col md:gap-4"},Ri=d("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Auction Durations",-1),Ai=d("option",{value:"45"},"45 Minutes",-1),zi=d("option",{value:"50"},"50 Minutes",-1),Mi=d("option",{value:"60"},"60 Minutes",-1),_i=d("option",{value:"65"},"65 Minutes",-1),Si=[Ai,zi,Mi,_i],Ei={class:"m-2 p-2 md:p-4 rounded-lg border-[#E0E0E0] border-[1px]"},Di=d("p",{class:"font-semibold text-xs md:text-base"},"Launch Information",-1),Ci=d("div",{class:"flex justify-between py-2 gap-2"},[d("p",{class:"text-xs md:text-base"},"Launch Options"),d("p",{class:"text-xs md:text-base"},"Launch now after verified")],-1),ki={class:"flex justify-between py-2 gap-2"},Ti=d("p",{class:"text-xs md:text-base"},"Auction Durations",-1),Pi={class:"font-semibold text-xs md:text-base"},ji=d("p",{class:"px-4 pt-4 text-xs md:text-base border-[#E0E0E0] border-t-[1px]"},"Are you sure you want to launch auction with this option? You can't cancel after it's been launched ",-1),Oi=d("button",{class:"w-full md:h-[41px] h-[35px] text-blue-100 text-xs md:text-base font-semibold bg-primary rounded"}," Next ",-1),Li=[Oi],Wi={key:3,class:"pt-4 flex gap-4"};function $i(e,t,n,i,s,o){var r;return v(),z(q,null,[i.steps.step1?(v(),z("div",yi,[Ri,F(d("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.formData.auctionDuration=l),class:B([(r=i.invalid)!=null&&r.auctionDuration?"border-error":"border-[#E0E0E0]","border text-[#858585] md:p-3 custom-select-launch text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"])},Si,2),[[se,i.formData.auctionDuration]])])):k("",!0),i.steps.step2?(v(),z(q,{key:1},[d("div",Ei,[Di,Ci,d("div",ki,[Ti,d("p",Pi,L(i.formData.auctionDuration)+" Minutes",1)])]),ji],64)):k("",!0),i.steps.step1?(v(),z("div",{key:2,class:"pt-4",onClick:t[1]||(t[1]=l=>i.next(1))},Li)):k("",!0),i.steps.step2?(v(),z("div",Wi,[d("button",{onClick:t[2]||(t[2]=(...l)=>i.back&&i.back(...l)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 border-[#E0E0E0] border-[1px] rounded"}," No "),d("button",{onClick:t[3]||(t[3]=l=>i.next(2)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 bg-primary rounded"}," Yes ")])):k("",!0)],64)}const qi=G(xi,[["render",$i]]),Ii={props:{form:{type:Object},steps:{type:Object},save:{type:Function}},setup(e){const t=y(e.form),n=y(e.steps),i=y(null),s=y(),o=y(),r=h=>{n.value.step1=!0,n.value.step2=!1};function l(h,c=0){let u=new Date;if(!h)return u;let m=24*60*60*1e3;return u.setHours(h,c,0,0),u.setTime(u.getTime()+m),u}return{formData:t,next:h=>{switch(h){case 1:o.value=Pe(l(9)).format("MMMM DD, h:mm: A"),n.value.step1=!1,n.value.step2=!0;break;case 2:t.value.launchOptions="none",e.save();break}},steps:n,invalid:s,sizeObjet:i,back:r,newDate:o}}},Hi={class:"m-4 p-4 rounded-lg border-[#E0E0E0] border-[1px]"},Bi=d("p",{class:"font-semibold text-xs md:text-base"},"Launch Information",-1),Vi=d("div",{class:"flex justify-between py-1 md:gap-2"},[d("p",{class:"text-xs md:text-base"},"Launch Option"),d("p",{class:"text-xs md:text-base"},"Next Day")],-1),Fi={class:"flex justify-between py-1 md:gap-2"},Yi=d("p",{class:"text-xs md:text-base"},"Auction Date",-1),Ui={class:"font-semibold text-xs md:text-base"},Ni=d("div",{class:"flex justify-between py-1 md:gap-2"},[d("p",{class:"text-xs md:text-base"},"Auction Duration"),d("p",{class:"font-semibold text-xs md:text-base"},"480 Minutes")],-1),Xi=d("p",{class:"px-4 pt-4 text-xs md:text-base border-[#E0E0E0] border-t-[1px]"},"Are you sure you want to launch auction with this option?",-1),Zi=d("button",{id:"nextAuction",class:"w-full md:h-[41px] h-[35px] text-blue-100 text-xs font-semibold bg-primary rounded"}," Launch Auction for Tomorrow ",-1),Gi=[Zi],Qi={key:2,class:"pt-4 flex gap-4"};function Ki(e,t,n,i,s,o){return v(),z(q,null,[i.steps.step2?(v(),z(q,{key:0},[d("div",Hi,[Bi,Vi,d("div",Fi,[Yi,d("p",Ui,L(i.newDate),1)]),Ni]),Xi],64)):k("",!0),i.steps.step1?(v(),z("div",{key:1,class:"pt-4",onClick:t[0]||(t[0]=r=>i.next(1))},Gi)):k("",!0),i.steps.step2?(v(),z("div",Qi,[d("button",{onClick:t[1]||(t[1]=(...r)=>i.back&&i.back(...r)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 border-[#E0E0E0] border-[1px] rounded"}," No "),d("button",{id:"completeAuction",onClick:t[2]||(t[2]=r=>i.next(2)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 bg-primary rounded"}," Yes ")])):k("",!0)],64)}const Ji=G(Ii,[["render",Ki]]),en=Te("modalLaunch",{state:()=>({isActive:!1}),actions:{openModal(e){this.isActive=e},closeModal(e){this.isActive=e}}}),tn={props:{form:{type:Object},launch:{type:Boolean},invalid:{type:Object},modalLaunch:{type:Function},isActive:{type:Boolean}},components:{DateAndTime:Qt,HoursWeekeng:wi,AfterVerified:qi,NextDay:Ji},setup(e){const t=y(e.isActive),n=y(e.form),i=en(),s=y({step1:!0,step2:!1}),o=y({step1:!0,step2:!1}),r=y({step1:!0,step2:!1});return ke(n.value,async(h,c)=>{if(h)switch(h.launchOptions){case"Launch now after verified":n.value.auctionDate="",n.value.auctionTime="",n.value.dayMonday="Select time";break;case"Choose the date & time":n.value.dayMonday="Select time";break;case"Choose after hours (weekend)":n.value.auctionDate="",n.value.auctionTime="";break}}),{isOpen:t,formData:n,save:()=>{e.modalLaunch()},stepsVerifiqued:s,stepsDateTime:o,stepsDateWeekeng:r,statusModal:i,newtDayDate:()=>{console.log("formData",n.value),dateTomorrow(9)}}}},nn={class:"fixed inset-0 flex items-end md:items-center md:justify-center bg-base-black bg-opacity-50"},on={class:"max-w-md overflow-auto bg-white rounded-lg shadow-xl animation-fade-modal"},sn={class:"md:p-4 p-2 rounded-t-lg bg-[#22282F] flex items-center justify-between"},an=d("p",{class:"text-sm md:text-xl text-white"},"Launch Auction",-1),rn=d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),ln=[rn],hn={class:"p-2 pb-0 md:p-4 flex gap-3 flex-col"},cn=re('<div class="flex justify-start items-center gap-2"><p class="text-xs md:text-base">Options</p><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8.78145 8.00048L5.48145 4.70048L6.42411 3.75781L10.6668 8.00048L6.42411 12.2431L5.48145 11.3005L8.78145 8.00048Z" fill="#858585"></path></svg><p class="text-[#858585] text-xs md:text-base">Summary</p></div>',1),dn={class:"flex gap-3 items-start"},un={class:"w-[90px] h-[70px] md:w-[120px] md:h-[90px]"},mn=["src"],pn={class:"font-semibold text-xs md:text-base"},fn={class:"text-[10px] md:text-base"},gn={class:"mt-2 border-[#E0E0E0] border-t-[1px]"},vn={class:"p-2 md:p-4"},bn=d("p",{class:"md:font-semibold text-xs md:text-base"},"Launch Options",-1),wn=d("p",{class:"text-[#858585] text-[10px] md:text-base"},"After you launch the auction we will review & approve your auction. Your auction will be listed the next day from 9 am to 5pm. ",-1);function xn(e,t,n,i,s,o){var l,a,h,c,u,m,p,x;const r=O("NextDay");return F((v(),z("div",nn,[d("div",on,[d("div",sn,[an,(v(),z("svg",{onClick:t[0]||(t[0]=f=>i.statusModal.closeModal(!1)),xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"#fff"},ln))]),d("div",hn,[cn,d("div",dn,[d("div",un,[d("img",{class:"w-full h-full rounded-lg object-cover",src:(l=i.formData)==null?void 0:l.previewFront,alt:""},null,8,mn)]),d("div",null,[d("p",pn,L((a=i.formData)==null?void 0:a.year)+" "+L((h=i.formData)==null?void 0:h.make)+" "+L((c=i.formData)==null?void 0:c.model),1),d("p",fn,L((m=(u=i.formData)==null?void 0:u.saveCity)==null?void 0:m.name)+", "+L((x=(p=i.formData)==null?void 0:p.saveProvince)==null?void 0:x.name),1)])])]),d("div",gn,[d("div",vn,[i.stepsVerifiqued.step1&&i.formData.launchOptions=="none"||i.stepsVerifiqued.step1&&i.formData.launchOptions=="Launch now after verified"||i.stepsDateTime.step1&&i.formData.launchOptions=="Choose the date & time"||i.stepsDateWeekeng.step1&&i.formData.launchOptions=="Choose after hours (weekend)"||i.formData.launchOptions==null?(v(),z(q,{key:0},[bn,wn],64)):k("",!0),D(r,{steps:i.stepsVerifiqued,form:i.formData,save:i.save},null,8,["steps","form","save"])])])])],512)),[[le,i.statusModal.isActive]])}const Io=G(tn,[["render",xn]]);function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?He(Object(n),!0).forEach(function(i){W(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(e,t){if(e==null)return{};var n,i,s=function(r,l){if(r==null)return{};var a,h,c={},u=Object.keys(r);for(h=0;h<u.length;h++)a=u[h],l.indexOf(a)>=0||(c[a]=r[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Q(e){return function(t){if(Array.isArray(t))return we(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return we(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return we(t,n)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function we(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Be,Rn,he,E=(Be=function(e){/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function n(){for(var i=[],s=0;s<arguments.length;s++){var o=arguments[s];if(o){var r=typeof o;if(r==="string"||r==="number")i.push(o);else if(Array.isArray(o)){if(o.length){var l=n.apply(null,o);l&&i.push(l)}}else if(r==="object")if(o.toString===Object.prototype.toString)for(var a in o)t.call(o,a)&&o[a]&&i.push(a);else i.push(o.toString())}}return i.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()},Be(he={path:Rn,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(t==null&&he.path)}},he.exports),he.exports),I=function(e){return function(t,n){if(!t)return e;var i;typeof t=="string"?i=t:n=t;var s=e;return i&&(s+="__"+i),s+(n?Object.keys(n).reduce(function(o,r){var l=n[r];return l&&(o+=" "+(typeof l=="boolean"?s+"--"+r:s+"--"+r+"_"+l)),o},""):"")}};function Me(e,t,n){var i,s,o,r,l;function a(){var c=Date.now()-r;c<t&&c>=0?i=setTimeout(a,t-c):(i=null,n||(l=e.apply(o,s),o=s=null))}t==null&&(t=100);var h=function(){o=this,s=arguments,r=Date.now();var c=n&&!i;return i||(i=setTimeout(a,t)),c&&(l=e.apply(o,s),o=s=null),l};return h.clear=function(){i&&(clearTimeout(i),i=null)},h.flush=function(){i&&(l=e.apply(o,s),o=s=null,clearTimeout(i),i=null)},h}Me.debounce=Me;var _e=Me,g=function(){return g=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},g.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ke(e,t){var n,i;return e&&t?(n=""+e+t[0].toUpperCase()+t.slice(1),i=e+"-"+t):(n=e||t,i=e||t),{name:n,classname:i}}function Je(e){return/^blob:/.test(e)}function Ve(e){return Je(e)||function(t){return/^data:/.test(t)}(e)}function J(e){return!!(e&&e.constructor&&e.call&&e.apply)}function C(e){return e===void 0}function pe(e){return typeof e=="object"&&e!==null}function Se(e,t,n){var i={};return pe(e)?(Object.keys(t).forEach(function(s){C(e[s])?i[s]=t[s]:pe(t[s])?pe(e[s])?i[s]=Se(e[s],t[s],n[s]):i[s]=e[s]?t[s]:n[s]:t[s]===!0||t[s]===!1?i[s]=!!e[s]:i[s]=e[s]}),i):e?t:n}function ce(e){var t=Number(e);return Number.isNaN(t)?e:t}function Fe(e){return typeof(e=="number"||function(t){return typeof t=="object"&&t!==null}(e)&&toString.call(e)=="[object Number]")&&!et(e)}function et(e){return e!=e}function tt(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var oe=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.type="manipulateImage",this.move=e,this.scale=t},An=function(e,t){t===void 0&&(t={}),this.type="resize",this.directions=e,this.params=t},Oe=function(e){this.type="move",this.directions=e},zn=function(){function e(t,n,i,s,o){this.type="drag",this.nativeEvent=t,this.position=i,this.previousPosition=s,this.element=n,this.anchor=o}return e.prototype.shift=function(){var t=this,n=t.element,i=t.anchor,s=t.position;if(n){var o=n.getBoundingClientRect(),r=o.left,l=o.top;return{left:s.left-r-i.left,top:s.top-l-i.top}}return{left:0,top:0}},e}(),Le={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&!this.disabled&&e.touches.length===1&&(this.touches=Q(e.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),e.touches.length&&this.initAnchor(this.touches.reduce(function(t,n){return{clientX:t.clientX+n.clientX/e.touches.length,clientY:t.clientY+n.clientY/e.touches.length}},{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(!this.disabled){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.draggable.getBoundingClientRect(),n=t.left,i=t.right,s=t.bottom,o=t.top;this.anchor={left:e.clientX-n,top:e.clientY-o,bottom:s-e.clientY,right:i-e.clientX}},processMove:function(e,t){var n=Q(t);if(this.touches.length){if(this.touches.length===1&&n.length===1){var i=this.$refs.draggable;this.$emit("drag",new zn(e,i,{left:n[0].clientX,top:n[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=n}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"]};Le.render=function(e,t,n,i,s,o){return v(),_("div",{ref:"draggable",class:n.classname,onTouchstart:t[1]||(t[1]=function(){return o.onTouchStart&&o.onTouchStart.apply(o,arguments)}),onMousedown:t[2]||(t[2]=function(){return o.onMouseDown&&o.onMouseDown.apply(o,arguments)}),onMouseover:t[3]||(t[3]=function(){return o.onMouseOver&&o.onMouseOver.apply(o,arguments)}),onMouseleave:t[4]||(t[4]=function(){return o.onMouseLeave&&o.onMouseLeave.apply(o,arguments)})},[K(e.$slots,"default")],34)};var xe=I("vue-handler-wrapper"),it={name:"HandlerWrapper",components:{DraggableElement:Le},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t,n=Ke(this.horizontalPosition,this.verticalPosition);e=xe((W(t={},n.classname,!0),W(t,"disabled",this.disabled),t))}else e=xe({disabled:this.disabled});return{root:e,draggable:xe("draggable")}}},emits:["leave","enter","drag","drag-end"]};it.render=function(e,t,n,i,s,o){var r=O("DraggableElement");return v(),_("div",{class:o.classes.root},[D(r,{class:o.classes.draggable,onDrag:t[1]||(t[1]=function(l){return e.$emit("drag",l)}),onDragEnd:t[2]||(t[2]=function(l){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(l){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(l){return e.$emit("enter")})},{default:X(function(){return[K(e.$slots,"default")]}),_:3},8,["class"])],2)};var Mn=I("vue-line-wrapper"),nt={name:"LineWrapper",components:{DraggableElement:Le},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var e;return Mn((W(e={},this.position,!0),W(e,"disabled",this.disabled),e))}},emits:["leave","enter","drag","drag-end"]};nt.render=function(e,t,n,i,s,o){var r=O("DraggableElement");return v(),_(r,{class:o.classname,onDrag:t[1]||(t[1]=function(l){return e.$emit("drag",l)}),onDragEnd:t[2]||(t[2]=function(l){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(l){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(l){return e.$emit("enter")})},{default:X(function(){return[K(e.$slots,"default")]}),_:3},8,["class"])};var V=["left","right","top","bottom"],_n=["left","right"],Sn=["top","bottom"],En=["left","top"],Dn=["fill-area","fit-area","stencil","none"],Ye={left:0,top:0,width:0,height:0};function Ue(e,t,n){return!(n=n||["width","height","left","top"]).some(function(i){return e[i]!==t[i]})}function Y(e){return{left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height}}function ee(e,t){return{left:e.left-t.left,top:e.top-t.top}}function T(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function ae(e,t){var n={left:0,top:0,right:0,bottom:0};return V.forEach(function(i){var s=t[i],o=Y(e)[i];n[i]=s!==void 0&&o!==void 0?i==="left"||i==="top"?Math.max(0,s-o):Math.max(0,o-s):0}),n}function H(e,t){return{left:e.left-t.left,top:e.top-t.top,width:e.width+t.left+t.right,height:e.height+t.top+t.bottom}}function ge(e){return{left:-e.left,top:-e.top}}function j(e,t){return g(g({},e),{left:e.left+t.left,top:e.top+t.top})}function $(e,t,n,i){if(t!==1){if(n){var s=T(e);return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2+(n.left-s.left)*(i||1-t),top:e.top+e.height*(1-t)/2+(n.top-s.top)*(i||1-t)}}return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2,top:e.top+e.height*(1-t)/2}}return e}function A(e){return e.width/e.height}function te(e,t){return Math.min(t.right!==void 0&&t.left!==void 0?(t.right-t.left)/e.width:1/0,t.bottom!==void 0&&t.top!==void 0?(t.bottom-t.top)/e.height:1/0)}function ie(e,t){var n={left:0,top:0},i=ae(e,t);return i.left&&i.left>0?n.left=i.left:i.right&&i.right>0&&(n.left=-i.right),i.top&&i.top>0?n.top=i.top:i.bottom&&i.bottom>0&&(n.top=-i.bottom),n}function ye(e,t){var n;return t.minimum&&e<t.minimum?n=t.minimum:t.maximum&&e>t.maximum&&(n=t.maximum),n}function ot(e,t){var n=A(e),i=A(t);return t.width<1/0&&t.height<1/0?n>i?{width:t.width,height:t.width/n}:{width:t.height*n,height:t.height}:t.width<1/0?{width:t.width,height:t.width/n}:t.height<1/0?{width:t.height*n,height:t.height}:e}function st(e,t){var n=t*Math.PI/180;return{width:Math.abs(e.width*Math.cos(n))+Math.abs(e.height*Math.sin(n)),height:Math.abs(e.width*Math.sin(n))+Math.abs(e.height*Math.cos(n))}}function Z(e,t){var n=t*Math.PI/180;return{left:e.left*Math.cos(n)-e.top*Math.sin(n),top:e.left*Math.sin(n)+e.top*Math.cos(n)}}function ve(e,t){var n=ae(P(e,t),t);return n.left+n.right+n.top+n.bottom?n.left+n.right>n.top+n.bottom?Math.min((e.width+n.left+n.right)/e.width,te(e,t)):Math.min((e.height+n.top+n.bottom)/e.height,te(e,t)):1}function P(e,t,n){n===void 0&&(n=!1);var i=ie(e,t);return j(e,n?ge(i):i)}function Ee(e){return{width:e.right!==void 0&&e.left!==void 0?e.right-e.left:1/0,height:e.bottom!==void 0&&e.top!==void 0?e.bottom-e.top:1/0}}function Cn(e,t){return g(g({},e),{minWidth:Math.min(t.width,e.minWidth),minHeight:Math.min(t.height,e.minHeight),maxWidth:Math.min(t.width,e.maxWidth),maxHeight:Math.min(t.height,e.maxHeight)})}function at(e,t,n){n===void 0&&(n=!0);var i={};return V.forEach(function(s){var o=e[s],r=t[s];o!==void 0&&r!==void 0?i[s]=s==="left"||s==="top"?n?Math.max(o,r):Math.min(o,r):n?Math.min(o,r):Math.max(o,r):r!==void 0?i[s]=r:o!==void 0&&(i[s]=o)}),i}function be(e,t){return at(e,t,!0)}function Ne(e){var t=e.size,n=e.aspectRatio,i=e.ignoreMinimum,s=e.sizeRestrictions;return!!((t.correctRatio||A(t)>=n.minimum&&A(t)<=n.maximum)&&t.height<=s.maxHeight&&t.width<=s.maxWidth&&t.width&&t.height&&(i||t.height>=s.minHeight&&t.width>=s.minWidth))}function Xe(e,t){return Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2)}function N(e){var t=e.width,n=e.height,i=e.sizeRestrictions,s={minimum:e.aspectRatio&&e.aspectRatio.minimum||0,maximum:e.aspectRatio&&e.aspectRatio.maximum||1/0},o={width:Math.max(i.minWidth,Math.min(i.maxWidth,t)),height:Math.max(i.minHeight,Math.min(i.maxHeight,n))};function r(h,c){return c===void 0&&(c=!1),h.reduce(function(u,m){return Ne({size:m,aspectRatio:s,sizeRestrictions:i,ignoreMinimum:c})&&(!u||Xe(m,{width:t,height:n})<Xe(u,{width:t,height:n}))?m:u},null)}var l=[];s&&[s.minimum,s.maximum].forEach(function(h){h&&l.push({width:o.width,height:o.width/h,correctRatio:!0},{width:o.height*h,height:o.height,correctRatio:!0})}),Ne({size:o,aspectRatio:s,sizeRestrictions:i})&&l.push(o);var a=r(l)||r(l,!0);return a&&{width:a.width,height:a.height}}function De(e){var t=e.event,n=e.coordinates,i=e.positionRestrictions,s=i===void 0?{}:i,o=j(n,t.directions);return j(o,ie(o,s))}function kn(e){var t=e.coordinates,n=e.transform,i=e.imageSize,s=e.sizeRestrictions,o=e.positionRestrictions,r=e.aspectRatio,l=e.visibleArea,a=function(c,u){return De({coordinates:c,positionRestrictions:o,event:new Oe({left:u.left-c.left,top:u.top-c.top})})},h=g({},t);return(Array.isArray(n)?n:[n]).forEach(function(c){var u={};C((u=typeof c=="function"?c({coordinates:h,imageSize:i,visibleArea:l}):c).width)&&C(u.height)||(h=function(m,p){var x=g(g(g({},m),N({width:p.width,height:p.height,sizeRestrictions:s,aspectRatio:r})),{left:0,top:0});return a(x,{left:m.left,top:m.top})}(h,g(g({},h),u))),C(u.left)&&C(u.top)||(h=a(h,g(g({},h),u)))}),h}function Tn(e){e.event;var t=e.getAreaRestrictions,n=e.boundaries,i=e.coordinates,s=e.visibleArea;e.aspectRatio;var o=e.stencilSize,r=e.sizeRestrictions,l=e.positionRestrictions;e.stencilReference;var a,h,c,u=g({},i),m=g({},s),p=g({},o);a=A(p),h=A(u),c===void 0&&(c=.001),(a===0||h===0?Math.abs(h-a)<c:Math.abs(h/a)<1+c&&Math.abs(h/a)>1-c)||(u=g(g({},u),N({sizeRestrictions:r,width:u.width,height:u.height,aspectRatio:{minimum:A(p),maximum:A(p)}})));var x=ve(m=$(m,u.width*n.width/(m.width*p.width)),t({visibleArea:m,type:"resize"}));return x!==1&&(m=$(m,x),u=$(u,x)),m=P(m=j(m,ee(T(u),T(m))),t({visibleArea:m,type:"move"})),{coordinates:u=P(u,be(Y(m),l)),visibleArea:m}}function Pn(e){var t=e.event,n=e.getAreaRestrictions,i=e.boundaries,s=e.coordinates,o=e.visibleArea;e.aspectRatio,e.stencilSize,e.sizeRestrictions;var r=e.positionRestrictions;e.stencilReference;var l=g({},s),a=g({},o);if(s&&o&&t.type!=="manipulateImage"){var h={width:0,height:0};a.width,i.width,A(i)>A(l)?(h.height=.8*i.height,h.width=h.height*A(l)):(h.width=.8*i.width,h.height=h.width*A(l));var c=ve(a=$(a,l.width*i.width/(a.width*h.width)),n({visibleArea:a,type:"resize"}));a=$(a,c),c!==1&&(h.height/=c,h.width/=c),a=P(a=j(a,ee(T(l),T(a))),n({visibleArea:a,type:"move"})),l=P(l,be(Y(a),r))}return{coordinates:l,visibleArea:a}}function jn(e){var t=e.event,n=e.coordinates,i=e.visibleArea,s=e.getAreaRestrictions,o=g({},i),r=g({},n);if(t.type==="setCoordinates"){var l=Math.max(0,r.width-o.width),a=Math.max(0,r.height-o.height);l>a?o=$(o,Math.min(r.width/o.width,te(o,s({visibleArea:o,type:"resize"})))):a>l&&(o=$(o,Math.min(r.height/o.height,te(o,s({visibleArea:o,type:"resize"}))))),o=P(o=j(o,ge(ie(r,Y(o)))),s({visibleArea:o,type:"move"}))}return{visibleArea:o,coordinates:r}}function On(e){var t=e.imageSize,n=e.visibleArea,i=e.coordinates,s=n||t;return{left:(n?n.left:0)+s.width/2-i.width/2,top:(n?n.top:0)+s.height/2-i.height/2}}function Ln(e){var t=e.imageSize,n=e.visibleArea,i=e.aspectRatio,s=e.sizeRestrictions,o=n||t,r=Math.min(i.maximum||1/0,Math.max(i.minimum||0,A(o))),l=o.width<o.height?{width:.8*o.width,height:.8*o.width/r}:{height:.8*o.height,width:.8*o.height*r};return N(g(g({},l),{aspectRatio:i,sizeRestrictions:s}))}function Wn(e){var t,n,i=e.imageSize,s=e.visibleArea,o=e.boundaries,r=e.aspectRatio,l=e.sizeRestrictions,a=e.stencilSize,h=s||i;return A(h)>A(o)?n=(t=a.height*h.height/o.height)*A(a):t=(n=a.width*h.width/o.width)/A(a),N({width:n,height:t,aspectRatio:r,sizeRestrictions:l})}function $n(e){var t=e.getAreaRestrictions,n=e.coordinates,i=e.imageSize,s=A(e.boundaries);if(n){var o={height:Math.max(n.height,i.height),width:Math.max(n.width,i.width)},r=ot({width:A(o)>s?o.width:o.height*s,height:A(o)>s?o.width/s:o.height},Ee(t())),l={left:n.left+n.width/2-r.width/2,top:n.top+n.height/2-r.height/2,width:r.width,height:r.height},a=ae(n,Y(g({left:0,top:0},i))),h={};return!a.left&&!a.right&&l.width<=i.width&&(h.left=0,h.right=i.width),!a.top&&!a.bottom&&l.height<=i.height&&(h.top=0,h.bottom=i.height),P(l,h)}var c=A(i);return r={height:c>s?i.height:i.width/s,width:c>s?i.height*s:i.width},{left:i.width/2-r.width/2,top:i.height/2-r.height/2,width:r.width,height:r.height}}function de(e,t){return at(e,Y(t))}function qn(e){var t=e.event,n=e.coordinates,i=e.visibleArea,s=e.sizeRestrictions,o=e.getAreaRestrictions,r=e.positionRestrictions,l=e.adjustStencil,a=t.scale,h=t.move,c=g({},i),u=g({},n),m=1,p=1,x=a.factor&&Math.abs(a.factor-1)>.001;c=j(c,{left:h.left||0,top:h.top||0});var f={stencil:{minimum:Math.max(s.minWidth?s.minWidth/u.width:0,s.minHeight?s.minHeight/u.height:0),maximum:Math.min(s.maxWidth?s.maxWidth/u.width:1/0,s.maxHeight?s.maxHeight/u.height:1/0,te(u,r))},area:{maximum:te(c,o({visibleArea:c,type:"resize"}))}};a.factor&&x&&(a.factor<1?(p=Math.max(a.factor,f.stencil.minimum))>1&&(p=1):a.factor>1&&(p=Math.min(a.factor,Math.min(f.area.maximum,f.stencil.maximum)))<1&&(p=1)),p&&(c=$(c,p,a.center));var b=n.left-i.left,M=i.width+i.left-(n.width+n.left),w=n.top-i.top,S=i.height+i.top-(n.height+n.top);return c=P(c=j(c,ie(c,{left:r.left!==void 0?r.left-b*p:void 0,top:r.top!==void 0?r.top-w*p:void 0,bottom:r.bottom!==void 0?r.bottom+S*p:void 0,right:r.right!==void 0?r.right+M*p:void 0})),o({visibleArea:c,type:"move"})),u.width=u.width*p,u.height=u.height*p,u.left=c.left+b*p,u.top=c.top+w*p,u=P(u,be(Y(c),r)),a.factor&&x&&l&&(a.factor>1?m=Math.min(f.area.maximum,a.factor)/p:a.factor<1&&(m=Math.max(u.height/c.height,u.width/c.width,a.factor/p)),m!==1&&(c=j(c=P(c=$(c,m,a.factor>1?a.center:T(u)),o({visibleArea:c,type:"move"})),ge(ie(u,Y(c)))))),{coordinates:u,visibleArea:c}}function In(e){var t=e.aspectRatio,n=e.getAreaRestrictions,i=e.coordinates,s=e.visibleArea,o=e.sizeRestrictions,r=e.positionRestrictions,l=e.imageSize,a=e.previousImageSize,h=e.angle,c=g({},i),u=g({},s),m=Z(T(g({left:0,top:0},a)),h);return(c=g(g({},N({sizeRestrictions:o,aspectRatio:t,width:c.width,height:c.height})),Z(T(c),h))).left-=m.left-l.width/2+c.width/2,c.top-=m.top-l.height/2+c.height/2,u=$(u,ve(u,n({visibleArea:u,type:"resize"}))),{coordinates:c=P(c,r),visibleArea:u=P(u=j(u,ee(T(c),T(i))),n({visibleArea:u,type:"move"}))}}function Hn(e){var t=e.flip,n=e.previousFlip,i=e.rotate;e.aspectRatio;var s=e.getAreaRestrictions,o=e.coordinates,r=e.visibleArea,l=e.imageSize,a=g({},o),h=g({},r),c=n.horizontal!==t.horizontal,u=n.vertical!==t.vertical;if(c||u){var m=Z({left:l.width/2,top:l.height/2},-i),p=Z(T(a),-i),x=Z({left:c?m.left-(p.left-m.left):p.left,top:u?m.top-(p.top-m.top):p.top},i);a=j(a,ee(x,T(a))),p=Z(T(h),-i),h=P(h=j(h,ee(x=Z({left:c?m.left-(p.left-m.left):p.left,top:u?m.top-(p.top-m.top):p.top},i),T(h))),s({visibleArea:h,type:"move"}))}return{coordinates:a,visibleArea:h}}function Ze(e){var t=e.directions,n=e.coordinates,i=e.positionRestrictions,s=i===void 0?{}:i,o=e.sizeRestrictions,r=e.preserveRatio,l=e.compensate,a=g({},t),h=H(n,a).width,c=H(n,a).height;h<0&&(a.left<0&&a.right<0?(a.left=-(n.width-o.minWidth)/(a.left/a.right),a.right=-(n.width-o.minWidth)/(a.right/a.left)):a.left<0?a.left=-(n.width-o.minWidth):a.right<0&&(a.right=-(n.width-o.minWidth))),c<0&&(a.top<0&&a.bottom<0?(a.top=-(n.height-o.minHeight)/(a.top/a.bottom),a.bottom=-(n.height-o.minHeight)/(a.bottom/a.top)):a.top<0?a.top=-(n.height-o.minHeight):a.bottom<0&&(a.bottom=-(n.height-o.minHeight)));var u=ae(H(n,a),s);l&&(u.left&&u.left>0&&u.right===0?(a.right+=u.left,a.left-=u.left):u.right&&u.right>0&&u.left===0&&(a.left+=u.right,a.right-=u.right),u.top&&u.top>0&&u.bottom===0?(a.bottom+=u.top,a.top-=u.top):u.bottom&&u.bottom>0&&u.top===0&&(a.top+=u.bottom,a.bottom-=u.bottom),u=ae(H(n,a),s));var m={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(V.forEach(function(f){var b=u[f];b&&a[f]&&(m[f]=Math.max(0,1-b/a[f]))}),r){var p=Math.min.apply(null,V.map(function(f){return m[f]}));p!==1/0&&V.forEach(function(f){a[f]*=p})}else V.forEach(function(f){m[f]!==1/0&&(a[f]*=m[f])});if(h=H(n,a).width,c=H(n,a).height,a.right+a.left&&(h>o.maxWidth?m.width=(o.maxWidth-n.width)/(a.right+a.left):h<o.minWidth&&(m.width=(o.minWidth-n.width)/(a.right+a.left))),a.bottom+a.top&&(c>o.maxHeight?m.height=(o.maxHeight-n.height)/(a.bottom+a.top):c<o.minHeight&&(m.height=(o.minHeight-n.height)/(a.bottom+a.top))),r){var x=Math.min(m.width,m.height);x!==1/0&&V.forEach(function(f){a[f]*=x})}else m.width!==1/0&&_n.forEach(function(f){a[f]*=m.width}),m.height!==1/0&&Sn.forEach(function(f){a[f]*=m.height});return a}function ue(e,t,n){return t==0&&n==0?e/2:t==0?0:n==0?e:e*Math.abs(t/(t+n))}var Bn=I("vue-simple-handler"),Vn=I("vue-simple-handler-wrapper"),We={name:"SimpleHandler",components:{HandlerWrapper:it},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var e,t=(W(e={},this.horizontalPosition,!!this.horizontalPosition),W(e,this.verticalPosition,!!this.verticalPosition),W(e,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),!!(this.verticalPosition&&this.horizontalPosition)),W(e,"hover",this.hover),e);return{default:E(Bn(t),this.defaultClass,this.hover&&this.hoverClass),wrapper:E(Vn(t),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};We.render=function(e,t,n,i,s,o){var r=O("HandlerWrapper");return v(),_(r,{class:o.classes.wrapper,"vertical-position":n.verticalPosition,"horizontal-position":n.horizontalPosition,disabled:n.disabled,onDrag:o.onDrag,onDragEnd:o.onDragEnd,onEnter:o.onEnter,onLeave:o.onLeave},{default:X(function(){return[D("div",{class:o.classes.default},null,2)]}),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Fn=I("vue-simple-line"),Yn=I("vue-simple-line-wrapper"),$e={name:"SimpleLine",components:{LineWrapper:nt},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:E(Fn(W({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:E(Yn(W({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};$e.render=function(e,t,n,i,s,o){var r=O("LineWrapper");return v(),_(r,{class:o.classes.wrapper,position:n.position,disabled:n.disabled,onDrag:o.onDrag,onDragEnd:o.onDragEnd,onEnter:o.onEnter,onLeave:o.onLeave},{default:X(function(){return[D("div",{class:o.classes.root},null,2)]}),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Re=I("vue-bounding-box"),Un=["east","west",null],Nn=["south","north",null],rt={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return We}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return $e}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var e=[];return Un.forEach(function(t){Nn.forEach(function(n){if(t!==n){var i=Ke(t,n),s=i.name,o=i.classname;e.push({name:s,classname:o,verticalDirection:n,horizontalDirection:t})}})}),{points:e}},computed:{style:function(){var e={};return this.width&&this.height&&(e.width="".concat(this.width,"px"),e.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),e},classes:function(){var e=this.handlersClasses,t=this.handlersWrappersClasses,n=this.linesClasses,i=this.linesWrappersClasses;return{root:Re(),handlers:e,handlersWrappers:t,lines:n,linesWrappers:i}},lineNodes:function(){var e=this,t=[];return this.points.forEach(function(n){n.horizontalDirection&&n.verticalDirection||!e.lines[n.name]||t.push({name:n.name,component:e.linesComponent,class:E(e.classes.lines.default,e.classes.lines[n.name],!e.resizable&&e.classes.lines.disabled),wrapperClass:E(e.classes.linesWrappers.default,e.classes.linesWrappers[n.name],!e.resizable&&e.classes.linesWrappers.disabled),hoverClass:e.classes.lines.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection,disabled:!e.resizable})}),t},handlerNodes:function(){var e=this,t=[],n=this.width,i=this.height;return this.points.forEach(function(s){if(e.handlers[s.name]){var o={name:s.name,component:e.handlersComponent,class:E(e.classes.handlers.default,e.classes.handlers[s.name]),wrapperClass:E(e.classes.handlersWrappers.default,e.classes.handlersWrappers[s.name]),hoverClass:e.classes.handlers.hover,verticalDirection:s.verticalDirection,horizontalDirection:s.horizontalDirection,disabled:!e.resizable};if(n&&i){var r=s.horizontalDirection,l=s.verticalDirection,a=r==="east"?n:r==="west"?0:n/2,h=l==="south"?i:l==="north"?0:i/2;o.wrapperClass=Re("handler"),o.wrapperStyle={transform:"translate(".concat(a,"px, ").concat(h,"px)")},e.transitions&&e.transitions.enabled&&(o.wrapperStyle.transition="".concat(e.transitions.time,"ms ").concat(e.transitions.timingFunction))}else o.wrapperClass=Re("handler",W({},s.classname,!0));t.push(o)}}),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(e,t,n){var i,s=e.shift(),o=s.left,r=s.top,l={left:0,right:0,top:0,bottom:0};t==="west"?l.left-=o:t==="east"&&(l.right+=o),n==="north"?l.top-=r:n==="south"&&(l.bottom+=r),!n&&t?i="width":n&&!t&&(i="height"),this.resizable&&this.$emit("resize",new An(l,{allowedDirections:{left:t==="west"||!t,right:t==="east"||!t,bottom:n==="south"||!n,top:n==="north"||!n},preserveAspectRatio:e.nativeEvent&&e.nativeEvent.shiftKey,respectDirection:i}))}},emits:["resize","resize-end"]};rt.render=function(e,t,n,i,s,o){return v(),_("div",{ref:"box",class:o.classes.root,style:o.style},[K(e.$slots,"default"),D("div",null,[(v(!0),_(q,null,qe(o.lineNodes,function(r){return v(),_(fe(r.component),{key:r.name,"default-class":r.class,"hover-class":r.hoverClass,"wrapper-class":r.wrapperClass,position:r.name,disabled:r.disabled,onDrag:function(l){return o.onHandlerDrag(l,r.horizontalDirection,r.verticalDirection)},onDragEnd:t[1]||(t[1]=function(l){return o.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])}),128))]),(v(!0),_(q,null,qe(o.handlerNodes,function(r){return v(),_("div",{key:r.name,style:r.wrapperStyle,class:r.wrapperClass},[(v(),_(fe(r.component),{"default-class":r.class,"hover-class":r.hoverClass,"wrapper-class":r.wrapperClass,"horizontal-position":r.horizontalDirection,"vertical-position":r.verticalDirection,disabled:r.disabled,onDrag:function(l){return o.onHandlerDrag(l,r.horizontalDirection,r.verticalDirection)},onDragEnd:t[2]||(t[2]=function(l){return o.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)}),128))],6)};var Xn=I("vue-draggable-area"),lt={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:Xn()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(e){if(e.cancelable){var t=this.movable&&e.touches.length===1;t&&(this.touches=Q(e.touches)),(this.touchStarted||t)&&(e.preventDefault(),e.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(e){this.touches.length>=1&&(this.touchStarted?(this.processMove(e,e.touches),e.preventDefault(),e.stopPropagation()):tt({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:e.touches[0].clientX,y:e.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(e){if(this.movable&&e.button===0){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),n=t.left,i=t.top;this.anchor={x:e.clientX-n,y:e.clientY-i}},processMove:function(e,t){var n=Q(t);if(this.touches.length){var i=this.$refs.container.getBoundingClientRect(),s=i.left,o=i.top;this.touches.length===1&&n.length===1&&this.$emit("move",new Oe({left:n[0].clientX-(s+this.anchor.x),top:n[0].clientY-(o+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};lt.render=function(e,t,n,i,s,o){return v(),_("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return o.onTouchStart&&o.onTouchStart.apply(o,arguments)}),onMousedown:t[2]||(t[2]=function(){return o.onMouseDown&&o.onMouseDown.apply(o,arguments)})},[K(e.$slots,"default")],544)};function Ae(e){var t,n;return{rotate:e.rotate||0,flip:{horizontal:((t=e==null?void 0:e.flip)===null||t===void 0?void 0:t.horizontal)||!1,vertical:((n=e==null?void 0:e.flip)===null||n===void 0?void 0:n.vertical)||!1}}}function Zn(e){return new Promise(function(t,n){try{if(e)if(/^data:/i.test(e))t(function(a){a=a.replace(/^data:([^;]+);base64,/gim,"");for(var h=atob(a),c=h.length,u=new ArrayBuffer(c),m=new Uint8Array(u),p=0;p<c;p++)m[p]=h.charCodeAt(p);return u}(e));else if(/^blob:/i.test(e)){var i=new FileReader;i.onload=function(a){t(a.target.result)},o=e,r=function(a){i.readAsArrayBuffer(a)},(l=new XMLHttpRequest).open("GET",o,!0),l.responseType="blob",l.onload=function(){this.status!=200&&this.status!==0||r(this.response)},l.send()}else{var s=new XMLHttpRequest;s.onreadystatechange=function(){s.readyState===4&&(s.status===200||s.status===0?t(s.response):n("Warning: could not load an image to parse its orientation"),s=null)},s.onprogress=function(){s.getResponseHeader("content-type")!=="image/jpeg"&&s.abort()},s.withCredentials=!1,s.open("GET",e,!0),s.responseType="arraybuffer",s.send(null)}else n("Error: the image is empty")}catch(a){n(a)}var o,r,l})}function ht(e){var t=e.rotate,n=e.flip,i=e.scaleX,s=e.scaleY,o="";return o+=" rotate("+t+"deg) ",o+=" scaleX("+i*(n.horizontal?-1:1)+") ",o+=" scaleY("+s*(n.vertical?-1:1)+") "}function Gn(e){try{var t,n=new DataView(e),i=void 0,s=void 0,o=void 0,r=void 0;if(n.getUint8(0)===255&&n.getUint8(1)===216)for(var l=n.byteLength,a=2;a+1<l;){if(n.getUint8(a)===255&&n.getUint8(a+1)===225){o=a;break}a++}if(o&&(i=o+10,function(p,x,f){var b,M="";for(b=x,f+=x;b<f;b++)M+=String.fromCharCode(p.getUint8(b));return M}(n,o+4,4)==="Exif")){var h=n.getUint16(i);if(((s=h===18761)||h===19789)&&n.getUint16(i+2,s)===42){var c=n.getUint32(i+4,s);c>=8&&(r=i+c)}}if(r){for(var u=n.getUint16(r,s),m=0;m<u;m++)if(a=r+12*m+2,n.getUint16(a,s)===274){a+=8,t=n.getUint16(a,s),n.setUint16(a,1,s);break}}return t}catch{return null}}function Ge(e,t){var n=t.getBoundingClientRect(),i=n.left,s=n.top,o={left:0,top:0},r=0;return e.forEach(function(l){o.left+=(l.clientX-i)/e.length,o.top+=(l.clientY-s)/e.length}),e.forEach(function(l){r+=tt({x:o.left,y:o.top},{x:l.clientX-i,y:l.clientY-s})}),{centerMass:o,spread:r,count:e.length}}var ct={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=_e(this.processEnd),this.touches=[]},methods:{processMove:function(e,t){if(this.touches.length){if(this.touches.length===1&&t.length===1)this.$emit("move",new oe({left:this.touches[0].clientX-t[0].clientX,top:this.touches[0].clientY-t[0].clientY}));else if(this.touches.length>1&&this.touchResize){var n=Ge(t,this.$refs.container),i=this.oldGeometricProperties;i.count===n.count&&i.count>1&&this.$emit("resize",new oe({left:i.centerMass.left-n.centerMass.left,top:i.centerMass.top-n.centerMass.top},{factor:i.spread/n.spread,center:n.centerMass})),this.oldGeometricProperties=n}this.touches=t}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(e){return this.eventsFilter?this.eventsFilter(e,this.transforming)!==!1:(e.preventDefault(),e.stopPropagation(),!0)},onTouchStart:function(e){if(e.cancelable&&(this.touchMove||this.touchResize&&e.touches.length>1)&&this.processEvent(e)){var t=this.$refs.container,n=t.getBoundingClientRect(),i=n.left,s=n.top,o=n.bottom,r=n.right;this.touches=Q(e.touches).filter(function(l){return l.clientX>i&&l.clientX<r&&l.clientY>s&&l.clientY<o}),this.oldGeometricProperties=Ge(this.touches,t)}},onTouchEnd:function(e){e.touches.length===0&&(this.touches=[],this.processEnd())},onTouchMove:function(e){var t=this;if(this.touches.length){var n=Q(e.touches).filter(function(i){return!i.identifier||t.touches.find(function(s){return s.identifier===i.identifier})});this.processEvent(e)&&(this.processMove(e,n),this.processStart())}},onMouseDown:function(e){if(this.mouseMove&&"buttons"in e&&e.buttons===1&&this.processEvent(e)){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.processStart()}},onMouseMove:function(e){this.touches.length&&this.processEvent(e)&&this.processMove(e,[{clientX:e.clientX,clientY:e.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(e){if(this.wheelResize&&this.processEvent(e)){var t=this.$refs.container.getBoundingClientRect(),n=t.left,i=t.top,s=1+this.wheelResize.ratio*(r=e.deltaY||e.detail||e.wheelDelta,(l=+r)==0||et(l)?l:l>0?1:-1),o={left:e.clientX-n,top:e.clientY-i};this.$emit("resize",new oe({},{factor:s,center:o})),this.touches.length||this.debouncedProcessEnd()}var r,l}},emits:["resize","move","transform-end"]};ct.render=function(e,t,n,i,s,o){return v(),_("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return o.onTouchStart&&o.onTouchStart.apply(o,arguments)}),onMousedown:t[2]||(t[2]=function(){return o.onMouseDown&&o.onMouseDown.apply(o,arguments)}),onWheel:t[3]||(t[3]=function(){return o.onWheel&&o.onWheel.apply(o,arguments)})},[K(e.$slots,"default")],544)};var Ce={components:{TransformableImage:ct},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"]};Ce.render=function(e,t,n,i,s,o){var r=O("transformable-image");return v(),_(r,{"touch-move":n.touchMove,"touch-resize":n.touchResize,"mouse-move":n.mouseMove,"wheel-resize":n.wheelResize,onMove:t[1]||(t[1]=function(l){return e.$emit("move",l)}),onResize:t[2]||(t[2]=function(l){return e.$emit("resize",l)})},{default:X(function(){return[K(e.$slots,"default")]}),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])};var me=I("vue-preview"),dt={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:me({fill:this.fill}),wrapper:me("wrapper"),imageWrapper:me("image-wrapper"),image:E(me("image"),this.imageClass)}},style:function(){if(this.fill)return{};var e={};return this.width&&(e.width="".concat(this.size.width,"px")),this.height&&(e.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},wrapperStyle:function(){var e={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},imageStyle:function(){if(this.coordinates&&this.image){var e=this.coordinates.width/this.size.width,t=R(R({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/e,scaleY:1/e}),n=this.imageSize.width,i=this.imageSize.height,s=st({width:n,height:i},t.rotate),o={width:"".concat(n,"px"),height:"".concat(i,"px"),left:"0px",top:"0px"},r={rotate:{left:(n-s.width)*t.scaleX/2,top:(i-s.height)*t.scaleY/2},scale:{left:(1-t.scaleX)*n/2,top:(1-t.scaleY)*i/2}};return o.transform=`translate(
				`.concat(-this.coordinates.left/e-r.rotate.left-r.scale.left,"px,").concat(-this.coordinates.top/e-r.rotate.top-r.scale.top,"px) ")+ht(t),this.transitions&&this.transitions.enabled&&(o.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),o}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(e){(e.width||e.height)&&this.onChangeImage()}},mounted:function(){var e=this;this.onChangeImage(),this.$refs.image.addEventListener("load",function(){e.refreshImage()}),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var e=this.$refs.image;this.calculatedImageSize.height=e.naturalHeight,this.calculatedImageSize.width=e.naturalWidth},refresh:function(){var e=this.$refs.root;this.width||(this.calculatedSize.width=e.clientWidth),this.height||(this.calculatedSize.height=e.clientHeight)},onChangeImage:function(){var e=this.$refs.image;e&&e.complete&&this.refreshImage(),this.refresh()}}};dt.render=function(e,t,n,i,s,o){return v(),_("div",{ref:"root",class:o.classes.root,style:o.style},[D("div",{ref:"wrapper",class:o.classes.wrapper,style:o.wrapperStyle},[F(D("img",{ref:"image",src:n.image&&n.image.src,class:o.classes.image,style:o.imageStyle},null,14,["src"]),[[le,n.image&&n.image.src]])],6)],6)};var ut={components:{Preview:dt},inheritAttrs:!1};ut.render=function(e,t,n,i,s,o){var r=O("preview");return v(),_(r,Qe(e.$attrs,{fill:!0}),null,16)};var ze=I("vue-rectangle-stencil"),mt={name:"RectangleStencil",components:{StencilPreview:ut,BoundingBox:rt,DraggableArea:lt},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return We}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return $e}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:E(ze({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:E(ze("preview"),this.previewClass),boundingBox:E(ze("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,t=e.height,n=e.width,i=e.left,s=e.top,o={width:"".concat(n,"px"),height:"".concat(t,"px"),transform:"translate(".concat(i,"px, ").concat(s,"px)")};return this.transitions&&this.transitions.enabled&&(o.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),o}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"]};mt.render=function(e,t,n,i,s,o){var r=O("stencil-preview"),l=O("draggable-area"),a=O("bounding-box");return v(),_("div",{class:o.classes.stencil,style:o.style},[D(a,{width:n.stencilCoordinates.width,height:n.stencilCoordinates.height,transitions:n.transitions,class:o.classes.boundingBox,handlers:n.handlers,"handlers-component":n.handlersComponent,"handlers-classes":n.handlersClasses,"handlers-wrappers-classes":n.handlersWrappersClasses,lines:n.lines,"lines-component":n.linesComponent,"lines-classes":n.linesClasses,"lines-wrappers-classes":n.linesWrappersClasses,resizable:n.resizable,onResize:o.onResize,onResizeEnd:o.onResizeEnd},{default:X(function(){return[D(l,{movable:n.movable,onMove:o.onMove,onMoveEnd:o.onMoveEnd},{default:X(function(){return[D(r,{image:n.image,coordinates:n.coordinates,width:n.stencilCoordinates.width,height:n.stencilCoordinates.height,class:o.classes.preview,transitions:n.transitions},null,8,["image","coordinates","width","height","class","transitions"])]}),_:1},8,["movable","onMove","onMoveEnd"])]}),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var Qn=["transitions"],U=I("vue-advanced-cropper"),pt={name:"Cropper",components:{BackgroundWrapper:Ce},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return mt}},backgroundWrapperComponent:{type:[Object,String],default:function(){return Ce}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(e){return Dn.indexOf(e)!==-1}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(e){return!(typeof e=="string"&&e!=="fill"&&e!=="fit")}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(e){var t=e.event,n=e.coordinates,i=e.aspectRatio,s=e.positionRestrictions,o=e.sizeRestrictions,r=g(g({},n),{right:n.left+n.width,bottom:n.top+n.height}),l=t.params||{},a=g({},t.directions),h=l.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};o.widthFrozen&&(a.left=0,a.right=0),o.heightFrozen&&(a.top=0,a.bottom=0),V.forEach(function(ne){h[ne]||(a[ne]=0)});var c=H(r,a=Ze({coordinates:r,directions:a,sizeRestrictions:o,positionRestrictions:s})).width,u=H(r,a).height,m=l.preserveRatio?A(r):ye(c/u,i);if(m){var p=l.respectDirection;if(p||(p=r.width>=r.height||m===1?"width":"height"),p==="width"){var x=c/m-r.height;if(h.top&&h.bottom){var f=a.top,b=a.bottom;a.bottom=ue(x,b,f),a.top=ue(x,f,b)}else h.bottom?a.bottom=x:h.top?a.top=x:h.right?a.right=0:h.left&&(a.left=0)}else if(p==="height"){var M=r.width-u*m;if(h.left&&h.right){var w=a.left,S=a.right;a.left=-ue(M,w,S),a.right=-ue(M,S,w)}else h.left?a.left=-M:h.right?a.right=-M:h.top?a.top=0:h.bottom&&(a.bottom=0)}a=Ze({directions:a,coordinates:r,sizeRestrictions:o,positionRestrictions:s,preserveRatio:!0,compensate:l.compensate})}return c=H(r,a).width,u=H(r,a).height,(m=l.preserveRatio?A(r):ye(c/u,i))&&Math.abs(m-c/u)>.001&&V.forEach(function(ne){h[ne]||(a[ne]=0)}),De({event:new Oe({left:-a.left,top:-a.top}),coordinates:{width:n.width+a.right+a.left,height:n.height+a.top+a.bottom,left:n.left,top:n.top},positionRestrictions:s})}},moveAlgorithm:{type:Function,default:De},initStretcher:{type:Function,default:function(e){var t=e.stretcher,n=e.imageSize,i=A(n);t.style.width=n.width+"px",t.style.height=t.clientWidth/i+"px",t.style.width=t.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(e){var t=e.visibleArea,n=e.coordinates,i=e.aspectRatio,s=e.sizeRestrictions,o=e.positionRestrictions,r=g(g({},n),N({width:n.width,height:n.height,aspectRatio:i,sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minHeight:Math.min(t.height,s.minHeight),minWidth:Math.min(t.width,s.minWidth)}}));return r=P(r=j(r,ee(T(n),T(r))),be(Y(t),o))}},fitVisibleArea:{type:Function,default:function(e){var t=e.visibleArea,n=e.boundaries,i=e.getAreaRestrictions,s=e.coordinates,o=g({},t);o.height=o.width/A(n),o.top+=(t.height-o.height)/2,(s.height-o.height>0||s.width-o.width>0)&&(o=$(o,Math.max(s.height/o.height,s.width/o.width)));var r=ge(ie(s,Y(o=$(o,ve(o,i({visibleArea:o,type:"resize"}))))));return o.width<s.width&&(r.left=0),o.height<s.height&&(r.top=0),o=P(o=j(o,r),i({visibleArea:o,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.visibleArea,n=e.boundaries,i=e.imageSize,s=e.imageRestriction,o=e.type,r={};return s==="fill-area"?r={left:0,top:0,right:i.width,bottom:i.height}:s==="fit-area"&&(A(n)>A(i)?(r={top:0,bottom:i.height},t&&o==="move"&&(t.width>i.width?(r.left=-(t.width-i.width)/2,r.right=i.width-r.left):(r.left=0,r.right=i.width))):(r={left:0,right:i.width},t&&o==="move"&&(t.height>i.height?(r.top=-(t.height-i.height)/2,r.bottom=i.height-r.top):(r.top=0,r.bottom=i.height)))),r}},sizeRestrictionsAlgorithm:{type:Function,default:function(e){return{minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.imageSize,n={};return e.imageRestriction!=="none"&&(n={left:0,top:0,right:t.width,bottom:t.height}),n}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:R({},Ye)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var e=function(t){return t*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(e))+Math.abs(this.imageAttributes.height*Math.sin(e)),height:Math.abs(this.imageAttributes.width*Math.sin(e))+Math.abs(this.imageAttributes.height*Math.cos(e))}},initialized:function(){return!!(this.visibleArea&&this.imageLoaded)},settings:function(){var e=Se(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:Se(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:e}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var e=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:C(this.minWidth)?0:ce(this.minWidth),minHeight:C(this.minHeight)?0:ce(this.minHeight),maxWidth:C(this.maxWidth)?1/0:ce(this.maxWidth),maxHeight:C(this.maxHeight)?1/0:ce(this.maxHeight)});if(e=function(i){var s=i.areaRestrictions,o=i.sizeRestrictions;i.imageSize;var r=i.boundaries,l=i.positionRestrictions;i.imageRestriction;var a=g(g({},o),{minWidth:o.minWidth!==void 0?o.minWidth:0,minHeight:o.minHeight!==void 0?o.minHeight:0,maxWidth:o.maxWidth!==void 0?o.maxWidth:1/0,maxHeight:o.maxHeight!==void 0?o.maxHeight:1/0});l.left!==void 0&&l.right!==void 0&&(a.maxWidth=Math.min(a.maxWidth,l.right-l.left)),l.bottom!==void 0&&l.top!==void 0&&(a.maxHeight=Math.min(a.maxHeight,l.bottom-l.top));var h=Ee(s),c=ot(r,h);return h.width<1/0&&(!a.maxWidth||a.maxWidth>c.width)&&(a.maxWidth=Math.min(a.maxWidth,c.width)),h.height<1/0&&(!a.maxHeight||a.maxHeight>c.height)&&(a.maxHeight=Math.min(a.maxHeight,c.height)),a.minWidth>a.maxWidth&&(a.minWidth=a.maxWidth,a.widthFrozen=!0),a.minHeight>a.maxHeight&&(a.minHeight=a.maxHeight,a.heightFrozen=!0),a}({sizeRestrictions:e,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var t=this.getStencilSize(),n=Ee(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));e.maxWidth=Math.min(e.maxWidth,n.width*t.width/this.boundaries.width),e.maxHeight=Math.min(e.maxHeight,n.height*t.height/this.boundaries.height),e.maxWidth<e.minWidth&&(e.minWidth=e.maxWidth),e.maxHeight<e.minHeight&&(e.minHeight=e.maxHeight)}return e}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:U(),image:E(U("image"),this.imageClass),stencil:U("stencil"),boundaries:E(U("boundaries"),this.boundariesClass),stretcher:E(U("stretcher")),background:E(U("background"),this.backgroundClass),foreground:E(U("foreground"),this.foregroundClass),imageWrapper:E(U("image-wrapper")),cropperWrapper:E(U("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var e=this.coordinates,t=e.width,n=e.height,i=e.left,s=e.top;return{width:t/this.coefficient,height:n/this.coefficient,left:(i-this.visibleArea.left)/this.coefficient,top:(s-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var e={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(e.opacity="0"),e},imageStyle:function(){var e=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},t={left:(e.width-this.imageSize.width)/(2*this.coefficient),top:(e.height-this.imageSize.height)/(2*this.coefficient)},n={left:(1-1/this.coefficient)*e.width/2,top:(1-1/this.coefficient)*e.height/2},i=R(R({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/e.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/e.height)}),s={width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-t.left-n.left-this.imageTransforms.translateX,"px, ").concat(-t.top-n.top-this.imageTransforms.translateY,"px)")+ht(i)};return this.transitionsOptions.enabled&&(s.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),s}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var e=this;this.$nextTick(function(){e.resetCoordinates(),e.runAutoZoom("setCoordinates"),e.onChange()})},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(e,t){["aspectRatio","minAspectRatio","maxAspectRatio"].find(function(n){return e[n]!==t[n]})&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=_e(this.update,this.debounce),this.debouncedDisableTransitions=_e(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var e=this.initialized?this.prepareResult(R({},this.coordinates)):this.defaultCoordinates(),t={rotate:this.imageTransforms.rotate%360,flip:R({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var n=this;return{image:this.image,coordinates:e,visibleArea:this.visibleArea?R({},this.visibleArea):null,imageTransforms:t,get canvas(){return n.canvas?n.getCanvas():void 0}}}return{image:this.image,coordinates:e,visibleArea:this.visibleArea?R({},this.visibleArea):null,canvas:void 0,imageTransforms:t}},zoom:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.transitions,s=i===void 0||i;this.onManipulateImage(new oe({},{factor:1/e,center:t}),{normalize:!1,transitions:s})},move:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.transitions,s=i===void 0||i;this.onManipulateImage(new oe({left:e||0,top:t||0}),{normalize:!1,transitions:s})},setCoordinates:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.autoZoom,s=i===void 0||i,o=n.transitions,r=o===void 0||o;this.$nextTick(function(){t.imageLoaded?(t.transitionsActive||(r&&t.enableTransitions(),t.coordinates=t.applyTransform(e),s&&t.runAutoZoom("setCoordinates"),r&&t.debouncedDisableTransitions()),t.onChange()):t.delayedTransforms=e})},refresh:function(){var e=this,t=this.$refs.image;if(this.src&&t)return this.initialized?this.updateVisibleArea().then(function(){e.onChange()}):this.resetVisibleArea().then(function(){e.onChange()})},reset:function(){var e=this;return this.resetVisibleArea().then(function(){e.onChange(!1)})},awaitRender:function(e){var t=this;this.awaiting||(this.awaiting=!0,this.$nextTick(function(){e(),t.awaiting=!1}))},prepareResult:function(e){return this.roundResult?function(t){var n=t.coordinates,i=t.sizeRestrictions,s=t.positionRestrictions,o={width:Math.round(n.width),height:Math.round(n.height),left:Math.round(n.left),top:Math.round(n.top)};return o.width>i.maxWidth?o.width=Math.floor(n.width):o.width<i.minWidth&&(o.width=Math.ceil(n.width)),o.height>i.maxHeight?o.height=Math.floor(n.height):o.height<i.minHeight&&(o.height=Math.ceil(n.height)),P(o,s)}(R(R({},this.getPublicProperties()),{},{positionRestrictions:de(this.positionRestrictions,this.visibleArea),coordinates:e})):e},processAutoZoom:function(e,t,n,i){var s=this.autoZoomAlgorithm;s||(s=this.stencilSize?Tn:this.autoZoom?Pn:jn);var o=s({event:{type:e,params:i},visibleArea:t,coordinates:n,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return R(R({},o),{},{changed:!Ue(o.visibleArea,t)||!Ue(o.coordinates,n)})},runAutoZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.transitions,i=n!==void 0&&n,s=yn(t,Qn),o=this.processAutoZoom(e,this.visibleArea,this.coordinates,s),r=o.visibleArea,l=o.coordinates,a=o.changed;i&&a&&this.enableTransitions(),this.visibleArea=r,this.coordinates=l,i&&a&&this.debouncedDisableTransitions()},normalizeEvent:function(e){return function(t){var n=t.event,i=t.visibleArea,s=t.coefficient;if(n.type==="manipulateImage")return g(g({},n),{move:{left:n.move&&n.move.left?s*n.move.left:0,top:n.move&&n.move.top?s*n.move.top:0},scale:{factor:n.scale&&n.scale.factor?n.scale.factor:1,center:n.scale&&n.scale.center?{left:n.scale.center.left*s+i.left,top:n.scale.center.top*s+i.top}:null}});if(n.type==="resize"){var o=g(g({},n),{directions:g({},n.directions)});return V.forEach(function(l){o.directions[l]*=s}),o}if(n.type==="move"){var r=g(g({},n),{directions:g({},n.directions)});return En.forEach(function(l){r.directions[l]*=s}),r}return n}(R(R({},this.getPublicProperties()),{},{event:e}))},getCanvas:function(){if(this.$refs.canvas){var e=this.$refs.canvas,t=this.$refs.image,n=this.imageTransforms.rotate!==0||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(l,a,h){var c=h.rotate,u=h.flip,m={width:a.naturalWidth,height:a.naturalHeight},p=st(m,c),x=l.getContext("2d");l.height=p.height,l.width=p.width,x.save();var f=Z(T(g({left:0,top:0},m)),c);return x.translate(-(f.left-p.width/2),-(f.top-p.height/2)),x.rotate(c*Math.PI/180),x.translate(u.horizontal?m.width:0,u.vertical?m.height:0),x.scale(u.horizontal?-1:1,u.vertical?-1:1),x.drawImage(a,0,0,m.width,m.height),x.restore(),l}(this.$refs.sourceCanvas,t,this.imageTransforms):t,i=R({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),s=function(l){return l.find(function(a){return h=a,!Number.isNaN(parseFloat(h))&&isFinite(h);var h})},o=N({sizeRestrictions:{minWidth:s([i.width,i.minWidth])||0,minHeight:s([i.height,i.minHeight])||0,maxWidth:s([i.width,i.maxWidth])||1/0,maxHeight:s([i.height,i.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(i.maxArea&&o.width*o.height>i.maxArea){var r=Math.sqrt(i.maxArea/(o.width*o.height));o={width:Math.round(r*o.width),height:Math.round(r*o.height)}}return function(l,a,h,c,u){l.width=c?c.width:h.width,l.height=c?c.height:h.height;var m=l.getContext("2d");m.clearRect(0,0,l.width,l.height),u&&(u.imageSmoothingEnabled&&(m.imageSmoothingEnabled=u.imageSmoothingEnabled),u.imageSmoothingQuality&&(m.imageSmoothingQuality=u.imageSmoothingQuality),u.fillColor&&(m.fillStyle=u.fillColor,m.fillRect(0,0,l.width,l.height),m.save()));var p=h.left<0?-h.left:0,x=h.top<0?-h.top:0;m.drawImage(a,h.left+p,h.top+x,h.width,h.height,p,x,l.width,l.height)}(e,n,this.coordinates,o,i),e}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=this.visibleArea&&t?Cn(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,i=this.visibleArea&&t?de(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return kn({transform:e,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:n,positionRestrictions:i,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var e=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var t=this.defaultSize;t||(t=this.stencilSize?Wn:Ln);var n=this.sizeRestrictions;n.minWidth,n.minHeight,n.maxWidth,n.maxHeight;var i=J(t)?t({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):t,s=this.defaultPosition||On,o=[i,function(r){var l=r.coordinates;return R({},J(s)?s({coordinates:l,imageSize:e.imageSize,visibleArea:e.visibleArea}):e.defaultPosition)}];this.delayedTransforms&&o.push.apply(o,Q(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(o,!0),this.delayedTransforms=null}},clearImage:function(){var e=this;this.imageLoaded=!1,setTimeout(function(){var t=e.$refs.stretcher;t&&(t.style.height="auto",t.style.width="auto"),e.coordinates=e.defaultCoordinates(),e.boundaries={width:0,height:0}},this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var e=this,t=this.$refs.stretcher,n=this.$refs.cropper;return this.initStretcher({cropper:n,stretcher:t,imageSize:this.imageSize}),this.$nextTick().then(function(){var i={cropper:n,imageSize:e.imageSize};if(J(e.defaultBoundaries)?e.boundaries=e.defaultBoundaries(i):e.defaultBoundaries==="fit"?e.boundaries=function(s){var o=s.cropper,r=s.imageSize,l=o.clientHeight,a=o.clientWidth,h=l,c=r.width*l/r.height;return c>a&&(c=a,h=r.height*a/r.width),{width:c,height:h}}(i):e.boundaries=function(s){var o=s.cropper;return{width:o.clientWidth,height:o.clientHeight}}(i),!e.boundaries.width||!e.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")})},resetVisibleArea:function(){var e=this;return this.appliedImageTransforms=R(R({},this.defaultImageTransforms),{},{flip:R({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then(function(){e.priority!=="visible-area"&&(e.visibleArea=null,e.resetCoordinates());var t,n,i,s,o,r,l=e.defaultVisibleArea||$n;e.visibleArea=J(l)?l({imageSize:e.imageSize,boundaries:e.boundaries,coordinates:e.priority!=="visible-area"?e.coordinates:null,getAreaRestrictions:e.getAreaRestrictions,stencilSize:e.getStencilSize()}):e.defaultVisibleArea,e.visibleArea=(t={visibleArea:e.visibleArea,boundaries:e.boundaries,getAreaRestrictions:e.getAreaRestrictions},n=t.visibleArea,i=t.boundaries,s=t.getAreaRestrictions,o=g({},n),r=A(i),o.width/o.height!==r&&(o.height=o.width/r),P(o,s({visibleArea:o,type:"move"}))),e.priority==="visible-area"?e.resetCoordinates():e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("resetVisibleArea")}).catch(function(){e.visibleArea=null})},updateVisibleArea:function(){var e=this;return this.updateBoundaries().then(function(){e.visibleArea=e.fitVisibleArea({imageSize:e.imageSize,boundaries:e.boundaries,visibleArea:e.visibleArea,coordinates:e.coordinates,getAreaRestrictions:e.getAreaRestrictions}),e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("updateVisibleArea")}).catch(function(){e.visibleArea=null})},onChange:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];e&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var e,t=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(s){if(Ve(s))return!1;var o=window.location,r=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(s)||[],l={protocol:r[1]||"",host:r[2]||"",port:r[3]||""},a=function(h){return h.port||((h.protocol||o.protocol)==="http"?80:433)};return!(!l.protocol&&!l.host&&!l.port||l.protocol&&l.protocol==o.protocol&&l.host&&l.host==o.host&&l.host&&a(l)==a(o))}(this.src)){var n=C(this.crossOrigin)?this.canvas:this.crossOrigin;n===!0&&(n="anonymous"),this.imageAttributes.crossOrigin=n||null}if(this.checkOrientation){var i=(e=this.src,new Promise(function(s){Zn(e).then(function(o){var r=Gn(o);s(o?{source:e,arrayBuffer:o,orientation:r}:{source:e,arrayBuffer:null,orientation:null})}).catch(function(o){console.warn(o),s({source:e,arrayBuffer:null,orientation:null})})}));setTimeout(function(){i.then(t.onParseImage)},this.transitionTime)}else setTimeout(function(){t.onParseImage({source:t.src})},this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var e=this,t=this.$refs.image;t&&!this.imageLoaded&&(this.imageAttributes.height=t.naturalHeight,this.imageAttributes.width=t.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then(function(){e.$emit("ready"),e.onChange(!1)}))},onParseImage:function(e){var t=this,n=e.source,i=e.arrayBuffer,s=e.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,i&&s&&s>1?Je(n)||!Ve(n)?(this.imageAttributes.src=URL.createObjectURL(new Blob([i])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(o){for(var r=[],l=new Uint8Array(o);l.length>0;){var a=l.subarray(0,8192);r.push(String.fromCharCode.apply(null,Array.from?Array.from(a):a.slice())),l=l.subarray(8192)}return"data:image/jpeg;base64,"+btoa(r.join(""))}(i):this.imageAttributes.src=n,J(this.defaultTransforms)?this.appliedImageTransforms=Ae(this.defaultTransforms()):pe(this.defaultTransforms)?this.appliedImageTransforms=Ae(this.defaultTransforms):this.appliedImageTransforms=function(o){var r=Ae({});if(o)switch(o){case 2:r.flip.horizontal=!0;break;case 3:r.rotate=-180;break;case 4:r.flip.vertical=!0;break;case 5:r.rotate=90,r.flip.vertical=!0;break;case 6:r.rotate=90;break;case 7:r.rotate=90,r.flip.horizontal=!0;break;case 8:r.rotate=-90}return r}(s),this.defaultImageTransforms=R(R({},this.appliedImageTransforms),{},{flip:R({},this.appliedImageTransforms.flip)}),this.$nextTick(function(){var o=t.$refs.image;o&&o.complete&&(function(r){return!!r.naturalWidth}(o)?t.onSuccessLoadImage():t.onFailLoadImage())})},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(e){var t=this;this.transitionsOptions.enabled||this.awaitRender(function(){t.coordinates=t.moveAlgorithm(R(R({},t.getPublicProperties()),{},{positionRestrictions:de(t.positionRestrictions,t.visibleArea),coordinates:t.coordinates,event:t.normalizeEvent(e)})),t.onChange()})},onResize:function(e){var t=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender(function(){var n=t.sizeRestrictions,i=Math.min(t.coordinates.width,t.coordinates.height,20*t.coefficient);t.coordinates=t.resizeAlgorithm(R(R({},t.getPublicProperties()),{},{positionRestrictions:de(t.positionRestrictions,t.visibleArea),sizeRestrictions:{maxWidth:Math.min(n.maxWidth,t.visibleArea.width),maxHeight:Math.min(n.maxHeight,t.visibleArea.height),minWidth:Math.max(n.minWidth,i),minHeight:Math.max(n.minHeight,i)},event:t.normalizeEvent(e)})),t.onChange(),t.ticking=!1})},onManipulateImage:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.transitionsOptions.enabled){var n=t.transitions,i=n!==void 0&&n,s=t.normalize,o=s===void 0||s;i&&this.enableTransitions();var r=qn(R(R({},this.getPublicProperties()),{},{event:o?this.normalizeEvent(e):e,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),l=r.visibleArea,a=r.coordinates;this.visibleArea=l,this.coordinates=a,this.runAutoZoom("manipulateImage"),this.onChange(),i&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.visibleArea,n=e.type,i=n===void 0?"move":n;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:t,type:i})},getAspectRatio:function(e){var t,n,i=this.stencilProps,s=i.aspectRatio,o=i.minAspectRatio,r=i.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var l=this.$refs.stencil.aspectRatios();t=l.minimum,n=l.maximum}if(C(t)&&(t=C(s)?o:s),C(n)&&(n=C(s)?r:s),!e&&(C(t)||C(n))){var a=this.getStencilSize(),h=a?A(a):null;C(t)&&(t=Fe(h)?h:void 0),C(n)&&(n=Fe(h)?h:void 0)}return{minimum:t,maximum:n}},getStencilSize:function(){if(this.stencilSize)return e={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},t=e.boundaries,n=e.stencilSize,i=e.aspectRatio,ye(A(s=J(n)?n({boundaries:t,aspectRatio:i}):n),i)&&(s=N({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:s.width,height:s.height,aspectRatio:{minimum:i.minimum,maximum:i.maximum}})),(s.width>t.width||s.height>t.height)&&(s=N({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:s.width,height:s.height,aspectRatio:{minimum:A(s),maximum:A(s)}})),s;var e,t,n,i,s},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return R({},Ye)},flip:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.transitions,s=i===void 0||i;if(!this.transitionsActive){s&&this.enableTransitions();var o=R({},this.imageTransforms.flip),r=Hn({flip:{horizontal:e?!o.horizontal:o.horizontal,vertical:t?!o.vertical:o.vertical},previousFlip:o,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),l=r.visibleArea,a=r.coordinates;e&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),t&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=l,this.coordinates=a,this.onChange(),s&&this.debouncedDisableTransitions()}},rotate:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.transitions,i=n===void 0||n;if(!this.transitionsActive){i&&this.enableTransitions();var s=R({},this.imageSize);this.appliedImageTransforms.rotate+=e;var o=In({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:s,imageSize:this.imageSize,angle:e,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),r=o.visibleArea,l=o.coordinates,a=this.processAutoZoom("rotateImage",r,l);r=a.visibleArea,l=a.coordinates,this.visibleArea=r,this.coordinates=l,this.onChange(),i&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},Kn={key:0,ref:"canvas",style:{display:"none"}},Jn={key:1,ref:"sourceCanvas",style:{display:"none"}};pt.render=function(e,t,n,i,s,o){return v(),_("div",{ref:"cropper",class:o.classes.cropper},[D("div",{ref:"stretcher",class:o.classes.stretcher},null,2),D("div",{class:o.classes.boundaries,style:o.boundariesStyle},[(v(),_(fe(n.backgroundWrapperComponent),{class:o.classes.cropperWrapper,"wheel-resize":o.settings.resizeImage.wheel,"touch-resize":o.settings.resizeImage.touch,"touch-move":o.settings.moveImage.touch,"mouse-move":o.settings.moveImage.mouse,onMove:o.onManipulateImage,onResize:o.onManipulateImage},{default:X(function(){return[D("div",{class:o.classes.background,style:o.boundariesStyle},null,6),D("div",{class:o.classes.imageWrapper},[D("img",{ref:"image",crossorigin:s.imageAttributes.crossOrigin,src:s.imageAttributes.src,class:o.classes.image,style:o.imageStyle,onMousedown:t[1]||(t[1]=ft(function(){},["prevent"]))},null,46,["crossorigin","src"])],2),D("div",{class:o.classes.foreground,style:o.boundariesStyle},null,6),F((v(),_(fe(n.stencilComponent),Qe({ref:"stencil",image:o.image,coordinates:s.coordinates,"stencil-coordinates":o.stencilCoordinates,transitions:o.transitionsOptions},n.stencilProps,{onResize:o.onResize,onResizeEnd:o.onResizeEnd,onMove:o.onMove,onMoveEnd:o.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[le,s.imageLoaded]]),n.canvas?(v(),_("canvas",Kn,null,512)):k("",!0),n.canvas?(v(),_("canvas",Jn,null,512)):k("",!0)]}),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};const eo={props:{zoom:{type:Number,default:0}},data(){return{focus:!1}},mounted(){window.addEventListener("mouseup",this.onStop,{passive:!1}),window.addEventListener("mousemove",this.onDrag,{passive:!1}),window.addEventListener("touchmove",this.onDrag,{passive:!1}),window.addEventListener("touchend",this.onStop,{passive:!1})},destroyed(){window.removeEventListener("mouseup",this.onStop),window.removeEventListener("mousemove",this.onDrag),window.removeEventListener("touchmove",this.onDrag),window.removeEventListener("touchend",this.onStop)},methods:{onDrag(e){if(this.focus){const t=e.touches?e.touches[0].clientX:e.clientX,n=this.$refs.line;if(n){const{left:i,width:s}=n.getBoundingClientRect();this.$emit("change",Math.min(1,Math.max(0,t-i)/s))}e.preventDefault&&e.preventDefault()}},onStop(){this.focus=!1},onStart(e){this.focus=!0,this.onDrag(e)}}},to={class:"twitter-navigation"},io={class:"twitter-navigation__wrapper"},no={class:"twitter-navigation__line"};function oo(e,t,n,i,s,o){return v(),z("div",to,[d("div",io,[d("div",{class:"twitter-navigation__line-wrapper",ref:"line",onMousedown:t[0]||(t[0]=(...r)=>o.onStart&&o.onStart(...r)),onTouchstart:t[1]||(t[1]=(...r)=>o.onStart&&o.onStart(...r))},[d("div",no,[d("div",{class:"twitter-navigation__fill",style:Ie({flexGrow:n.zoom})},null,4),d("div",{class:B(["twitter-navigation__circle",{"twitter-navigation__circle--focus":s.focus}]),style:Ie({left:`${n.zoom*100}%`})},[d("div",{class:B(["twitter-navigation__inner-circle",{"twitter-navigation__inner-circle--focus":s.focus}])},null,2)],6)])],544)])])}const so=G(eo,[["render",oo]]),ao=Te("modalImageCustom",{state:()=>({isActive:!1,img:null,typeImg:null}),actions:{openModal({active:e,img:t,type:n}){console.log("active",e),this.isActive=e,this.img=t,this.typeImg=n},closeModal(e){this.isActive=e}}});const ro={props:{form:{type:Object},img:{type:Object}},setup(e){const t=y(!1),n=ao(),i=y(e.form),s=y(0),o=y(null),r=y(n.img),l=({imageSize:f})=>({width:Math.min(f.height,f.width),height:Math.min(f.height,f.width)}),a=({boundaries:f})=>({width:Math.min(f.height,f.width)-48,height:Math.min(f.height,f.width)-48}),h=async f=>{var b=f.target;let M=b.files[0].type.split("/");if(M[1]=="jpg"||M[1]=="jpeg"||M[1]=="png"||M[1]=="webp"){if(b.files&&b.files[0])try{const w=await p(b.files[0]);return w&&(r.value=w,t.value=!1),w}catch(w){t.value=!1,console.error(w);return}}else vt("File not supported,allowed files (jpg,jpeg,png,webp)",{type:"error"})},c=f=>{const b=o.value;if(b){const{coordinates:M,imageSize:w}=b;w.width/w.height>M.width/M.height?s.value=(b.imageSize.height-b.coordinates.height)/(b.imageSize.height-b.sizeRestrictions.minHeight):s.value=(b.imageSize.width-b.coordinates.width)/(b.imageSize.width-b.sizeRestrictions.minWidth)}},u=f=>{const b=o.value;if(b)if(b.imageSize.height<b.imageSize.width){const M=b.sizeRestrictions.minHeight,w=b.imageSize.height;b.zoom((w-s.value*(w-M))/(w-f*(w-M)))}else{const M=b.sizeRestrictions.minWidth,w=b.imageSize.width;b.zoom((w-s.value*(w-M))/(w-f*(w-M)))}},m=()=>{const{canvas:f}=o.value.getResult();f&&f.toBlob(async b=>{let M=n.img.name;var w=new File([b],M,{lastModified:new Date().getTime(),type:b.type});let S=f.toDataURL("image/jpeg");switch(n.typeImg){case"document":i.value.previewDocument=S,i.value.document=w;break;case"driver":i.value.previewDriver=S,i.value.driverDocument=w;break;case"frontPhoto":i.value.previewFrontPhoto=S,i.value.frontPhoto=w;break;case"front":i.value.previewFront=S,i.value.front=w;break;case"driverSide":i.value.previewDriverSide=S,i.value.driverSide=w;break;case"back":i.value.previewBack=S,i.value.back=w;break;case"passengerSide":i.value.previewPassengerSide=S,i.value.passengerSide=w;break;case"tireAndRim":i.value.previewTireAndRim=S,i.value.tireAndRim=w;break;case"driversDisplay":i.value.previewDriversDisplay=S,i.value.driversDisplay=w;break;case"driversSide":i.value.previewDriversSide=S,i.value.driversSide=w;break;case"centerConsole":i.value.previewCenterConsole=S,i.value.centerConsole=w;break;case"rearSeats":i.value.previewRearSeats=S,i.value.rearSeats=w;break;case"vehicleDamage":i.value.previewVehicleDamage=S,i.value.vehicleDamage=w;break;case"additionalDocuments":i.value.previewAdditionalDocuments=S,i.value.additionalDocuments=w;break;case"vehicleVideo":i.value.previewVehicleVideo=S,i.value.vehicleVideo=w;break}n.closeModal(!1)},"image/png")},p=f=>new Promise((b,M)=>{const w=new FileReader;w.readAsDataURL(f),w.onload=()=>b(w.result),w.onerror=M});async function x(f){t.value=!0;try{const b=await p(f);return b&&(r.value=b,t.value=!1),b}catch(b){t.value=!1,console.error(b);return}}return gt(()=>{n.img&&x(n.img)}),{onZoom:u,onChange:c,uploadImage:h,stencilSize:a,defaultSize:l,loading:t,statusModalImage:n,croppers:o,zoom:s,imgPreview:r,saveEditPhoto:m}},components:{Cropper:pt,Navigation:so}},lo={class:"fixed z-[100] inset-0 flex items-end md:items-center md:justify-center bg-base-black bg-opacity-50"},ho={class:"max-w-md w-full overflow-auto bg-white rounded-lg shadow-xl animation-fade-modal"},co={class:"md:p-4 p-2 rounded-t-lg bg-base-black flex items-center justify-between"},uo=d("p",{class:"md:text-xl text-white"},"Edit & Crop Image",-1),mo=d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),po=[mo],fo={class:"relative"},go={key:0,class:"md:min-h-[400px] h-full flex justify-center items-center"},vo=re('<div class="w-full h-full flex justify-center items-center"><div class="text-indigo-700"><div class="md:h-[80px] md:w-[80px]"><div class="animate-bounce"><svg xmlns="http://www.w3.org/2000/svg" class="animate-spin" fill="#c1f861" stroke="#fff" stroke-width="0" viewBox="0 0 16 16"><path d="M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 4c2.209 0 4 1.791 4 4s-1.791 4-4 4-4-1.791-4-4 1.791-4 4-4zM12.773 12.773c-1.275 1.275-2.97 1.977-4.773 1.977s-3.498-0.702-4.773-1.977-1.977-2.97-1.977-4.773c0-1.803 0.702-3.498 1.977-4.773l1.061 1.061c0 0 0 0 0 0-2.047 2.047-2.047 5.378 0 7.425 0.992 0.992 2.31 1.538 3.712 1.538s2.721-0.546 3.712-1.538c2.047-2.047 2.047-5.378 0-7.425l1.061-1.061c1.275 1.275 1.977 2.97 1.977 4.773s-0.702 3.498-1.977 4.773z"></path></svg></div><p class="text-base-gray font-medium pl-2">Loading...</p></div></div></div>',1),bo=[vo],wo={class:"flex justify-between gap-12 p-2 md:p-4"},xo={class:"w-full px-2"},yo=d("p",{class:"text-sm md:text-base"},"Zoom",-1),Ro={class:"flex w-full justify-end p-2 md:p-4 gap-3"},Ao={class:"label-upload btn bg-white border border-[#E0E0E0]"},zo=d("div",{class:"btn-up"},"Replace",-1);function Mo(e,t,n,i,s,o){const r=O("cropper"),l=O("Navigation");return F((v(),z("div",lo,[d("div",ho,[d("div",co,[uo,(v(),z("svg",{onClick:t[0]||(t[0]=a=>i.statusModalImage.closeModal(!1)),xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-8 md:w-8 md:h-8 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"#fff"},po))]),d("div",fo,[i.loading?(v(),z("div",go,bo)):(v(),z(q,{key:1},[D(r,{ref:"croppers",class:"twitter-cropper","background-class":"twitter-cropper__background","foreground-class":"twitter-cropper__foreground","image-restriction":"stencil","stencil-size":i.stencilSize,"stencil-props":{lines:{},handlers:{},movable:!1,scalable:!1,aspectRatio:1,previewClass:"twitter-cropper__stencil"},transitions:!1,debounce:!1,"default-size":i.defaultSize,"min-width":150,"min-height":150,src:i.imgPreview,onChange:i.onChange},null,8,["stencil-size","default-size","src","onChange"]),d("div",wo,[d("div",xo,[yo,D(l,{zoom:i.zoom,onChange:i.onZoom},null,8,["zoom","onChange"])])]),d("div",Ro,[d("label",Ao,[d("input",{type:"file",hidden:"",ref:"file",onChange:t[1]||(t[1]=a=>i.uploadImage(a)),accept:".jpg, .jpeg,.png,.webp"},null,544),zo]),d("button",{onClick:t[2]||(t[2]=(...a)=>i.saveEditPhoto&&i.saveEditPhoto(...a)),class:"btn bg-primary"},"Upload")])],64))])])],512)),[[le,i.statusModalImage.isActive]])}const Ho=G(ro,[["render",Mo]]),_o=Te("modalViewImage",{state:()=>({isActive:!1,img:null,typeImg:""}),actions:{openModal({active:e,img:t,type:n}){this.isActive=e,this.img=t,this.typeImg=n},closeModal(e){this.isActive=e}}});const So={props:{form:{type:Object},img:{type:Object}},setup(e){const t=y(!1),n=_o();y(e.form),y(0),y(null);const i=y(n.img);return{uploadImage:o=>{console.log("statusModalView",n.typeImg);var r=o.target;if(r.files&&r.files[0]){var l=new FileReader;t.value=!0,l.onload=a=>{i.value=a.target.result,t.value=!1},l.readAsDataURL(r.files[0])}},loading:t,img:i,statusModalView:n}},components:{}},Eo={class:"fixed z-[100] inset-0 flex items-center justify-center bg-base-black bg-opacity-50"},Do={class:"max-w-xl w-full h-[70vh] overflow-hidden bg-white rounded-lg shadow-xl"},Co={class:"h-[79%]"},ko={class:"p-4 rounded-t-lg bg-base-black flex items-center justify-between"},To=d("p",{class:"text-xl text-white"},"View Photo",-1),Po=d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),jo=[Po],Oo={class:"w-full h-full"},Lo=["src"];function Wo(e,t,n,i,s,o){return F((v(),z("div",Eo,[d("div",Do,[d("div",Co,[d("div",ko,[To,(v(),z("svg",{onClick:t[0]||(t[0]=r=>i.statusModalView.closeModal(!1)),xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"#fff"},jo))]),d("div",Oo,[d("img",{src:i.img,class:"w-full h-full object-contain",alt:""},null,8,Lo)])])])],512)),[[le,i.statusModalView.isActive]])}const Bo=G(So,[["render",Wo]]);export{Io as M,Ho as a,Bo as b,en as c,ao as d,_o as e,je as v};
