import{_ as J,r as z,w as Ce,e as $,o as g,c as y,h as k,i as X,f as c,n as B,K as O,k as V,a2 as ne,N as A,F as I,m as re,P as Pe,A as Qe,v as le,Q as E,a as K,J as Ie,a5 as fe,a6 as Ke,g as bt,a4 as He,b as et,O as wt,l as qe}from"./index-a9dcb4bf.js";import{h as Te}from"./moment-fbc5633a.js";const je=(e,t,s)=>{let i={};return t=="generalInformation"&&(e.numberVinGenerals||(i.numberVinGenerals="Required field"),e.date||(i.date="Required field"),e.province?e.province==="Select province"&&(i.province="Required field"):i.province="Required field",e.city?e.city=="Select city"&&(i.city="Required field"):i.city="Required field",e.keys?e.keys=="Select number of keys"&&(i.keys="Required field"):i.keys="Required field",e.currently?(e.currently=="Financed"||e.currently=="Leased")&&(e.financingCompany||(i.financingCompany="Required field")):i.currently="Required field",e.buyoutVehicle=="Yes"&&(e.yourVehicleAmount||(i.yourVehicleAmount="Required field")),e.newVehicle=="Yes"&&(e.anyVehicle||(i.anyVehicle="Required field"),e.makePreferences||(i.makePreferences="Required field"),e.modelPreferences||(i.modelPreferences="Required field"),e.modelFromPreferences||(i.modelFromPreferences="Required field"),e.modelToPreferences||(i.modelToPreferences="Required field"),e.yearFromPreferences||(i.yearFromPreferences="Required field"),e.yearToPreferences||(i.yearToPreferences="Required field"))),t=="vehiclesDetails"&&(e.numberVin||(i.numberVin="Required field"),e.year||(i.year="Required field"),e.make||(i.make="Required field"),e.model||(i.model="Required field"),e.trim||(i.trim="Required field"),e.bodyType||(i.bodyType="Required field"),e.cylinder||(i.cylinder="Required field"),e.transmission||(i.transmission="Required field"),e.odometer||(i.odometer="Required field"),e.doors||(i.doors="Required field"),e.color||(i.color="Required field"),e.color=="other"&&(e.customColor||(i.customColor="Required field")),e.driveTrain||(i.driveTrain="Required field"),e.tireCondition||(i.tireCondition="Required field"),e.lastReplacement||(i.lastReplacement="Required field"),e.brakePads||(i.brakePads="Required field"),e.lastReplacement2||(i.lastReplacement2="Required field")),t=="UploadPhotos"&&(console.log("form",e.images),e.images.length===0&&(i.images="You must upload the files to continue")),t=="confirmation"&&(e.numberVinGenerals||(i.numberVinGenerals="Required field"),e.date||(i.date="Required field"),e.province?e.province==="Select province"&&(i.province="Required field"):i.province="Required field",e.city?e.city=="Select city"&&(i.city="Required field"):i.city="Required field",e.keys?e.keys=="Select number of keys"&&(i.keys="Required field"):i.keys="Required field",e.currently?(e.currently=="Financed"||e.currently=="Leased")&&(e.financingCompany||(i.financingCompany="Required field")):i.currently="Required field",e.buyoutVehicle=="Yes"&&(e.yourVehicleAmount||(i.yourVehicleAmount="Required field")),e.newVehicle=="Yes"&&(e.anyVehicle||(i.anyVehicle="Required field"),e.modelFromPreferences||(i.modelFromPreferences="Required field"),e.modelToPreferences||(i.modelToPreferences="Required field"),e.yearFromPreferences||(i.yearFromPreferences="Required field"),e.yearToPreferences||(i.yearToPreferences="Required field")),e.numberVin||(i.numberVin="Required field"),e.year||(i.year="Required field"),e.make||(i.make="Required field"),e.model||(i.model="Required field"),e.trim||(i.trim="Required field"),e.bodyType||(i.bodyType="Required field"),e.cylinder||(i.cylinder="Required field"),e.transmission||(i.transmission="Required field"),e.odometer||(i.odometer="Required field"),e.doors||(i.doors="Required field"),e.color||(i.color="Required field"),e.color=="other"&&(e.customColor||(i.customColor="Required field")),e.driveTrain||(i.driveTrain="Required field"),e.tireCondition||(i.tireCondition="Required field"),e.lastReplacement||(i.lastReplacement="Required field"),e.brakePads||(i.brakePads="Required field"),e.lastReplacement2||(i.lastReplacement2="Required field"),e.images.length===0&&(i.images="You must upload the files to continue")),t=="Launch Auction"&&(s=="after verified"&&(e.auctionDuration||(i.auctionDuration="Required field")),s=="date and time"&&(e.auctionDate||(i.auctionDate="Required field"),e.auctionTime||(i.auctionTime="Required field"),e.auctionDuration||(i.auctionDuration="Required field")),s=="hours weekeng"&&e.dayMonday=="Select time"&&(i.dayMonday="Required field")),i},xt={props:{form:{type:Object},steps:{type:Object},save:{type:Function}},setup(e){const t=z(e.form),s=z(e.steps),i=z(null),n=z(),o=z(),r=a=>{s.value.step1=!0,s.value.step2=!1},l=a=>{switch(a){case 1:Object.entries(n.value).length===0&&(s.value.step1=!1,s.value.step2=!0);break;case 2:e.save();break}};return Ce(t.value,async(a,h)=>{a&&(n.value=je(t.value,"Launch Auction","date and time"),i.value=Object.entries(n.value).length,o.value=null,o.value=Te(t.value.auctionDate).format("LL"))}),{formData:t,next:l,steps:s,invalid:n,sizeObjet:i,back:r,newDate:o}}},yt={key:0,class:"w-full flex flex-col md:gap-2"},_t=c("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Auction Date",-1),Rt={class:"w-full flex flex-col mt-4 md:gap-2"},Mt={class:"flex justify-center gap-6 items-center"},zt={class:"w-full flex flex-col md:gap-2"},At=c("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Auction Time",-1),St=re('<option value="00">00.00 AM</option><option value="01">01.00 AM</option><option value="02">02.00 AM</option><option value="03">03.00 AM</option><option value="04">04.00 AM</option><option value="05">05.00 AM</option><option value="06">06.00 AM</option><option value="07">07.00 AM</option><option value="08">08.00 AM</option><option value="09">09.00 AM</option><option value="10">10.00 AM</option><option value="11">11.00 AM</option><option value="12">12.00 PM</option><option value="13">13.00 PM</option><option value="14">14.00 PM</option><option value="15">15.00 PM</option><option value="16">16.00 PM</option><option value="17">17.00 PM</option><option value="18">18.00 PM</option><option value="19">19.00 PM</option><option value="20">20.00 PM</option><option value="21">21.00 PM</option><option value="22">22.00 PM</option><option value="23">23.00 PM</option><option value="24">24.00 PM</option>',25),Et=[St],Dt=c("p",{class:"mt-7"}," - ",-1),kt={class:"w-full flex flex-col md:gap-2"},Ct=c("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Auction Duration",-1),Pt=c("option",{value:"45"},"45 Minutes",-1),Tt=c("option",{value:"50"},"50 Minutes",-1),jt=c("option",{value:"60"},"60 Minutes",-1),$t=c("option",{value:"65"},"65 Minutes",-1),Ot=[Pt,Tt,jt,$t],Lt={class:"m-4 p-4 rounded-lg border-[#E0E0E0] border-[1px]"},Wt=c("p",{class:"font-semibold text-xs md:text-base"},"Launch Information",-1),It=c("div",{class:"flex justify-between py-1 md:gap-2"},[c("p",{class:"text-xs md:text-base"},"Launch Option"),c("p",{class:"text-xs md:text-base"},"Choose the date & time")],-1),Ht={class:"flex justify-between py-1 md:gap-2"},qt=c("p",{class:"text-xs md:text-base"},"Auction Date",-1),Bt={class:"font-semibold text-xs md:text-base"},Ft={class:"flex justify-between py-1 md:gap-2"},Vt=c("p",{class:"text-xs md:text-base"},"Auction Time",-1),Nt={class:"font-semibold text-xs md:text-base"},Yt={class:"flex justify-between py-1 md:gap-2"},Ut=c("p",{class:"text-xs md:text-base"},"Auction Duration",-1),Xt={class:"font-semibold text-xs md:text-base"},Gt=c("p",{class:"px-4 pt-4 text-xs md:text-base border-[#E0E0E0] border-t-[1px]"},"Are you sure you want to launch auction with this option?",-1),Zt=["disabled"],Jt={key:3,class:"pt-4 flex gap-4"};function Qt(e,t,s,i,n,o){var l,a,h;const r=$("VueDatePicker");return g(),y(I,null,[i.steps.step1?(g(),y("div",yt,[_t,k(r,{"enable-time-picker":!1,modelValue:i.formData.auctionDate,"onUpdate:modelValue":t[0]||(t[0]=d=>i.formData.auctionDate=d),"min-date":new Date,class:B(["custom-picker",((l=i.invalid)==null?void 0:l.auctionDate)&&"error-picker"])},{"calendar-header":X(({index:d,day:u})=>[c("div",{class:B(d===5||d===6?"red-color":"")},O(u),3)]),_:1},8,["modelValue","min-date","class"]),c("div",Rt,[c("div",Mt,[c("div",zt,[At,V(c("select",{"onUpdate:modelValue":t[1]||(t[1]=d=>i.formData.auctionTime=d),class:B([(a=i.invalid)!=null&&a.auctionTime?"border-error":"border-[#E0E0E0]","border custom-select-launch text-[#858585] md:p-3 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"])},Et,2),[[ne,i.formData.auctionTime]])]),Dt,c("div",kt,[Ct,V(c("select",{"onUpdate:modelValue":t[2]||(t[2]=d=>i.formData.auctionDuration=d),class:B([(h=i.invalid)!=null&&h.auctionDuration?"border-error":"border-[#E0E0E0]","border custom-select-launch text-[#858585] md:p-3 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"])},Ot,2),[[ne,i.formData.auctionDuration]])])])])])):A("",!0),i.steps.step2?(g(),y(I,{key:1},[c("div",Lt,[Wt,It,c("div",Ht,[qt,c("p",Bt,O(i.newDate),1)]),c("div",Ft,[Vt,c("p",Nt,O(i.formData.auctionTime),1)]),c("div",Yt,[Ut,c("p",Xt,O(i.formData.auctionDuration)+" Minutes",1)])]),Gt],64)):A("",!0),i.steps.step1?(g(),y("div",{key:2,class:"pt-4",onClick:t[3]||(t[3]=d=>i.next(1))},[c("button",{disabled:i.sizeObjet!=0,class:B([i.sizeObjet==0?"bg-primary":"bg-base-gray text-white","w-full md:h-[41px] h-[35px] text-blue-100 text-xs font-semibold bg-primary rounded"])}," Next ",10,Zt)])):A("",!0),i.steps.step2?(g(),y("div",Jt,[c("button",{onClick:t[4]||(t[4]=(...d)=>i.back&&i.back(...d)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 border-[#E0E0E0] border-[1px] rounded"}," No "),c("button",{onClick:t[5]||(t[5]=d=>i.next(2)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 bg-primary rounded"}," Yes ")])):A("",!0)],64)}const Kt=J(xt,[["render",Qt]]),ei={props:{form:{type:Object},steps:{type:Object},active:{type:Boolean},save:{type:Function}},components:{},setup(e){const t=z(e.form),s=z(e.steps),i=z(),n=z(null),o=z(),r=a=>{s.value.step1=!0,s.value.step2=!1},l=a=>{switch(a){case 1:Object.entries(i.value).length===0&&(s.value.step1=!1,s.value.step2=!0);break;case 2:e.save();break}};return Ce(t.value,async(a,h)=>{a&&(i.value=je(t.value,"Launch Auction","hours weekeng"),n.value=Object.entries(i.value).length,o.value=null,o.value=Te(t.value.auctionDate).format("LL"))}),{formData:t,next:l,back:r,steps:s,sizeObjet:n,invalid:i}}},ti={key:0,class:"w-full flex flex-col p-4 mt-4 gap-2"},ii={class:"flex justify-center gap-6 items-center"},si={class:"w-full flex flex-col md:gap-2"},oi=c("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Saturday",-1),ni=c("option",{value:"19.00 PM",selected:""},"19.00 PM",-1),ai=[ni],ri=c("p",{class:"mt-7"}," - ",-1),li={class:"w-full flex flex-col md:gap-2"},ci=c("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Monday",-1),hi=re('<option value="Select time" selected>Select time</option><option value="00">00.00 AM</option><option value="01">01.00 AM</option><option value="02">02.00 AM</option><option value="03">03.00 AM</option><option value="04">04.00 AM</option><option value="05">05.00 AM</option><option value="06">06.00 AM</option><option value="07">07.00 AM</option><option value="08">08.00 AM</option><option value="09">09.00 AM</option><option value="10">10.00 AM</option><option value="11">11.00 AM</option><option value="12">12.00 PM</option><option value="13">13.00 PM</option><option value="14">14.00 PM</option><option value="15">15.00 PM</option><option value="16">16.00 PM</option><option value="17">17.00 PM</option><option value="18">18.00 PM</option><option value="19">19.00 PM</option><option value="20">20.00 PM</option><option value="21">21.00 PM</option><option value="22">22.00 PM</option><option value="23">23.00 PM</option><option value="24">24.00 PM</option>',26),di=[hi],ui={class:"m-4 p-4 rounded-lg border-[#E0E0E0] border-[1px]"},mi=re('<p class="font-semibold text-xs md:text-base">Launch Information</p><div class="flex justify-between py-1 gap-2"><p class="text-xs md:text-base">Launch Options</p><p class="text-xs md:text-base">After Hours (Weekend)</p></div><div class="flex justify-between py-1 gap-2"><p class="text-xs md:text-base">Auction Date</p><p class="font-semibold text-xs md:text-base"></p></div><div class="flex justify-between py-1 gap-2"><p class="text-xs md:text-base">From</p><p class="font-semibold text-xs md:text-base">Saturday, 19.00 PM</p></div>',4),pi={class:"flex justify-between py-1 gap-2"},fi=c("p",{class:"text-xs md:text-base"},"To",-1),gi={class:"font-semibold text-xs md:text-base"},vi=c("p",{class:"px-4 pt-4 text-xs md:text-base border-[#E0E0E0] border-t-[1px]"}," Are you sure you want to launch auction with this option?",-1),bi=["disabled"],wi={key:3,class:"pt-4 flex gap-4"};function xi(e,t,s,i,n,o){var r;return g(),y(I,null,[i.steps.step1?(g(),y("div",ti,[c("div",ii,[c("div",si,[oi,V(c("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.formData.daySaturday=l),disabled:"",class:"custom-select-launch border-none text-[#858585] md:p-3 bg-[#E0E0E0] text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"},ai,512),[[ne,i.formData.daySaturday]])]),ri,c("div",li,[ci,V(c("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>i.formData.dayMonday=l),class:B([(r=i.invalid)!=null&&r.auctionTime?"border-error":"border-[#E0E0E0]","custom-select-launch border text-[#858585] md:p-3 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"])},di,2),[[ne,i.formData.dayMonday]])])])])):A("",!0),i.steps.step2?(g(),y(I,{key:1},[c("div",ui,[mi,c("div",pi,[fi,c("p",gi,"Monday, "+O(i.formData.dayMonday),1)])]),vi],64)):A("",!0),i.steps.step1?(g(),y("div",{key:2,class:"pt-4",onClick:t[2]||(t[2]=l=>i.next(1))},[c("button",{disabled:i.sizeObjet!=0,class:B([i.sizeObjet==0?"bg-primary":"bg-base-gray text-white","w-full md:h-[41px] h-[35px] text-blue-100 text-xs font-semibold bg-primary rounded"])}," Next ",10,bi)])):A("",!0),i.steps.step2?(g(),y("div",wi,[c("button",{onClick:t[3]||(t[3]=(...l)=>i.back&&i.back(...l)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 border-[#E0E0E0] border-[1px] rounded"}," No "),c("button",{onClick:t[4]||(t[4]=l=>i.next(2)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 bg-primary rounded"}," Yes ")])):A("",!0)],64)}const yi=J(ei,[["render",xi]]),_i={props:{form:{type:Object},steps:{type:Object},save:{type:Function}},components:{},setup(e){const t=z(e.form),s=z(e.steps),i=z();return{formData:t,next:r=>{switch(i.value=je(t.value,"Launch Auction","after verified"),r){case 1:Object.entries(i.value).length===0&&(s.value.step1=!1,s.value.step2=!0);break;case 2:e.save();break}},back:r=>{s.value.step1=!0,s.value.step2=!1},steps:s,invalid:i}}},Ri={key:0,class:"w-full flex mt-4 flex-col md:gap-4"},Mi=c("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Auction Durations",-1),zi=c("option",{value:"45"},"45 Minutes",-1),Ai=c("option",{value:"50"},"50 Minutes",-1),Si=c("option",{value:"60"},"60 Minutes",-1),Ei=c("option",{value:"65"},"65 Minutes",-1),Di=[zi,Ai,Si,Ei],ki={class:"m-2 p-2 md:p-4 rounded-lg border-[#E0E0E0] border-[1px]"},Ci=c("p",{class:"font-semibold text-xs md:text-base"},"Launch Information",-1),Pi=c("div",{class:"flex justify-between py-2 gap-2"},[c("p",{class:"text-xs md:text-base"},"Launch Options"),c("p",{class:"text-xs md:text-base"},"Launch now after verified")],-1),Ti={class:"flex justify-between py-2 gap-2"},ji=c("p",{class:"text-xs md:text-base"},"Auction Durations",-1),$i={class:"font-semibold text-xs md:text-base"},Oi=c("p",{class:"px-4 pt-4 text-xs md:text-base border-[#E0E0E0] border-t-[1px]"},"Are you sure you want to launch auction with this option? You can't cancel after it's been launched ",-1),Li=c("button",{class:"w-full md:h-[41px] h-[35px] text-blue-100 text-xs md:text-base font-semibold bg-primary rounded"}," Next ",-1),Wi=[Li],Ii={key:3,class:"pt-4 flex gap-4"};function Hi(e,t,s,i,n,o){var r;return g(),y(I,null,[i.steps.step1?(g(),y("div",Ri,[Mi,V(c("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.formData.auctionDuration=l),class:B([(r=i.invalid)!=null&&r.auctionDuration?"border-error":"border-[#E0E0E0]","border text-[#858585] md:p-3 custom-select-launch text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"])},Di,2),[[ne,i.formData.auctionDuration]])])):A("",!0),i.steps.step2?(g(),y(I,{key:1},[c("div",ki,[Ci,Pi,c("div",Ti,[ji,c("p",$i,O(i.formData.auctionDuration)+" Minutes",1)])]),Oi],64)):A("",!0),i.steps.step1?(g(),y("div",{key:2,class:"pt-4",onClick:t[1]||(t[1]=l=>i.next(1))},Wi)):A("",!0),i.steps.step2?(g(),y("div",Ii,[c("button",{onClick:t[2]||(t[2]=(...l)=>i.back&&i.back(...l)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 border-[#E0E0E0] border-[1px] rounded"}," No "),c("button",{onClick:t[3]||(t[3]=l=>i.next(2)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 bg-primary rounded"}," Yes ")])):A("",!0)],64)}const qi=J(_i,[["render",Hi]]),Bi={props:{form:{type:Object},steps:{type:Object},save:{type:Function}},setup(e){const t=z(e.form),s=z(e.steps),i=z(null),n=z(),o=z(),r=h=>{s.value.step1=!0,s.value.step2=!1};function l(h,d=0){let u=new Date;if(!h)return u;let m=24*60*60*1e3;return u.setHours(h,d,0,0),u.setTime(u.getTime()+m),u}return{formData:t,next:h=>{switch(h){case 1:o.value=Te(l(9)).format("MMMM DD, h:mm: A"),s.value.step1=!1,s.value.step2=!0;break;case 2:t.value.launchOptions="none",e.save();break}},steps:s,invalid:n,sizeObjet:i,back:r,newDate:o}}},Fi={class:"m-4 p-4 rounded-lg border-[#E0E0E0] border-[1px]"},Vi=c("p",{class:"font-semibold text-xs md:text-base"},"Launch Information",-1),Ni=c("div",{class:"flex justify-between py-1 md:gap-2"},[c("p",{class:"text-xs md:text-base"},"Launch Option"),c("p",{class:"text-xs md:text-base"},"Next Day")],-1),Yi={class:"flex justify-between py-1 md:gap-2"},Ui=c("p",{class:"text-xs md:text-base"},"Auction Date",-1),Xi={class:"font-semibold text-xs md:text-base"},Gi=c("div",{class:"flex justify-between py-1 md:gap-2"},[c("p",{class:"text-xs md:text-base"},"Auction Duration"),c("p",{class:"font-semibold text-xs md:text-base"},"480 Minutes")],-1),Zi=c("p",{class:"px-4 pt-4 text-xs md:text-base border-[#E0E0E0] border-t-[1px]"},"Are you sure you want to launch auction with this option?",-1),Ji=c("button",{id:"nextAuction",class:"w-full md:h-[41px] h-[35px] text-blue-100 text-xs font-semibold bg-primary rounded"}," Launch Auction for Tomorrow ",-1),Qi=[Ji],Ki={key:2,class:"pt-4 flex gap-4"};function es(e,t,s,i,n,o){return g(),y(I,null,[i.steps.step2?(g(),y(I,{key:0},[c("div",Fi,[Vi,Ni,c("div",Yi,[Ui,c("p",Xi,O(i.newDate),1)]),Gi]),Zi],64)):A("",!0),i.steps.step1?(g(),y("div",{key:1,class:"pt-4",onClick:t[0]||(t[0]=r=>i.next(1))},Qi)):A("",!0),i.steps.step2?(g(),y("div",Ki,[c("button",{onClick:t[1]||(t[1]=(...r)=>i.back&&i.back(...r)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 border-[#E0E0E0] border-[1px] rounded"}," No "),c("button",{id:"completeAuction",onClick:t[2]||(t[2]=r=>i.next(2)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 bg-primary rounded"}," Yes ")])):A("",!0)],64)}const ts=J(Bi,[["render",es]]),is=Pe("modalLaunch",{state:()=>({isActive:!1}),actions:{openModal(e){this.isActive=e},closeModal(e){this.isActive=e}}}),ss={props:{form:{type:Object},launch:{type:Boolean},invalid:{type:Object},modalLaunch:{type:Function},isActive:{type:Boolean}},components:{DateAndTime:Kt,HoursWeekeng:yi,AfterVerified:qi,NextDay:ts},setup(e){const t=z(e.isActive),s=z(e.form),i=is(),n=z(Qe(()=>"https://s3.us-east-2.amazonaws.com/files.autosensei.ca/")),o=z({step1:!0,step2:!1}),r=z({step1:!0,step2:!1}),l=z({step1:!0,step2:!1});return Ce(s.value,async(d,u)=>{if(d)switch(d.launchOptions){case"Launch now after verified":s.value.auctionDate="",s.value.auctionTime="",s.value.dayMonday="Select time";break;case"Choose the date & time":s.value.dayMonday="Select time";break;case"Choose after hours (weekend)":s.value.auctionDate="",s.value.auctionTime="";break}}),{isOpen:t,formData:s,save:()=>{e.modalLaunch()},stepsVerifiqued:o,stepsDateTime:r,stepsDateWeekeng:l,statusModal:i,newtDayDate:()=>{console.log("formData",s.value),dateTomorrow(9)},bucket:n}}},os={class:"fixed inset-0 flex items-end md:items-center md:justify-center bg-base-black bg-opacity-50"},ns={class:"max-w-md overflow-auto bg-white rounded-lg shadow-xl animation-fade-modal"},as={class:"md:p-4 p-2 rounded-t-lg bg-[#22282F] flex items-center justify-between"},rs=c("p",{class:"text-sm md:text-xl text-white"},"Launch Auction",-1),ls=c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),cs=[ls],hs={class:"p-2 pb-0 md:p-4 flex gap-3 flex-col"},ds=re('<div class="flex justify-start items-center gap-2"><p class="text-xs md:text-base">Options</p><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8.78145 8.00048L5.48145 4.70048L6.42411 3.75781L10.6668 8.00048L6.42411 12.2431L5.48145 11.3005L8.78145 8.00048Z" fill="#858585"></path></svg><p class="text-[#858585] text-xs md:text-base">Summary</p></div>',1),us={class:"flex gap-3 items-start"},ms={key:0,class:"w-[90px] h-[70px] md:w-[120px] md:h-[90px]"},ps=["src"],fs={class:"font-semibold text-xs md:text-base"},gs={class:"text-[10px] md:text-base"},vs={class:"mt-2 border-[#E0E0E0] border-t-[1px]"},bs={class:"p-2 md:p-4"},ws=c("p",{class:"md:font-semibold text-xs md:text-base"},"Launch Options",-1),xs=c("p",{class:"text-[#858585] text-[10px] md:text-base"},"After you launch the auction we will review & approve your auction. Your auction will be listed the next day from 9 am to 5pm. ",-1);function ys(e,t,s,i,n,o){var l,a,h,d,u,m,p,x,f,v,M,w,S,G;const r=$("NextDay");return V((g(),y("div",os,[c("div",ns,[c("div",as,[rs,(g(),y("svg",{onClick:t[0]||(t[0]=qn=>i.statusModal.closeModal(!1)),xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"#fff"},cs))]),c("div",hs,[ds,c("div",us,[((a=(l=i.formData)==null?void 0:l.images)==null?void 0:a.length)>0?(g(),y("div",ms,[c("img",{class:"w-full h-full rounded-lg object-cover",src:(h=i.formData)!=null&&h.images[0].bucket?i.bucket+((u=(d=i.formData)==null?void 0:d.images[0])==null?void 0:u.preview):(p=(m=i.formData)==null?void 0:m.images[0])==null?void 0:p.preview,alt:""},null,8,ps)])):A("",!0),c("div",null,[c("p",fs,O((x=i.formData)==null?void 0:x.year)+" "+O((f=i.formData)==null?void 0:f.make)+" "+O((v=i.formData)==null?void 0:v.model),1),c("p",gs,O((w=(M=i.formData)==null?void 0:M.saveCity)==null?void 0:w.name)+", "+O((G=(S=i.formData)==null?void 0:S.saveProvince)==null?void 0:G.name),1)])])]),c("div",vs,[c("div",bs,[i.stepsVerifiqued.step1&&i.formData.launchOptions=="none"||i.stepsVerifiqued.step1&&i.formData.launchOptions=="Launch now after verified"||i.stepsDateTime.step1&&i.formData.launchOptions=="Choose the date & time"||i.stepsDateWeekeng.step1&&i.formData.launchOptions=="Choose after hours (weekend)"||i.formData.launchOptions==null?(g(),y(I,{key:0},[ws,xs],64)):A("",!0),k(r,{steps:i.stepsVerifiqued,form:i.formData,save:i.save},null,8,["steps","form","save"])])])])],512)),[[le,i.statusModal.isActive]])}const Vn=J(ss,[["render",ys]]);function Be(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,i)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Be(Object(s),!0).forEach(function(i){L(e,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Be(Object(s)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(s,i))})}return e}function L(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function _s(e,t){if(e==null)return{};var s,i,n=function(r,l){if(r==null)return{};var a,h,d={},u=Object.keys(r);for(h=0;h<u.length;h++)a=u[h],l.indexOf(a)>=0||(d[a]=r[a]);return d}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)s=o[i],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Q(e){return function(t){if(Array.isArray(t))return we(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,s){if(t){if(typeof t=="string")return we(t,s);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return we(t,s)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function we(e,t){(t==null||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}var Fe,Rs,ce,D=(Fe=function(e){/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function s(){for(var i=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var r=typeof o;if(r==="string"||r==="number")i.push(o);else if(Array.isArray(o)){if(o.length){var l=s.apply(null,o);l&&i.push(l)}}else if(r==="object")if(o.toString===Object.prototype.toString)for(var a in o)t.call(o,a)&&o[a]&&i.push(a);else i.push(o.toString())}}return i.join(" ")}e.exports?(s.default=s,e.exports=s):window.classNames=s})()},Fe(ce={path:Rs,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(t==null&&ce.path)}},ce.exports),ce.exports),H=function(e){return function(t,s){if(!t)return e;var i;typeof t=="string"?i=t:s=t;var n=e;return i&&(n+="__"+i),n+(s?Object.keys(s).reduce(function(o,r){var l=s[r];return l&&(o+=" "+(typeof l=="boolean"?n+"--"+r:n+"--"+r+"_"+l)),o},""):"")}};function ze(e,t,s){var i,n,o,r,l;function a(){var d=Date.now()-r;d<t&&d>=0?i=setTimeout(a,t-d):(i=null,s||(l=e.apply(o,n),o=n=null))}t==null&&(t=100);var h=function(){o=this,n=arguments,r=Date.now();var d=s&&!i;return i||(i=setTimeout(a,t)),d&&(l=e.apply(o,n),o=n=null),l};return h.clear=function(){i&&(clearTimeout(i),i=null)},h.flush=function(){i&&(l=e.apply(o,n),o=n=null,clearTimeout(i),i=null)},h}ze.debounce=ze;var Ae=ze,b=function(){return b=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++)for(var n in t=arguments[s])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},b.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function tt(e,t){var s,i;return e&&t?(s=""+e+t[0].toUpperCase()+t.slice(1),i=e+"-"+t):(s=e||t,i=e||t),{name:s,classname:i}}function it(e){return/^blob:/.test(e)}function Ve(e){return it(e)||function(t){return/^data:/.test(t)}(e)}function ee(e){return!!(e&&e.constructor&&e.call&&e.apply)}function C(e){return e===void 0}function pe(e){return typeof e=="object"&&e!==null}function Se(e,t,s){var i={};return pe(e)?(Object.keys(t).forEach(function(n){C(e[n])?i[n]=t[n]:pe(t[n])?pe(e[n])?i[n]=Se(e[n],t[n],s[n]):i[n]=e[n]?t[n]:s[n]:t[n]===!0||t[n]===!1?i[n]=!!e[n]:i[n]=e[n]}),i):e?t:s}function he(e){var t=Number(e);return Number.isNaN(t)?e:t}function Ne(e){return typeof(e=="number"||function(t){return typeof t=="object"&&t!==null}(e)&&toString.call(e)=="[object Number]")&&!st(e)}function st(e){return e!=e}function ot(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var oe=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.type="manipulateImage",this.move=e,this.scale=t},Ms=function(e,t){t===void 0&&(t={}),this.type="resize",this.directions=e,this.params=t},$e=function(e){this.type="move",this.directions=e},zs=function(){function e(t,s,i,n,o){this.type="drag",this.nativeEvent=t,this.position=i,this.previousPosition=n,this.element=s,this.anchor=o}return e.prototype.shift=function(){var t=this,s=t.element,i=t.anchor,n=t.position;if(s){var o=s.getBoundingClientRect(),r=o.left,l=o.top;return{left:n.left-r-i.left,top:n.top-l-i.top}}return{left:0,top:0}},e}(),Oe={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&!this.disabled&&e.touches.length===1&&(this.touches=Q(e.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),e.touches.length&&this.initAnchor(this.touches.reduce(function(t,s){return{clientX:t.clientX+s.clientX/e.touches.length,clientY:t.clientY+s.clientY/e.touches.length}},{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(!this.disabled){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.draggable.getBoundingClientRect(),s=t.left,i=t.right,n=t.bottom,o=t.top;this.anchor={left:e.clientX-s,top:e.clientY-o,bottom:n-e.clientY,right:i-e.clientX}},processMove:function(e,t){var s=Q(t);if(this.touches.length){if(this.touches.length===1&&s.length===1){var i=this.$refs.draggable;this.$emit("drag",new zs(e,i,{left:s[0].clientX,top:s[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=s}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"]};Oe.render=function(e,t,s,i,n,o){return g(),E("div",{ref:"draggable",class:s.classname,onTouchstart:t[1]||(t[1]=function(){return o.onTouchStart&&o.onTouchStart.apply(o,arguments)}),onMousedown:t[2]||(t[2]=function(){return o.onMouseDown&&o.onMouseDown.apply(o,arguments)}),onMouseover:t[3]||(t[3]=function(){return o.onMouseOver&&o.onMouseOver.apply(o,arguments)}),onMouseleave:t[4]||(t[4]=function(){return o.onMouseLeave&&o.onMouseLeave.apply(o,arguments)})},[K(e.$slots,"default")],34)};var xe=H("vue-handler-wrapper"),nt={name:"HandlerWrapper",components:{DraggableElement:Oe},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t,s=tt(this.horizontalPosition,this.verticalPosition);e=xe((L(t={},s.classname,!0),L(t,"disabled",this.disabled),t))}else e=xe({disabled:this.disabled});return{root:e,draggable:xe("draggable")}}},emits:["leave","enter","drag","drag-end"]};nt.render=function(e,t,s,i,n,o){var r=$("DraggableElement");return g(),E("div",{class:o.classes.root},[k(r,{class:o.classes.draggable,onDrag:t[1]||(t[1]=function(l){return e.$emit("drag",l)}),onDragEnd:t[2]||(t[2]=function(l){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(l){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(l){return e.$emit("enter")})},{default:X(function(){return[K(e.$slots,"default")]}),_:3},8,["class"])],2)};var As=H("vue-line-wrapper"),at={name:"LineWrapper",components:{DraggableElement:Oe},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var e;return As((L(e={},this.position,!0),L(e,"disabled",this.disabled),e))}},emits:["leave","enter","drag","drag-end"]};at.render=function(e,t,s,i,n,o){var r=$("DraggableElement");return g(),E(r,{class:o.classname,onDrag:t[1]||(t[1]=function(l){return e.$emit("drag",l)}),onDragEnd:t[2]||(t[2]=function(l){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(l){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(l){return e.$emit("enter")})},{default:X(function(){return[K(e.$slots,"default")]}),_:3},8,["class"])};var F=["left","right","top","bottom"],Ss=["left","right"],Es=["top","bottom"],Ds=["left","top"],ks=["fill-area","fit-area","stencil","none"],Ye={left:0,top:0,width:0,height:0};function Ue(e,t,s){return!(s=s||["width","height","left","top"]).some(function(i){return e[i]!==t[i]})}function N(e){return{left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height}}function te(e,t){return{left:e.left-t.left,top:e.top-t.top}}function P(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function ae(e,t){var s={left:0,top:0,right:0,bottom:0};return F.forEach(function(i){var n=t[i],o=N(e)[i];s[i]=n!==void 0&&o!==void 0?i==="left"||i==="top"?Math.max(0,n-o):Math.max(0,o-n):0}),s}function q(e,t){return{left:e.left-t.left,top:e.top-t.top,width:e.width+t.left+t.right,height:e.height+t.top+t.bottom}}function ge(e){return{left:-e.left,top:-e.top}}function j(e,t){return b(b({},e),{left:e.left+t.left,top:e.top+t.top})}function W(e,t,s,i){if(t!==1){if(s){var n=P(e);return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2+(s.left-n.left)*(i||1-t),top:e.top+e.height*(1-t)/2+(s.top-n.top)*(i||1-t)}}return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2,top:e.top+e.height*(1-t)/2}}return e}function R(e){return e.width/e.height}function ie(e,t){return Math.min(t.right!==void 0&&t.left!==void 0?(t.right-t.left)/e.width:1/0,t.bottom!==void 0&&t.top!==void 0?(t.bottom-t.top)/e.height:1/0)}function se(e,t){var s={left:0,top:0},i=ae(e,t);return i.left&&i.left>0?s.left=i.left:i.right&&i.right>0&&(s.left=-i.right),i.top&&i.top>0?s.top=i.top:i.bottom&&i.bottom>0&&(s.top=-i.bottom),s}function ye(e,t){var s;return t.minimum&&e<t.minimum?s=t.minimum:t.maximum&&e>t.maximum&&(s=t.maximum),s}function rt(e,t){var s=R(e),i=R(t);return t.width<1/0&&t.height<1/0?s>i?{width:t.width,height:t.width/s}:{width:t.height*s,height:t.height}:t.width<1/0?{width:t.width,height:t.width/s}:t.height<1/0?{width:t.height*s,height:t.height}:e}function lt(e,t){var s=t*Math.PI/180;return{width:Math.abs(e.width*Math.cos(s))+Math.abs(e.height*Math.sin(s)),height:Math.abs(e.width*Math.sin(s))+Math.abs(e.height*Math.cos(s))}}function Z(e,t){var s=t*Math.PI/180;return{left:e.left*Math.cos(s)-e.top*Math.sin(s),top:e.left*Math.sin(s)+e.top*Math.cos(s)}}function ve(e,t){var s=ae(T(e,t),t);return s.left+s.right+s.top+s.bottom?s.left+s.right>s.top+s.bottom?Math.min((e.width+s.left+s.right)/e.width,ie(e,t)):Math.min((e.height+s.top+s.bottom)/e.height,ie(e,t)):1}function T(e,t,s){s===void 0&&(s=!1);var i=se(e,t);return j(e,s?ge(i):i)}function Ee(e){return{width:e.right!==void 0&&e.left!==void 0?e.right-e.left:1/0,height:e.bottom!==void 0&&e.top!==void 0?e.bottom-e.top:1/0}}function Cs(e,t){return b(b({},e),{minWidth:Math.min(t.width,e.minWidth),minHeight:Math.min(t.height,e.minHeight),maxWidth:Math.min(t.width,e.maxWidth),maxHeight:Math.min(t.height,e.maxHeight)})}function ct(e,t,s){s===void 0&&(s=!0);var i={};return F.forEach(function(n){var o=e[n],r=t[n];o!==void 0&&r!==void 0?i[n]=n==="left"||n==="top"?s?Math.max(o,r):Math.min(o,r):s?Math.min(o,r):Math.max(o,r):r!==void 0?i[n]=r:o!==void 0&&(i[n]=o)}),i}function be(e,t){return ct(e,t,!0)}function Xe(e){var t=e.size,s=e.aspectRatio,i=e.ignoreMinimum,n=e.sizeRestrictions;return!!((t.correctRatio||R(t)>=s.minimum&&R(t)<=s.maximum)&&t.height<=n.maxHeight&&t.width<=n.maxWidth&&t.width&&t.height&&(i||t.height>=n.minHeight&&t.width>=n.minWidth))}function Ge(e,t){return Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2)}function U(e){var t=e.width,s=e.height,i=e.sizeRestrictions,n={minimum:e.aspectRatio&&e.aspectRatio.minimum||0,maximum:e.aspectRatio&&e.aspectRatio.maximum||1/0},o={width:Math.max(i.minWidth,Math.min(i.maxWidth,t)),height:Math.max(i.minHeight,Math.min(i.maxHeight,s))};function r(h,d){return d===void 0&&(d=!1),h.reduce(function(u,m){return Xe({size:m,aspectRatio:n,sizeRestrictions:i,ignoreMinimum:d})&&(!u||Ge(m,{width:t,height:s})<Ge(u,{width:t,height:s}))?m:u},null)}var l=[];n&&[n.minimum,n.maximum].forEach(function(h){h&&l.push({width:o.width,height:o.width/h,correctRatio:!0},{width:o.height*h,height:o.height,correctRatio:!0})}),Xe({size:o,aspectRatio:n,sizeRestrictions:i})&&l.push(o);var a=r(l)||r(l,!0);return a&&{width:a.width,height:a.height}}function De(e){var t=e.event,s=e.coordinates,i=e.positionRestrictions,n=i===void 0?{}:i,o=j(s,t.directions);return j(o,se(o,n))}function Ps(e){var t=e.coordinates,s=e.transform,i=e.imageSize,n=e.sizeRestrictions,o=e.positionRestrictions,r=e.aspectRatio,l=e.visibleArea,a=function(d,u){return De({coordinates:d,positionRestrictions:o,event:new $e({left:u.left-d.left,top:u.top-d.top})})},h=b({},t);return(Array.isArray(s)?s:[s]).forEach(function(d){var u={};C((u=typeof d=="function"?d({coordinates:h,imageSize:i,visibleArea:l}):d).width)&&C(u.height)||(h=function(m,p){var x=b(b(b({},m),U({width:p.width,height:p.height,sizeRestrictions:n,aspectRatio:r})),{left:0,top:0});return a(x,{left:m.left,top:m.top})}(h,b(b({},h),u))),C(u.left)&&C(u.top)||(h=a(h,b(b({},h),u)))}),h}function Ts(e){e.event;var t=e.getAreaRestrictions,s=e.boundaries,i=e.coordinates,n=e.visibleArea;e.aspectRatio;var o=e.stencilSize,r=e.sizeRestrictions,l=e.positionRestrictions;e.stencilReference;var a,h,d,u=b({},i),m=b({},n),p=b({},o);a=R(p),h=R(u),d===void 0&&(d=.001),(a===0||h===0?Math.abs(h-a)<d:Math.abs(h/a)<1+d&&Math.abs(h/a)>1-d)||(u=b(b({},u),U({sizeRestrictions:r,width:u.width,height:u.height,aspectRatio:{minimum:R(p),maximum:R(p)}})));var x=ve(m=W(m,u.width*s.width/(m.width*p.width)),t({visibleArea:m,type:"resize"}));return x!==1&&(m=W(m,x),u=W(u,x)),m=T(m=j(m,te(P(u),P(m))),t({visibleArea:m,type:"move"})),{coordinates:u=T(u,be(N(m),l)),visibleArea:m}}function js(e){var t=e.event,s=e.getAreaRestrictions,i=e.boundaries,n=e.coordinates,o=e.visibleArea;e.aspectRatio,e.stencilSize,e.sizeRestrictions;var r=e.positionRestrictions;e.stencilReference;var l=b({},n),a=b({},o);if(n&&o&&t.type!=="manipulateImage"){var h={width:0,height:0};a.width,i.width,R(i)>R(l)?(h.height=.8*i.height,h.width=h.height*R(l)):(h.width=.8*i.width,h.height=h.width*R(l));var d=ve(a=W(a,l.width*i.width/(a.width*h.width)),s({visibleArea:a,type:"resize"}));a=W(a,d),d!==1&&(h.height/=d,h.width/=d),a=T(a=j(a,te(P(l),P(a))),s({visibleArea:a,type:"move"})),l=T(l,be(N(a),r))}return{coordinates:l,visibleArea:a}}function $s(e){var t=e.event,s=e.coordinates,i=e.visibleArea,n=e.getAreaRestrictions,o=b({},i),r=b({},s);if(t.type==="setCoordinates"){var l=Math.max(0,r.width-o.width),a=Math.max(0,r.height-o.height);l>a?o=W(o,Math.min(r.width/o.width,ie(o,n({visibleArea:o,type:"resize"})))):a>l&&(o=W(o,Math.min(r.height/o.height,ie(o,n({visibleArea:o,type:"resize"}))))),o=T(o=j(o,ge(se(r,N(o)))),n({visibleArea:o,type:"move"}))}return{visibleArea:o,coordinates:r}}function Os(e){var t=e.imageSize,s=e.visibleArea,i=e.coordinates,n=s||t;return{left:(s?s.left:0)+n.width/2-i.width/2,top:(s?s.top:0)+n.height/2-i.height/2}}function Ls(e){var t=e.imageSize,s=e.visibleArea,i=e.aspectRatio,n=e.sizeRestrictions,o=s||t,r=Math.min(i.maximum||1/0,Math.max(i.minimum||0,R(o))),l=o.width<o.height?{width:.8*o.width,height:.8*o.width/r}:{height:.8*o.height,width:.8*o.height*r};return U(b(b({},l),{aspectRatio:i,sizeRestrictions:n}))}function Ws(e){var t,s,i=e.imageSize,n=e.visibleArea,o=e.boundaries,r=e.aspectRatio,l=e.sizeRestrictions,a=e.stencilSize,h=n||i;return R(h)>R(o)?s=(t=a.height*h.height/o.height)*R(a):t=(s=a.width*h.width/o.width)/R(a),U({width:s,height:t,aspectRatio:r,sizeRestrictions:l})}function Is(e){var t=e.getAreaRestrictions,s=e.coordinates,i=e.imageSize,n=R(e.boundaries);if(s){var o={height:Math.max(s.height,i.height),width:Math.max(s.width,i.width)},r=rt({width:R(o)>n?o.width:o.height*n,height:R(o)>n?o.width/n:o.height},Ee(t())),l={left:s.left+s.width/2-r.width/2,top:s.top+s.height/2-r.height/2,width:r.width,height:r.height},a=ae(s,N(b({left:0,top:0},i))),h={};return!a.left&&!a.right&&l.width<=i.width&&(h.left=0,h.right=i.width),!a.top&&!a.bottom&&l.height<=i.height&&(h.top=0,h.bottom=i.height),T(l,h)}var d=R(i);return r={height:d>n?i.height:i.width/n,width:d>n?i.height*n:i.width},{left:i.width/2-r.width/2,top:i.height/2-r.height/2,width:r.width,height:r.height}}function de(e,t){return ct(e,N(t))}function Hs(e){var t=e.event,s=e.coordinates,i=e.visibleArea,n=e.sizeRestrictions,o=e.getAreaRestrictions,r=e.positionRestrictions,l=e.adjustStencil,a=t.scale,h=t.move,d=b({},i),u=b({},s),m=1,p=1,x=a.factor&&Math.abs(a.factor-1)>.001;d=j(d,{left:h.left||0,top:h.top||0});var f={stencil:{minimum:Math.max(n.minWidth?n.minWidth/u.width:0,n.minHeight?n.minHeight/u.height:0),maximum:Math.min(n.maxWidth?n.maxWidth/u.width:1/0,n.maxHeight?n.maxHeight/u.height:1/0,ie(u,r))},area:{maximum:ie(d,o({visibleArea:d,type:"resize"}))}};a.factor&&x&&(a.factor<1?(p=Math.max(a.factor,f.stencil.minimum))>1&&(p=1):a.factor>1&&(p=Math.min(a.factor,Math.min(f.area.maximum,f.stencil.maximum)))<1&&(p=1)),p&&(d=W(d,p,a.center));var v=s.left-i.left,M=i.width+i.left-(s.width+s.left),w=s.top-i.top,S=i.height+i.top-(s.height+s.top);return d=T(d=j(d,se(d,{left:r.left!==void 0?r.left-v*p:void 0,top:r.top!==void 0?r.top-w*p:void 0,bottom:r.bottom!==void 0?r.bottom+S*p:void 0,right:r.right!==void 0?r.right+M*p:void 0})),o({visibleArea:d,type:"move"})),u.width=u.width*p,u.height=u.height*p,u.left=d.left+v*p,u.top=d.top+w*p,u=T(u,be(N(d),r)),a.factor&&x&&l&&(a.factor>1?m=Math.min(f.area.maximum,a.factor)/p:a.factor<1&&(m=Math.max(u.height/d.height,u.width/d.width,a.factor/p)),m!==1&&(d=j(d=T(d=W(d,m,a.factor>1?a.center:P(u)),o({visibleArea:d,type:"move"})),ge(se(u,N(d)))))),{coordinates:u,visibleArea:d}}function qs(e){var t=e.aspectRatio,s=e.getAreaRestrictions,i=e.coordinates,n=e.visibleArea,o=e.sizeRestrictions,r=e.positionRestrictions,l=e.imageSize,a=e.previousImageSize,h=e.angle,d=b({},i),u=b({},n),m=Z(P(b({left:0,top:0},a)),h);return(d=b(b({},U({sizeRestrictions:o,aspectRatio:t,width:d.width,height:d.height})),Z(P(d),h))).left-=m.left-l.width/2+d.width/2,d.top-=m.top-l.height/2+d.height/2,u=W(u,ve(u,s({visibleArea:u,type:"resize"}))),{coordinates:d=T(d,r),visibleArea:u=T(u=j(u,te(P(d),P(i))),s({visibleArea:u,type:"move"}))}}function Bs(e){var t=e.flip,s=e.previousFlip,i=e.rotate;e.aspectRatio;var n=e.getAreaRestrictions,o=e.coordinates,r=e.visibleArea,l=e.imageSize,a=b({},o),h=b({},r),d=s.horizontal!==t.horizontal,u=s.vertical!==t.vertical;if(d||u){var m=Z({left:l.width/2,top:l.height/2},-i),p=Z(P(a),-i),x=Z({left:d?m.left-(p.left-m.left):p.left,top:u?m.top-(p.top-m.top):p.top},i);a=j(a,te(x,P(a))),p=Z(P(h),-i),h=T(h=j(h,te(x=Z({left:d?m.left-(p.left-m.left):p.left,top:u?m.top-(p.top-m.top):p.top},i),P(h))),n({visibleArea:h,type:"move"}))}return{coordinates:a,visibleArea:h}}function Ze(e){var t=e.directions,s=e.coordinates,i=e.positionRestrictions,n=i===void 0?{}:i,o=e.sizeRestrictions,r=e.preserveRatio,l=e.compensate,a=b({},t),h=q(s,a).width,d=q(s,a).height;h<0&&(a.left<0&&a.right<0?(a.left=-(s.width-o.minWidth)/(a.left/a.right),a.right=-(s.width-o.minWidth)/(a.right/a.left)):a.left<0?a.left=-(s.width-o.minWidth):a.right<0&&(a.right=-(s.width-o.minWidth))),d<0&&(a.top<0&&a.bottom<0?(a.top=-(s.height-o.minHeight)/(a.top/a.bottom),a.bottom=-(s.height-o.minHeight)/(a.bottom/a.top)):a.top<0?a.top=-(s.height-o.minHeight):a.bottom<0&&(a.bottom=-(s.height-o.minHeight)));var u=ae(q(s,a),n);l&&(u.left&&u.left>0&&u.right===0?(a.right+=u.left,a.left-=u.left):u.right&&u.right>0&&u.left===0&&(a.left+=u.right,a.right-=u.right),u.top&&u.top>0&&u.bottom===0?(a.bottom+=u.top,a.top-=u.top):u.bottom&&u.bottom>0&&u.top===0&&(a.top+=u.bottom,a.bottom-=u.bottom),u=ae(q(s,a),n));var m={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(F.forEach(function(f){var v=u[f];v&&a[f]&&(m[f]=Math.max(0,1-v/a[f]))}),r){var p=Math.min.apply(null,F.map(function(f){return m[f]}));p!==1/0&&F.forEach(function(f){a[f]*=p})}else F.forEach(function(f){m[f]!==1/0&&(a[f]*=m[f])});if(h=q(s,a).width,d=q(s,a).height,a.right+a.left&&(h>o.maxWidth?m.width=(o.maxWidth-s.width)/(a.right+a.left):h<o.minWidth&&(m.width=(o.minWidth-s.width)/(a.right+a.left))),a.bottom+a.top&&(d>o.maxHeight?m.height=(o.maxHeight-s.height)/(a.bottom+a.top):d<o.minHeight&&(m.height=(o.minHeight-s.height)/(a.bottom+a.top))),r){var x=Math.min(m.width,m.height);x!==1/0&&F.forEach(function(f){a[f]*=x})}else m.width!==1/0&&Ss.forEach(function(f){a[f]*=m.width}),m.height!==1/0&&Es.forEach(function(f){a[f]*=m.height});return a}function ue(e,t,s){return t==0&&s==0?e/2:t==0?0:s==0?e:e*Math.abs(t/(t+s))}var Fs=H("vue-simple-handler"),Vs=H("vue-simple-handler-wrapper"),Le={name:"SimpleHandler",components:{HandlerWrapper:nt},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var e,t=(L(e={},this.horizontalPosition,!!this.horizontalPosition),L(e,this.verticalPosition,!!this.verticalPosition),L(e,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),!!(this.verticalPosition&&this.horizontalPosition)),L(e,"hover",this.hover),e);return{default:D(Fs(t),this.defaultClass,this.hover&&this.hoverClass),wrapper:D(Vs(t),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Le.render=function(e,t,s,i,n,o){var r=$("HandlerWrapper");return g(),E(r,{class:o.classes.wrapper,"vertical-position":s.verticalPosition,"horizontal-position":s.horizontalPosition,disabled:s.disabled,onDrag:o.onDrag,onDragEnd:o.onDragEnd,onEnter:o.onEnter,onLeave:o.onLeave},{default:X(function(){return[k("div",{class:o.classes.default},null,2)]}),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Ns=H("vue-simple-line"),Ys=H("vue-simple-line-wrapper"),We={name:"SimpleLine",components:{LineWrapper:at},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:D(Ns(L({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:D(Ys(L({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};We.render=function(e,t,s,i,n,o){var r=$("LineWrapper");return g(),E(r,{class:o.classes.wrapper,position:s.position,disabled:s.disabled,onDrag:o.onDrag,onDragEnd:o.onDragEnd,onEnter:o.onEnter,onLeave:o.onLeave},{default:X(function(){return[k("div",{class:o.classes.root},null,2)]}),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var _e=H("vue-bounding-box"),Us=["east","west",null],Xs=["south","north",null],ht={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return Le}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return We}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var e=[];return Us.forEach(function(t){Xs.forEach(function(s){if(t!==s){var i=tt(t,s),n=i.name,o=i.classname;e.push({name:n,classname:o,verticalDirection:s,horizontalDirection:t})}})}),{points:e}},computed:{style:function(){var e={};return this.width&&this.height&&(e.width="".concat(this.width,"px"),e.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),e},classes:function(){var e=this.handlersClasses,t=this.handlersWrappersClasses,s=this.linesClasses,i=this.linesWrappersClasses;return{root:_e(),handlers:e,handlersWrappers:t,lines:s,linesWrappers:i}},lineNodes:function(){var e=this,t=[];return this.points.forEach(function(s){s.horizontalDirection&&s.verticalDirection||!e.lines[s.name]||t.push({name:s.name,component:e.linesComponent,class:D(e.classes.lines.default,e.classes.lines[s.name],!e.resizable&&e.classes.lines.disabled),wrapperClass:D(e.classes.linesWrappers.default,e.classes.linesWrappers[s.name],!e.resizable&&e.classes.linesWrappers.disabled),hoverClass:e.classes.lines.hover,verticalDirection:s.verticalDirection,horizontalDirection:s.horizontalDirection,disabled:!e.resizable})}),t},handlerNodes:function(){var e=this,t=[],s=this.width,i=this.height;return this.points.forEach(function(n){if(e.handlers[n.name]){var o={name:n.name,component:e.handlersComponent,class:D(e.classes.handlers.default,e.classes.handlers[n.name]),wrapperClass:D(e.classes.handlersWrappers.default,e.classes.handlersWrappers[n.name]),hoverClass:e.classes.handlers.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection,disabled:!e.resizable};if(s&&i){var r=n.horizontalDirection,l=n.verticalDirection,a=r==="east"?s:r==="west"?0:s/2,h=l==="south"?i:l==="north"?0:i/2;o.wrapperClass=_e("handler"),o.wrapperStyle={transform:"translate(".concat(a,"px, ").concat(h,"px)")},e.transitions&&e.transitions.enabled&&(o.wrapperStyle.transition="".concat(e.transitions.time,"ms ").concat(e.transitions.timingFunction))}else o.wrapperClass=_e("handler",L({},n.classname,!0));t.push(o)}}),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(e,t,s){var i,n=e.shift(),o=n.left,r=n.top,l={left:0,right:0,top:0,bottom:0};t==="west"?l.left-=o:t==="east"&&(l.right+=o),s==="north"?l.top-=r:s==="south"&&(l.bottom+=r),!s&&t?i="width":s&&!t&&(i="height"),this.resizable&&this.$emit("resize",new Ms(l,{allowedDirections:{left:t==="west"||!t,right:t==="east"||!t,bottom:s==="south"||!s,top:s==="north"||!s},preserveAspectRatio:e.nativeEvent&&e.nativeEvent.shiftKey,respectDirection:i}))}},emits:["resize","resize-end"]};ht.render=function(e,t,s,i,n,o){return g(),E("div",{ref:"box",class:o.classes.root,style:o.style},[K(e.$slots,"default"),k("div",null,[(g(!0),E(I,null,Ie(o.lineNodes,function(r){return g(),E(fe(r.component),{key:r.name,"default-class":r.class,"hover-class":r.hoverClass,"wrapper-class":r.wrapperClass,position:r.name,disabled:r.disabled,onDrag:function(l){return o.onHandlerDrag(l,r.horizontalDirection,r.verticalDirection)},onDragEnd:t[1]||(t[1]=function(l){return o.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])}),128))]),(g(!0),E(I,null,Ie(o.handlerNodes,function(r){return g(),E("div",{key:r.name,style:r.wrapperStyle,class:r.wrapperClass},[(g(),E(fe(r.component),{"default-class":r.class,"hover-class":r.hoverClass,"wrapper-class":r.wrapperClass,"horizontal-position":r.horizontalDirection,"vertical-position":r.verticalDirection,disabled:r.disabled,onDrag:function(l){return o.onHandlerDrag(l,r.horizontalDirection,r.verticalDirection)},onDragEnd:t[2]||(t[2]=function(l){return o.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)}),128))],6)};var Gs=H("vue-draggable-area"),dt={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:Gs()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(e){if(e.cancelable){var t=this.movable&&e.touches.length===1;t&&(this.touches=Q(e.touches)),(this.touchStarted||t)&&(e.preventDefault(),e.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(e){this.touches.length>=1&&(this.touchStarted?(this.processMove(e,e.touches),e.preventDefault(),e.stopPropagation()):ot({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:e.touches[0].clientX,y:e.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(e){if(this.movable&&e.button===0){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),s=t.left,i=t.top;this.anchor={x:e.clientX-s,y:e.clientY-i}},processMove:function(e,t){var s=Q(t);if(this.touches.length){var i=this.$refs.container.getBoundingClientRect(),n=i.left,o=i.top;this.touches.length===1&&s.length===1&&this.$emit("move",new $e({left:s[0].clientX-(n+this.anchor.x),top:s[0].clientY-(o+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};dt.render=function(e,t,s,i,n,o){return g(),E("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return o.onTouchStart&&o.onTouchStart.apply(o,arguments)}),onMousedown:t[2]||(t[2]=function(){return o.onMouseDown&&o.onMouseDown.apply(o,arguments)})},[K(e.$slots,"default")],544)};function Re(e){var t,s;return{rotate:e.rotate||0,flip:{horizontal:((t=e==null?void 0:e.flip)===null||t===void 0?void 0:t.horizontal)||!1,vertical:((s=e==null?void 0:e.flip)===null||s===void 0?void 0:s.vertical)||!1}}}function Zs(e){return new Promise(function(t,s){try{if(e)if(/^data:/i.test(e))t(function(a){a=a.replace(/^data:([^;]+);base64,/gim,"");for(var h=atob(a),d=h.length,u=new ArrayBuffer(d),m=new Uint8Array(u),p=0;p<d;p++)m[p]=h.charCodeAt(p);return u}(e));else if(/^blob:/i.test(e)){var i=new FileReader;i.onload=function(a){t(a.target.result)},o=e,r=function(a){i.readAsArrayBuffer(a)},(l=new XMLHttpRequest).open("GET",o,!0),l.responseType="blob",l.onload=function(){this.status!=200&&this.status!==0||r(this.response)},l.send()}else{var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===4&&(n.status===200||n.status===0?t(n.response):s("Warning: could not load an image to parse its orientation"),n=null)},n.onprogress=function(){n.getResponseHeader("content-type")!=="image/jpeg"&&n.abort()},n.withCredentials=!1,n.open("GET",e,!0),n.responseType="arraybuffer",n.send(null)}else s("Error: the image is empty")}catch(a){s(a)}var o,r,l})}function ut(e){var t=e.rotate,s=e.flip,i=e.scaleX,n=e.scaleY,o="";return o+=" rotate("+t+"deg) ",o+=" scaleX("+i*(s.horizontal?-1:1)+") ",o+=" scaleY("+n*(s.vertical?-1:1)+") "}function Js(e){try{var t,s=new DataView(e),i=void 0,n=void 0,o=void 0,r=void 0;if(s.getUint8(0)===255&&s.getUint8(1)===216)for(var l=s.byteLength,a=2;a+1<l;){if(s.getUint8(a)===255&&s.getUint8(a+1)===225){o=a;break}a++}if(o&&(i=o+10,function(p,x,f){var v,M="";for(v=x,f+=x;v<f;v++)M+=String.fromCharCode(p.getUint8(v));return M}(s,o+4,4)==="Exif")){var h=s.getUint16(i);if(((n=h===18761)||h===19789)&&s.getUint16(i+2,n)===42){var d=s.getUint32(i+4,n);d>=8&&(r=i+d)}}if(r){for(var u=s.getUint16(r,n),m=0;m<u;m++)if(a=r+12*m+2,s.getUint16(a,n)===274){a+=8,t=s.getUint16(a,n),s.setUint16(a,1,n);break}}return t}catch{return null}}function Je(e,t){var s=t.getBoundingClientRect(),i=s.left,n=s.top,o={left:0,top:0},r=0;return e.forEach(function(l){o.left+=(l.clientX-i)/e.length,o.top+=(l.clientY-n)/e.length}),e.forEach(function(l){r+=ot({x:o.left,y:o.top},{x:l.clientX-i,y:l.clientY-n})}),{centerMass:o,spread:r,count:e.length}}var mt={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=Ae(this.processEnd),this.touches=[]},methods:{processMove:function(e,t){if(this.touches.length){if(this.touches.length===1&&t.length===1)this.$emit("move",new oe({left:this.touches[0].clientX-t[0].clientX,top:this.touches[0].clientY-t[0].clientY}));else if(this.touches.length>1&&this.touchResize){var s=Je(t,this.$refs.container),i=this.oldGeometricProperties;i.count===s.count&&i.count>1&&this.$emit("resize",new oe({left:i.centerMass.left-s.centerMass.left,top:i.centerMass.top-s.centerMass.top},{factor:i.spread/s.spread,center:s.centerMass})),this.oldGeometricProperties=s}this.touches=t}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(e){return this.eventsFilter?this.eventsFilter(e,this.transforming)!==!1:(e.preventDefault(),e.stopPropagation(),!0)},onTouchStart:function(e){if(e.cancelable&&(this.touchMove||this.touchResize&&e.touches.length>1)&&this.processEvent(e)){var t=this.$refs.container,s=t.getBoundingClientRect(),i=s.left,n=s.top,o=s.bottom,r=s.right;this.touches=Q(e.touches).filter(function(l){return l.clientX>i&&l.clientX<r&&l.clientY>n&&l.clientY<o}),this.oldGeometricProperties=Je(this.touches,t)}},onTouchEnd:function(e){e.touches.length===0&&(this.touches=[],this.processEnd())},onTouchMove:function(e){var t=this;if(this.touches.length){var s=Q(e.touches).filter(function(i){return!i.identifier||t.touches.find(function(n){return n.identifier===i.identifier})});this.processEvent(e)&&(this.processMove(e,s),this.processStart())}},onMouseDown:function(e){if(this.mouseMove&&"buttons"in e&&e.buttons===1&&this.processEvent(e)){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.processStart()}},onMouseMove:function(e){this.touches.length&&this.processEvent(e)&&this.processMove(e,[{clientX:e.clientX,clientY:e.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(e){if(this.wheelResize&&this.processEvent(e)){var t=this.$refs.container.getBoundingClientRect(),s=t.left,i=t.top,n=1+this.wheelResize.ratio*(r=e.deltaY||e.detail||e.wheelDelta,(l=+r)==0||st(l)?l:l>0?1:-1),o={left:e.clientX-s,top:e.clientY-i};this.$emit("resize",new oe({},{factor:n,center:o})),this.touches.length||this.debouncedProcessEnd()}var r,l}},emits:["resize","move","transform-end"]};mt.render=function(e,t,s,i,n,o){return g(),E("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return o.onTouchStart&&o.onTouchStart.apply(o,arguments)}),onMousedown:t[2]||(t[2]=function(){return o.onMouseDown&&o.onMouseDown.apply(o,arguments)}),onWheel:t[3]||(t[3]=function(){return o.onWheel&&o.onWheel.apply(o,arguments)})},[K(e.$slots,"default")],544)};var ke={components:{TransformableImage:mt},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"]};ke.render=function(e,t,s,i,n,o){var r=$("transformable-image");return g(),E(r,{"touch-move":s.touchMove,"touch-resize":s.touchResize,"mouse-move":s.mouseMove,"wheel-resize":s.wheelResize,onMove:t[1]||(t[1]=function(l){return e.$emit("move",l)}),onResize:t[2]||(t[2]=function(l){return e.$emit("resize",l)})},{default:X(function(){return[K(e.$slots,"default")]}),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])};var me=H("vue-preview"),pt={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:me({fill:this.fill}),wrapper:me("wrapper"),imageWrapper:me("image-wrapper"),image:D(me("image"),this.imageClass)}},style:function(){if(this.fill)return{};var e={};return this.width&&(e.width="".concat(this.size.width,"px")),this.height&&(e.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},wrapperStyle:function(){var e={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},imageStyle:function(){if(this.coordinates&&this.image){var e=this.coordinates.width/this.size.width,t=_(_({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/e,scaleY:1/e}),s=this.imageSize.width,i=this.imageSize.height,n=lt({width:s,height:i},t.rotate),o={width:"".concat(s,"px"),height:"".concat(i,"px"),left:"0px",top:"0px"},r={rotate:{left:(s-n.width)*t.scaleX/2,top:(i-n.height)*t.scaleY/2},scale:{left:(1-t.scaleX)*s/2,top:(1-t.scaleY)*i/2}};return o.transform=`translate(
				`.concat(-this.coordinates.left/e-r.rotate.left-r.scale.left,"px,").concat(-this.coordinates.top/e-r.rotate.top-r.scale.top,"px) ")+ut(t),this.transitions&&this.transitions.enabled&&(o.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),o}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(e){(e.width||e.height)&&this.onChangeImage()}},mounted:function(){var e=this;this.onChangeImage(),this.$refs.image.addEventListener("load",function(){e.refreshImage()}),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var e=this.$refs.image;this.calculatedImageSize.height=e.naturalHeight,this.calculatedImageSize.width=e.naturalWidth},refresh:function(){var e=this.$refs.root;this.width||(this.calculatedSize.width=e.clientWidth),this.height||(this.calculatedSize.height=e.clientHeight)},onChangeImage:function(){var e=this.$refs.image;e&&e.complete&&this.refreshImage(),this.refresh()}}};pt.render=function(e,t,s,i,n,o){return g(),E("div",{ref:"root",class:o.classes.root,style:o.style},[k("div",{ref:"wrapper",class:o.classes.wrapper,style:o.wrapperStyle},[V(k("img",{ref:"image",src:s.image&&s.image.src,class:o.classes.image,style:o.imageStyle},null,14,["src"]),[[le,s.image&&s.image.src]])],6)],6)};var ft={components:{Preview:pt},inheritAttrs:!1};ft.render=function(e,t,s,i,n,o){var r=$("preview");return g(),E(r,Ke(e.$attrs,{fill:!0}),null,16)};var Me=H("vue-rectangle-stencil"),gt={name:"RectangleStencil",components:{StencilPreview:ft,BoundingBox:ht,DraggableArea:dt},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return Le}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return We}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:D(Me({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:D(Me("preview"),this.previewClass),boundingBox:D(Me("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,t=e.height,s=e.width,i=e.left,n=e.top,o={width:"".concat(s,"px"),height:"".concat(t,"px"),transform:"translate(".concat(i,"px, ").concat(n,"px)")};return this.transitions&&this.transitions.enabled&&(o.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),o}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"]};gt.render=function(e,t,s,i,n,o){var r=$("stencil-preview"),l=$("draggable-area"),a=$("bounding-box");return g(),E("div",{class:o.classes.stencil,style:o.style},[k(a,{width:s.stencilCoordinates.width,height:s.stencilCoordinates.height,transitions:s.transitions,class:o.classes.boundingBox,handlers:s.handlers,"handlers-component":s.handlersComponent,"handlers-classes":s.handlersClasses,"handlers-wrappers-classes":s.handlersWrappersClasses,lines:s.lines,"lines-component":s.linesComponent,"lines-classes":s.linesClasses,"lines-wrappers-classes":s.linesWrappersClasses,resizable:s.resizable,onResize:o.onResize,onResizeEnd:o.onResizeEnd},{default:X(function(){return[k(l,{movable:s.movable,onMove:o.onMove,onMoveEnd:o.onMoveEnd},{default:X(function(){return[k(r,{image:s.image,coordinates:s.coordinates,width:s.stencilCoordinates.width,height:s.stencilCoordinates.height,class:o.classes.preview,transitions:s.transitions},null,8,["image","coordinates","width","height","class","transitions"])]}),_:1},8,["movable","onMove","onMoveEnd"])]}),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var Qs=["transitions"],Y=H("vue-advanced-cropper"),vt={name:"Cropper",components:{BackgroundWrapper:ke},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return gt}},backgroundWrapperComponent:{type:[Object,String],default:function(){return ke}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(e){return ks.indexOf(e)!==-1}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(e){return!(typeof e=="string"&&e!=="fill"&&e!=="fit")}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(e){var t=e.event,s=e.coordinates,i=e.aspectRatio,n=e.positionRestrictions,o=e.sizeRestrictions,r=b(b({},s),{right:s.left+s.width,bottom:s.top+s.height}),l=t.params||{},a=b({},t.directions),h=l.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};o.widthFrozen&&(a.left=0,a.right=0),o.heightFrozen&&(a.top=0,a.bottom=0),F.forEach(function(G){h[G]||(a[G]=0)});var d=q(r,a=Ze({coordinates:r,directions:a,sizeRestrictions:o,positionRestrictions:n})).width,u=q(r,a).height,m=l.preserveRatio?R(r):ye(d/u,i);if(m){var p=l.respectDirection;if(p||(p=r.width>=r.height||m===1?"width":"height"),p==="width"){var x=d/m-r.height;if(h.top&&h.bottom){var f=a.top,v=a.bottom;a.bottom=ue(x,v,f),a.top=ue(x,f,v)}else h.bottom?a.bottom=x:h.top?a.top=x:h.right?a.right=0:h.left&&(a.left=0)}else if(p==="height"){var M=r.width-u*m;if(h.left&&h.right){var w=a.left,S=a.right;a.left=-ue(M,w,S),a.right=-ue(M,S,w)}else h.left?a.left=-M:h.right?a.right=-M:h.top?a.top=0:h.bottom&&(a.bottom=0)}a=Ze({directions:a,coordinates:r,sizeRestrictions:o,positionRestrictions:n,preserveRatio:!0,compensate:l.compensate})}return d=q(r,a).width,u=q(r,a).height,(m=l.preserveRatio?R(r):ye(d/u,i))&&Math.abs(m-d/u)>.001&&F.forEach(function(G){h[G]||(a[G]=0)}),De({event:new $e({left:-a.left,top:-a.top}),coordinates:{width:s.width+a.right+a.left,height:s.height+a.top+a.bottom,left:s.left,top:s.top},positionRestrictions:n})}},moveAlgorithm:{type:Function,default:De},initStretcher:{type:Function,default:function(e){var t=e.stretcher,s=e.imageSize,i=R(s);t.style.width=s.width+"px",t.style.height=t.clientWidth/i+"px",t.style.width=t.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(e){var t=e.visibleArea,s=e.coordinates,i=e.aspectRatio,n=e.sizeRestrictions,o=e.positionRestrictions,r=b(b({},s),U({width:s.width,height:s.height,aspectRatio:i,sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minHeight:Math.min(t.height,n.minHeight),minWidth:Math.min(t.width,n.minWidth)}}));return r=T(r=j(r,te(P(s),P(r))),be(N(t),o))}},fitVisibleArea:{type:Function,default:function(e){var t=e.visibleArea,s=e.boundaries,i=e.getAreaRestrictions,n=e.coordinates,o=b({},t);o.height=o.width/R(s),o.top+=(t.height-o.height)/2,(n.height-o.height>0||n.width-o.width>0)&&(o=W(o,Math.max(n.height/o.height,n.width/o.width)));var r=ge(se(n,N(o=W(o,ve(o,i({visibleArea:o,type:"resize"}))))));return o.width<n.width&&(r.left=0),o.height<n.height&&(r.top=0),o=T(o=j(o,r),i({visibleArea:o,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.visibleArea,s=e.boundaries,i=e.imageSize,n=e.imageRestriction,o=e.type,r={};return n==="fill-area"?r={left:0,top:0,right:i.width,bottom:i.height}:n==="fit-area"&&(R(s)>R(i)?(r={top:0,bottom:i.height},t&&o==="move"&&(t.width>i.width?(r.left=-(t.width-i.width)/2,r.right=i.width-r.left):(r.left=0,r.right=i.width))):(r={left:0,right:i.width},t&&o==="move"&&(t.height>i.height?(r.top=-(t.height-i.height)/2,r.bottom=i.height-r.top):(r.top=0,r.bottom=i.height)))),r}},sizeRestrictionsAlgorithm:{type:Function,default:function(e){return{minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.imageSize,s={};return e.imageRestriction!=="none"&&(s={left:0,top:0,right:t.width,bottom:t.height}),s}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:_({},Ye)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var e=function(t){return t*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(e))+Math.abs(this.imageAttributes.height*Math.sin(e)),height:Math.abs(this.imageAttributes.width*Math.sin(e))+Math.abs(this.imageAttributes.height*Math.cos(e))}},initialized:function(){return!!(this.visibleArea&&this.imageLoaded)},settings:function(){var e=Se(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:Se(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:e}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var e=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:C(this.minWidth)?0:he(this.minWidth),minHeight:C(this.minHeight)?0:he(this.minHeight),maxWidth:C(this.maxWidth)?1/0:he(this.maxWidth),maxHeight:C(this.maxHeight)?1/0:he(this.maxHeight)});if(e=function(i){var n=i.areaRestrictions,o=i.sizeRestrictions;i.imageSize;var r=i.boundaries,l=i.positionRestrictions;i.imageRestriction;var a=b(b({},o),{minWidth:o.minWidth!==void 0?o.minWidth:0,minHeight:o.minHeight!==void 0?o.minHeight:0,maxWidth:o.maxWidth!==void 0?o.maxWidth:1/0,maxHeight:o.maxHeight!==void 0?o.maxHeight:1/0});l.left!==void 0&&l.right!==void 0&&(a.maxWidth=Math.min(a.maxWidth,l.right-l.left)),l.bottom!==void 0&&l.top!==void 0&&(a.maxHeight=Math.min(a.maxHeight,l.bottom-l.top));var h=Ee(n),d=rt(r,h);return h.width<1/0&&(!a.maxWidth||a.maxWidth>d.width)&&(a.maxWidth=Math.min(a.maxWidth,d.width)),h.height<1/0&&(!a.maxHeight||a.maxHeight>d.height)&&(a.maxHeight=Math.min(a.maxHeight,d.height)),a.minWidth>a.maxWidth&&(a.minWidth=a.maxWidth,a.widthFrozen=!0),a.minHeight>a.maxHeight&&(a.minHeight=a.maxHeight,a.heightFrozen=!0),a}({sizeRestrictions:e,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var t=this.getStencilSize(),s=Ee(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));e.maxWidth=Math.min(e.maxWidth,s.width*t.width/this.boundaries.width),e.maxHeight=Math.min(e.maxHeight,s.height*t.height/this.boundaries.height),e.maxWidth<e.minWidth&&(e.minWidth=e.maxWidth),e.maxHeight<e.minHeight&&(e.minHeight=e.maxHeight)}return e}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:Y(),image:D(Y("image"),this.imageClass),stencil:Y("stencil"),boundaries:D(Y("boundaries"),this.boundariesClass),stretcher:D(Y("stretcher")),background:D(Y("background"),this.backgroundClass),foreground:D(Y("foreground"),this.foregroundClass),imageWrapper:D(Y("image-wrapper")),cropperWrapper:D(Y("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var e=this.coordinates,t=e.width,s=e.height,i=e.left,n=e.top;return{width:t/this.coefficient,height:s/this.coefficient,left:(i-this.visibleArea.left)/this.coefficient,top:(n-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var e={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(e.opacity="0"),e},imageStyle:function(){var e=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},t={left:(e.width-this.imageSize.width)/(2*this.coefficient),top:(e.height-this.imageSize.height)/(2*this.coefficient)},s={left:(1-1/this.coefficient)*e.width/2,top:(1-1/this.coefficient)*e.height/2},i=_(_({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/e.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/e.height)}),n={width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-t.left-s.left-this.imageTransforms.translateX,"px, ").concat(-t.top-s.top-this.imageTransforms.translateY,"px)")+ut(i)};return this.transitionsOptions.enabled&&(n.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),n}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var e=this;this.$nextTick(function(){e.resetCoordinates(),e.runAutoZoom("setCoordinates"),e.onChange()})},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(e,t){["aspectRatio","minAspectRatio","maxAspectRatio"].find(function(s){return e[s]!==t[s]})&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=Ae(this.update,this.debounce),this.debouncedDisableTransitions=Ae(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var e=this.initialized?this.prepareResult(_({},this.coordinates)):this.defaultCoordinates(),t={rotate:this.imageTransforms.rotate%360,flip:_({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var s=this;return{image:this.image,coordinates:e,visibleArea:this.visibleArea?_({},this.visibleArea):null,imageTransforms:t,get canvas(){return s.canvas?s.getCanvas():void 0}}}return{image:this.image,coordinates:e,visibleArea:this.visibleArea?_({},this.visibleArea):null,canvas:void 0,imageTransforms:t}},zoom:function(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=s.transitions,n=i===void 0||i;this.onManipulateImage(new oe({},{factor:1/e,center:t}),{normalize:!1,transitions:n})},move:function(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=s.transitions,n=i===void 0||i;this.onManipulateImage(new oe({left:e||0,top:t||0}),{normalize:!1,transitions:n})},setCoordinates:function(e){var t=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.autoZoom,n=i===void 0||i,o=s.transitions,r=o===void 0||o;this.$nextTick(function(){t.imageLoaded?(t.transitionsActive||(r&&t.enableTransitions(),t.coordinates=t.applyTransform(e),n&&t.runAutoZoom("setCoordinates"),r&&t.debouncedDisableTransitions()),t.onChange()):t.delayedTransforms=e})},refresh:function(){var e=this,t=this.$refs.image;if(this.src&&t)return this.initialized?this.updateVisibleArea().then(function(){e.onChange()}):this.resetVisibleArea().then(function(){e.onChange()})},reset:function(){var e=this;return this.resetVisibleArea().then(function(){e.onChange(!1)})},awaitRender:function(e){var t=this;this.awaiting||(this.awaiting=!0,this.$nextTick(function(){e(),t.awaiting=!1}))},prepareResult:function(e){return this.roundResult?function(t){var s=t.coordinates,i=t.sizeRestrictions,n=t.positionRestrictions,o={width:Math.round(s.width),height:Math.round(s.height),left:Math.round(s.left),top:Math.round(s.top)};return o.width>i.maxWidth?o.width=Math.floor(s.width):o.width<i.minWidth&&(o.width=Math.ceil(s.width)),o.height>i.maxHeight?o.height=Math.floor(s.height):o.height<i.minHeight&&(o.height=Math.ceil(s.height)),T(o,n)}(_(_({},this.getPublicProperties()),{},{positionRestrictions:de(this.positionRestrictions,this.visibleArea),coordinates:e})):e},processAutoZoom:function(e,t,s,i){var n=this.autoZoomAlgorithm;n||(n=this.stencilSize?Ts:this.autoZoom?js:$s);var o=n({event:{type:e,params:i},visibleArea:t,coordinates:s,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return _(_({},o),{},{changed:!Ue(o.visibleArea,t)||!Ue(o.coordinates,s)})},runAutoZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.transitions,i=s!==void 0&&s,n=_s(t,Qs),o=this.processAutoZoom(e,this.visibleArea,this.coordinates,n),r=o.visibleArea,l=o.coordinates,a=o.changed;i&&a&&this.enableTransitions(),this.visibleArea=r,this.coordinates=l,i&&a&&this.debouncedDisableTransitions()},normalizeEvent:function(e){return function(t){var s=t.event,i=t.visibleArea,n=t.coefficient;if(s.type==="manipulateImage")return b(b({},s),{move:{left:s.move&&s.move.left?n*s.move.left:0,top:s.move&&s.move.top?n*s.move.top:0},scale:{factor:s.scale&&s.scale.factor?s.scale.factor:1,center:s.scale&&s.scale.center?{left:s.scale.center.left*n+i.left,top:s.scale.center.top*n+i.top}:null}});if(s.type==="resize"){var o=b(b({},s),{directions:b({},s.directions)});return F.forEach(function(l){o.directions[l]*=n}),o}if(s.type==="move"){var r=b(b({},s),{directions:b({},s.directions)});return Ds.forEach(function(l){r.directions[l]*=n}),r}return s}(_(_({},this.getPublicProperties()),{},{event:e}))},getCanvas:function(){if(this.$refs.canvas){var e=this.$refs.canvas,t=this.$refs.image,s=this.imageTransforms.rotate!==0||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(l,a,h){var d=h.rotate,u=h.flip,m={width:a.naturalWidth,height:a.naturalHeight},p=lt(m,d),x=l.getContext("2d");l.height=p.height,l.width=p.width,x.save();var f=Z(P(b({left:0,top:0},m)),d);return x.translate(-(f.left-p.width/2),-(f.top-p.height/2)),x.rotate(d*Math.PI/180),x.translate(u.horizontal?m.width:0,u.vertical?m.height:0),x.scale(u.horizontal?-1:1,u.vertical?-1:1),x.drawImage(a,0,0,m.width,m.height),x.restore(),l}(this.$refs.sourceCanvas,t,this.imageTransforms):t,i=_({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),n=function(l){return l.find(function(a){return h=a,!Number.isNaN(parseFloat(h))&&isFinite(h);var h})},o=U({sizeRestrictions:{minWidth:n([i.width,i.minWidth])||0,minHeight:n([i.height,i.minHeight])||0,maxWidth:n([i.width,i.maxWidth])||1/0,maxHeight:n([i.height,i.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(i.maxArea&&o.width*o.height>i.maxArea){var r=Math.sqrt(i.maxArea/(o.width*o.height));o={width:Math.round(r*o.width),height:Math.round(r*o.height)}}return function(l,a,h,d,u){l.width=d?d.width:h.width,l.height=d?d.height:h.height;var m=l.getContext("2d");m.clearRect(0,0,l.width,l.height),u&&(u.imageSmoothingEnabled&&(m.imageSmoothingEnabled=u.imageSmoothingEnabled),u.imageSmoothingQuality&&(m.imageSmoothingQuality=u.imageSmoothingQuality),u.fillColor&&(m.fillStyle=u.fillColor,m.fillRect(0,0,l.width,l.height),m.save()));var p=h.left<0?-h.left:0,x=h.top<0?-h.top:0;m.drawImage(a,h.left+p,h.top+x,h.width,h.height,p,x,l.width,l.height)}(e,s,this.coordinates,o,i),e}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],s=this.visibleArea&&t?Cs(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,i=this.visibleArea&&t?de(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return Ps({transform:e,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:s,positionRestrictions:i,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var e=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var t=this.defaultSize;t||(t=this.stencilSize?Ws:Ls);var s=this.sizeRestrictions;s.minWidth,s.minHeight,s.maxWidth,s.maxHeight;var i=ee(t)?t({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):t,n=this.defaultPosition||Os,o=[i,function(r){var l=r.coordinates;return _({},ee(n)?n({coordinates:l,imageSize:e.imageSize,visibleArea:e.visibleArea}):e.defaultPosition)}];this.delayedTransforms&&o.push.apply(o,Q(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(o,!0),this.delayedTransforms=null}},clearImage:function(){var e=this;this.imageLoaded=!1,setTimeout(function(){var t=e.$refs.stretcher;t&&(t.style.height="auto",t.style.width="auto"),e.coordinates=e.defaultCoordinates(),e.boundaries={width:0,height:0}},this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var e=this,t=this.$refs.stretcher,s=this.$refs.cropper;return this.initStretcher({cropper:s,stretcher:t,imageSize:this.imageSize}),this.$nextTick().then(function(){var i={cropper:s,imageSize:e.imageSize};if(ee(e.defaultBoundaries)?e.boundaries=e.defaultBoundaries(i):e.defaultBoundaries==="fit"?e.boundaries=function(n){var o=n.cropper,r=n.imageSize,l=o.clientHeight,a=o.clientWidth,h=l,d=r.width*l/r.height;return d>a&&(d=a,h=r.height*a/r.width),{width:d,height:h}}(i):e.boundaries=function(n){var o=n.cropper;return{width:o.clientWidth,height:o.clientHeight}}(i),!e.boundaries.width||!e.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")})},resetVisibleArea:function(){var e=this;return this.appliedImageTransforms=_(_({},this.defaultImageTransforms),{},{flip:_({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then(function(){e.priority!=="visible-area"&&(e.visibleArea=null,e.resetCoordinates());var t,s,i,n,o,r,l=e.defaultVisibleArea||Is;e.visibleArea=ee(l)?l({imageSize:e.imageSize,boundaries:e.boundaries,coordinates:e.priority!=="visible-area"?e.coordinates:null,getAreaRestrictions:e.getAreaRestrictions,stencilSize:e.getStencilSize()}):e.defaultVisibleArea,e.visibleArea=(t={visibleArea:e.visibleArea,boundaries:e.boundaries,getAreaRestrictions:e.getAreaRestrictions},s=t.visibleArea,i=t.boundaries,n=t.getAreaRestrictions,o=b({},s),r=R(i),o.width/o.height!==r&&(o.height=o.width/r),T(o,n({visibleArea:o,type:"move"}))),e.priority==="visible-area"?e.resetCoordinates():e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("resetVisibleArea")}).catch(function(){e.visibleArea=null})},updateVisibleArea:function(){var e=this;return this.updateBoundaries().then(function(){e.visibleArea=e.fitVisibleArea({imageSize:e.imageSize,boundaries:e.boundaries,visibleArea:e.visibleArea,coordinates:e.coordinates,getAreaRestrictions:e.getAreaRestrictions}),e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("updateVisibleArea")}).catch(function(){e.visibleArea=null})},onChange:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];e&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var e,t=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(n){if(Ve(n))return!1;var o=window.location,r=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(n)||[],l={protocol:r[1]||"",host:r[2]||"",port:r[3]||""},a=function(h){return h.port||((h.protocol||o.protocol)==="http"?80:433)};return!(!l.protocol&&!l.host&&!l.port||l.protocol&&l.protocol==o.protocol&&l.host&&l.host==o.host&&l.host&&a(l)==a(o))}(this.src)){var s=C(this.crossOrigin)?this.canvas:this.crossOrigin;s===!0&&(s="anonymous"),this.imageAttributes.crossOrigin=s||null}if(this.checkOrientation){var i=(e=this.src,new Promise(function(n){Zs(e).then(function(o){var r=Js(o);n(o?{source:e,arrayBuffer:o,orientation:r}:{source:e,arrayBuffer:null,orientation:null})}).catch(function(o){console.warn(o),n({source:e,arrayBuffer:null,orientation:null})})}));setTimeout(function(){i.then(t.onParseImage)},this.transitionTime)}else setTimeout(function(){t.onParseImage({source:t.src})},this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var e=this,t=this.$refs.image;t&&!this.imageLoaded&&(this.imageAttributes.height=t.naturalHeight,this.imageAttributes.width=t.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then(function(){e.$emit("ready"),e.onChange(!1)}))},onParseImage:function(e){var t=this,s=e.source,i=e.arrayBuffer,n=e.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,i&&n&&n>1?it(s)||!Ve(s)?(this.imageAttributes.src=URL.createObjectURL(new Blob([i])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(o){for(var r=[],l=new Uint8Array(o);l.length>0;){var a=l.subarray(0,8192);r.push(String.fromCharCode.apply(null,Array.from?Array.from(a):a.slice())),l=l.subarray(8192)}return"data:image/jpeg;base64,"+btoa(r.join(""))}(i):this.imageAttributes.src=s,ee(this.defaultTransforms)?this.appliedImageTransforms=Re(this.defaultTransforms()):pe(this.defaultTransforms)?this.appliedImageTransforms=Re(this.defaultTransforms):this.appliedImageTransforms=function(o){var r=Re({});if(o)switch(o){case 2:r.flip.horizontal=!0;break;case 3:r.rotate=-180;break;case 4:r.flip.vertical=!0;break;case 5:r.rotate=90,r.flip.vertical=!0;break;case 6:r.rotate=90;break;case 7:r.rotate=90,r.flip.horizontal=!0;break;case 8:r.rotate=-90}return r}(n),this.defaultImageTransforms=_(_({},this.appliedImageTransforms),{},{flip:_({},this.appliedImageTransforms.flip)}),this.$nextTick(function(){var o=t.$refs.image;o&&o.complete&&(function(r){return!!r.naturalWidth}(o)?t.onSuccessLoadImage():t.onFailLoadImage())})},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(e){var t=this;this.transitionsOptions.enabled||this.awaitRender(function(){t.coordinates=t.moveAlgorithm(_(_({},t.getPublicProperties()),{},{positionRestrictions:de(t.positionRestrictions,t.visibleArea),coordinates:t.coordinates,event:t.normalizeEvent(e)})),t.onChange()})},onResize:function(e){var t=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender(function(){var s=t.sizeRestrictions,i=Math.min(t.coordinates.width,t.coordinates.height,20*t.coefficient);t.coordinates=t.resizeAlgorithm(_(_({},t.getPublicProperties()),{},{positionRestrictions:de(t.positionRestrictions,t.visibleArea),sizeRestrictions:{maxWidth:Math.min(s.maxWidth,t.visibleArea.width),maxHeight:Math.min(s.maxHeight,t.visibleArea.height),minWidth:Math.max(s.minWidth,i),minHeight:Math.max(s.minHeight,i)},event:t.normalizeEvent(e)})),t.onChange(),t.ticking=!1})},onManipulateImage:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.transitionsOptions.enabled){var s=t.transitions,i=s!==void 0&&s,n=t.normalize,o=n===void 0||n;i&&this.enableTransitions();var r=Hs(_(_({},this.getPublicProperties()),{},{event:o?this.normalizeEvent(e):e,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),l=r.visibleArea,a=r.coordinates;this.visibleArea=l,this.coordinates=a,this.runAutoZoom("manipulateImage"),this.onChange(),i&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.visibleArea,s=e.type,i=s===void 0?"move":s;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:t,type:i})},getAspectRatio:function(e){var t,s,i=this.stencilProps,n=i.aspectRatio,o=i.minAspectRatio,r=i.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var l=this.$refs.stencil.aspectRatios();t=l.minimum,s=l.maximum}if(C(t)&&(t=C(n)?o:n),C(s)&&(s=C(n)?r:n),!e&&(C(t)||C(s))){var a=this.getStencilSize(),h=a?R(a):null;C(t)&&(t=Ne(h)?h:void 0),C(s)&&(s=Ne(h)?h:void 0)}return{minimum:t,maximum:s}},getStencilSize:function(){if(this.stencilSize)return e={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},t=e.boundaries,s=e.stencilSize,i=e.aspectRatio,ye(R(n=ee(s)?s({boundaries:t,aspectRatio:i}):s),i)&&(n=U({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:n.width,height:n.height,aspectRatio:{minimum:i.minimum,maximum:i.maximum}})),(n.width>t.width||n.height>t.height)&&(n=U({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:n.width,height:n.height,aspectRatio:{minimum:R(n),maximum:R(n)}})),n;var e,t,s,i,n},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return _({},Ye)},flip:function(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=s.transitions,n=i===void 0||i;if(!this.transitionsActive){n&&this.enableTransitions();var o=_({},this.imageTransforms.flip),r=Bs({flip:{horizontal:e?!o.horizontal:o.horizontal,vertical:t?!o.vertical:o.vertical},previousFlip:o,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),l=r.visibleArea,a=r.coordinates;e&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),t&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=l,this.coordinates=a,this.onChange(),n&&this.debouncedDisableTransitions()}},rotate:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.transitions,i=s===void 0||s;if(!this.transitionsActive){i&&this.enableTransitions();var n=_({},this.imageSize);this.appliedImageTransforms.rotate+=e;var o=qs({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:n,imageSize:this.imageSize,angle:e,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),r=o.visibleArea,l=o.coordinates,a=this.processAutoZoom("rotateImage",r,l);r=a.visibleArea,l=a.coordinates,this.visibleArea=r,this.coordinates=l,this.onChange(),i&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},Ks={key:0,ref:"canvas",style:{display:"none"}},eo={key:1,ref:"sourceCanvas",style:{display:"none"}};vt.render=function(e,t,s,i,n,o){return g(),E("div",{ref:"cropper",class:o.classes.cropper},[k("div",{ref:"stretcher",class:o.classes.stretcher},null,2),k("div",{class:o.classes.boundaries,style:o.boundariesStyle},[(g(),E(fe(s.backgroundWrapperComponent),{class:o.classes.cropperWrapper,"wheel-resize":o.settings.resizeImage.wheel,"touch-resize":o.settings.resizeImage.touch,"touch-move":o.settings.moveImage.touch,"mouse-move":o.settings.moveImage.mouse,onMove:o.onManipulateImage,onResize:o.onManipulateImage},{default:X(function(){return[k("div",{class:o.classes.background,style:o.boundariesStyle},null,6),k("div",{class:o.classes.imageWrapper},[k("img",{ref:"image",crossorigin:n.imageAttributes.crossOrigin,src:n.imageAttributes.src,class:o.classes.image,style:o.imageStyle,onMousedown:t[1]||(t[1]=bt(function(){},["prevent"]))},null,46,["crossorigin","src"])],2),k("div",{class:o.classes.foreground,style:o.boundariesStyle},null,6),V((g(),E(fe(s.stencilComponent),Ke({ref:"stencil",image:o.image,coordinates:n.coordinates,"stencil-coordinates":o.stencilCoordinates,transitions:o.transitionsOptions},s.stencilProps,{onResize:o.onResize,onResizeEnd:o.onResizeEnd,onMove:o.onMove,onMoveEnd:o.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[le,n.imageLoaded]]),s.canvas?(g(),E("canvas",Ks,null,512)):A("",!0),s.canvas?(g(),E("canvas",eo,null,512)):A("",!0)]}),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};const to={props:{zoom:{type:Number,default:0}},data(){return{focus:!1}},mounted(){window.addEventListener("mouseup",this.onStop,{passive:!1}),window.addEventListener("mousemove",this.onDrag,{passive:!1}),window.addEventListener("touchmove",this.onDrag,{passive:!1}),window.addEventListener("touchend",this.onStop,{passive:!1})},destroyed(){window.removeEventListener("mouseup",this.onStop),window.removeEventListener("mousemove",this.onDrag),window.removeEventListener("touchmove",this.onDrag),window.removeEventListener("touchend",this.onStop)},methods:{onDrag(e){if(this.focus){const t=e.touches?e.touches[0].clientX:e.clientX,s=this.$refs.line;if(s){const{left:i,width:n}=s.getBoundingClientRect();this.$emit("change",Math.min(1,Math.max(0,t-i)/n))}e.preventDefault&&e.preventDefault()}},onStop(){this.focus=!1},onStart(e){this.focus=!0,this.onDrag(e)}}},io={class:"twitter-navigation"},so={class:"twitter-navigation__wrapper"},oo={class:"twitter-navigation__line"};function no(e,t,s,i,n,o){return g(),y("div",io,[c("div",so,[c("div",{class:"twitter-navigation__line-wrapper",ref:"line",onMousedown:t[0]||(t[0]=(...r)=>o.onStart&&o.onStart(...r)),onTouchstart:t[1]||(t[1]=(...r)=>o.onStart&&o.onStart(...r))},[c("div",oo,[c("div",{class:"twitter-navigation__fill",style:He({flexGrow:s.zoom})},null,4),c("div",{class:B(["twitter-navigation__circle",{"twitter-navigation__circle--focus":n.focus}]),style:He({left:`${s.zoom*100}%`})},[c("div",{class:B(["twitter-navigation__inner-circle",{"twitter-navigation__inner-circle--focus":n.focus}])},null,2)],6)])],544)])])}const ao=J(to,[["render",no]]),ro=Pe("modalImageCustom",{state:()=>({isActive:!1,img:null,typeImg:null}),actions:{openModal({active:e,img:t,type:s}){console.log("active",e),this.isActive=e,this.img=t,this.typeImg=s},closeModal(e){this.isActive=e}}});const lo={props:{form:{type:Object},img:{type:Object}},setup(e){const t=z(!1),s=ro(),i=z(e.form),n=z(0),o=z(null),r=z(s.img),l=({imageSize:f})=>({width:Math.min(f.height,f.width),height:Math.min(f.height,f.width)}),a=({boundaries:f})=>({width:Math.min(f.height,f.width)-48,height:Math.min(f.height,f.width)-48}),h=async f=>{var v=f.target;let M=v.files[0].type.split("/");if(M[1]=="jpg"||M[1]=="jpeg"||M[1]=="png"||M[1]=="webp"){if(v.files&&v.files[0])try{const w=await p(v.files[0]);return w&&(r.value=w,t.value=!1),w}catch(w){t.value=!1,console.error(w);return}}else wt("File not supported,allowed files (jpg,jpeg,png,webp)",{type:"error"})},d=f=>{const v=o.value;if(v){const{coordinates:M,imageSize:w}=v;w.width/w.height>M.width/M.height?n.value=(v.imageSize.height-v.coordinates.height)/(v.imageSize.height-v.sizeRestrictions.minHeight):n.value=(v.imageSize.width-v.coordinates.width)/(v.imageSize.width-v.sizeRestrictions.minWidth)}},u=f=>{const v=o.value;if(v)if(v.imageSize.height<v.imageSize.width){const M=v.sizeRestrictions.minHeight,w=v.imageSize.height;v.zoom((w-n.value*(w-M))/(w-f*(w-M)))}else{const M=v.sizeRestrictions.minWidth,w=v.imageSize.width;v.zoom((w-n.value*(w-M))/(w-f*(w-M)))}},m=()=>{const{canvas:f}=o.value.getResult();f&&f.toBlob(async v=>{let M=s.img.name;var w=new File([v],M,{lastModified:new Date().getTime(),type:v.type});let S=f.toDataURL("image/jpeg");switch(s.typeImg){case"document":i.value.previewDocument=S,i.value.document=w;break;case"driver":i.value.previewDriver=S,i.value.driverDocument=w;break;case"frontPhoto":i.value.previewFrontPhoto=S,i.value.frontPhoto=w;break;case"front":i.value.previewFront=S,i.value.front=w;break;case"driverSide":i.value.previewDriverSide=S,i.value.driverSide=w;break;case"back":i.value.previewBack=S,i.value.back=w;break;case"passengerSide":i.value.previewPassengerSide=S,i.value.passengerSide=w;break;case"tireAndRim":i.value.previewTireAndRim=S,i.value.tireAndRim=w;break;case"driversDisplay":i.value.previewDriversDisplay=S,i.value.driversDisplay=w;break;case"driversSide":i.value.previewDriversSide=S,i.value.driversSide=w;break;case"centerConsole":i.value.previewCenterConsole=S,i.value.centerConsole=w;break;case"rearSeats":i.value.previewRearSeats=S,i.value.rearSeats=w;break;case"vehicleDamage":i.value.previewVehicleDamage=S,i.value.vehicleDamage=w;break;case"additionalDocuments":i.value.previewAdditionalDocuments=S,i.value.additionalDocuments=w;break;case"vehicleVideo":i.value.previewVehicleVideo=S,i.value.vehicleVideo=w;break}s.closeModal(!1)},"image/png")},p=f=>new Promise((v,M)=>{const w=new FileReader;w.readAsDataURL(f),w.onload=()=>v(w.result),w.onerror=M});async function x(f){t.value=!0;try{const v=await p(f);return v&&(r.value=v,t.value=!1),v}catch(v){t.value=!1,console.error(v);return}}return et(()=>{s.img&&x(s.img)}),{onZoom:u,onChange:d,uploadImage:h,stencilSize:a,defaultSize:l,loading:t,statusModalImage:s,croppers:o,zoom:n,imgPreview:r,saveEditPhoto:m}},components:{Cropper:vt,Navigation:ao}},co={class:"fixed z-[100] inset-0 flex items-end md:items-center md:justify-center bg-base-black bg-opacity-50"},ho={class:"max-w-md w-full overflow-auto bg-white rounded-lg shadow-xl animation-fade-modal"},uo={class:"md:p-4 p-2 rounded-t-lg bg-base-black flex items-center justify-between"},mo=c("p",{class:"md:text-xl text-white"},"Edit & Crop Image",-1),po=c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),fo=[po],go={class:"relative"},vo={key:0,class:"md:min-h-[400px] h-full flex justify-center items-center"},bo=re('<div class="w-full h-full flex justify-center items-center"><div class="text-indigo-700"><div class="md:h-[80px] md:w-[80px]"><div class="animate-bounce"><svg xmlns="http://www.w3.org/2000/svg" class="animate-spin" fill="#c1f861" stroke="#fff" stroke-width="0" viewBox="0 0 16 16"><path d="M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 4c2.209 0 4 1.791 4 4s-1.791 4-4 4-4-1.791-4-4 1.791-4 4-4zM12.773 12.773c-1.275 1.275-2.97 1.977-4.773 1.977s-3.498-0.702-4.773-1.977-1.977-2.97-1.977-4.773c0-1.803 0.702-3.498 1.977-4.773l1.061 1.061c0 0 0 0 0 0-2.047 2.047-2.047 5.378 0 7.425 0.992 0.992 2.31 1.538 3.712 1.538s2.721-0.546 3.712-1.538c2.047-2.047 2.047-5.378 0-7.425l1.061-1.061c1.275 1.275 1.977 2.97 1.977 4.773s-0.702 3.498-1.977 4.773z"></path></svg></div><p class="text-base-gray font-medium pl-2">Loading...</p></div></div></div>',1),wo=[bo],xo={class:"flex justify-between gap-12 p-2 md:p-4"},yo={class:"w-full px-2"},_o=c("p",{class:"text-sm md:text-base"},"Zoom",-1),Ro={class:"flex w-full justify-end p-2 md:p-4 gap-3"},Mo={class:"label-upload btn bg-white border border-[#E0E0E0]"},zo=c("div",{class:"btn-up"},"Replace",-1);function Ao(e,t,s,i,n,o){const r=$("cropper"),l=$("Navigation");return V((g(),y("div",co,[c("div",ho,[c("div",uo,[mo,(g(),y("svg",{onClick:t[0]||(t[0]=a=>i.statusModalImage.closeModal(!1)),xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-8 md:w-8 md:h-8 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"#fff"},fo))]),c("div",go,[i.loading?(g(),y("div",vo,wo)):(g(),y(I,{key:1},[k(r,{ref:"croppers",class:"twitter-cropper","background-class":"twitter-cropper__background","foreground-class":"twitter-cropper__foreground","image-restriction":"stencil","stencil-size":i.stencilSize,"stencil-props":{lines:{},handlers:{},movable:!1,scalable:!1,aspectRatio:1,previewClass:"twitter-cropper__stencil"},transitions:!1,debounce:!1,"default-size":i.defaultSize,"min-width":150,"min-height":150,src:i.imgPreview,onChange:i.onChange},null,8,["stencil-size","default-size","src","onChange"]),c("div",xo,[c("div",yo,[_o,k(l,{zoom:i.zoom,onChange:i.onZoom},null,8,["zoom","onChange"])])]),c("div",Ro,[c("label",Mo,[c("input",{type:"file",hidden:"",ref:"file",onChange:t[1]||(t[1]=a=>i.uploadImage(a)),accept:".jpg, .jpeg,.png,.webp"},null,544),zo]),c("button",{onClick:t[2]||(t[2]=(...a)=>i.saveEditPhoto&&i.saveEditPhoto(...a)),class:"btn bg-primary"},"Upload")])],64))])])],512)),[[le,i.statusModalImage.isActive]])}const Nn=J(lo,[["render",Ao]]),So=Pe("modalGuidePhotos",{state:()=>({isActive:!1}),actions:{openModal({isActive:e,data:t}){this.isActive=e},closeModal(e){this.isActive=e}}}),Eo={setup(e){const t=So(),s=z(Qe(()=>"https://s3.us-east-2.amazonaws.com/files.autosensei.ca/"));return et(()=>{console.log("statusModalView.img",t.img)}),{statusModalView:t,bucket:s}}},Do={class:"fixed inset-0 flex items-end md:items-center md:justify-center bg-base-black bg-opacity-50"},ko={class:"max-w-xl w-full h-[70vh] overflow-hidden bg-white rounded-lg shadow-xl animation-fade-modal"},Co={class:"h-full"},Po={class:"md:p-4 p-2 rounded-t-lg bg-[#22282F] flex items-center justify-between"},To=c("p",{class:"text-md md:text-xl text-white"},"Guide",-1),jo=c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),$o=[jo],Oo={class:"w-full p-2 h-full"},Lo=c("p",{class:"font-Nohemi text-sm md:text-xl"},[qe("It is recommended to upload detailed photos of the car as indicated in this guide. "),c("br"),c("br"),qe(" Example: ")],-1),Wo={class:"flex h-[60vh] pb-24 sm:pb-28 mt-3 overflow-auto gap-3 flex-col"},Io=c("p",{class:"font-Inter mb-2 text-sm sm:text-base font-semibold"},"Exterior Photos",-1),Ho={class:"grid grid-cols-2 md:grid-cols-3 px-2 gap-2 sm:gap-4 m-auto lg:px-3"},qo={class:"flex w-full flex-col gap-2"},Bo=c("div",{class:"flex items-center gap-3"},[c("p",{class:"font-medium text-xs md:text-sm"},"3/4 Front Photo")],-1),Fo={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},Vo=["src"],No={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},Yo={class:"flex w-full flex-col gap-2"},Uo=c("div",{class:"flex items-center gap-3"},[c("p",{class:"font-medium text-xs md:text-sm"},"Front")],-1),Xo={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},Go=["src"],Zo={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},Jo={class:"flex w-full flex-col gap-2"},Qo=c("div",{class:"flex items-center gap-3"},[c("p",{class:"font-medium text-xs md:text-sm"},"Driver Side")],-1),Ko={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},en=["src"],tn={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},sn={class:"flex w-full flex-col gap-2"},on=c("div",{class:"flex items-center gap-3"},[c("p",{class:"font-medium text-xs md:text-sm"},"Back")],-1),nn={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},an=["src"],rn={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},ln={class:"flex w-full flex-col gap-2"},cn=c("div",{class:"flex items-center gap-3"},[c("p",{class:"font-medium text-xs md:text-sm"},"Passenger Side")],-1),hn={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},dn=["src"],un={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},mn={class:"flex w-full flex-col gap-2"},pn=c("div",{class:"flex items-center gap-3"},[c("p",{class:"font-medium text-xs md:text-sm"},"Tire and Rim")],-1),fn={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},gn=["src"],vn={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},bn=c("p",{class:"font-Inter mb-2 text-sm sm:text-base font-semibold"},"Interior Photos",-1),wn={class:"grid grid-cols-2 md:grid-cols-3 px-2 gap-2 sm:gap-4 m-auto lg:px-3"},xn={class:"flex w-full flex-col gap-2"},yn=c("div",{class:"flex items-center gap-3"},[c("p",{class:"font-medium text-xs md:text-sm whitespace-pre"},"Drivers D. (Odometer)")],-1),_n={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},Rn=["src"],Mn={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},zn={class:"flex w-full flex-col gap-2"},An=c("div",{class:"flex items-center gap-3"},[c("p",{class:"font-medium text-xs md:text-sm"},"Drivers Side")],-1),Sn={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},En=["src"],Dn={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},kn={class:"flex w-full flex-col gap-2"},Cn=c("div",{class:"flex items-center gap-3"},[c("p",{class:"font-medium text-xs md:text-sm"},"Center Console")],-1),Pn={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},Tn=["src"],jn={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},$n={class:"flex w-full flex-col gap-2"},On=c("div",{class:"flex items-center gap-3"},[c("p",{class:"font-medium text-xs md:text-sm"},"Rear Seats")],-1),Ln={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},Wn=["src"],In={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"};function Hn(e,t,s,i,n,o){var r,l,a,h,d,u,m,p,x,f;return V((g(),y("div",Do,[c("div",ko,[c("div",Co,[c("div",Po,[To,(g(),y("svg",{onClick:t[0]||(t[0]=v=>i.statusModalView.closeModal(!1)),xmlns:"http://www.w3.org/2000/svg",class:"w-5 md:w-8 md:h-8 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"#fff"},$o))]),c("div",Oo,[Lo,c("div",Wo,[c("div",null,[Io,c("div",Ho,[c("div",qo,[Bo,c("div",Fo,[c("img",{class:"w-full h-full object-cover",src:i.bucket+"public/img/png/mainphoto.png",alt:""},null,8,Vo),(r=e.form)!=null&&r.previewFrontPhoto?A("",!0):(g(),y("p",No," Example of 3/4 Front use JPG, PNG, or BMP file "))])]),c("div",Yo,[Uo,c("div",Xo,[c("img",{class:"w-full h-full object-cover",src:i.bucket+"public/img/png/front.png",alt:""},null,8,Go),(l=e.form)!=null&&l.previewFrontPhoto?A("",!0):(g(),y("p",Zo," Example of front use JPG, PNG, or BMP file "))])]),c("div",Jo,[Qo,c("div",Ko,[c("img",{class:"w-full h-full object-cover",src:i.bucket+"public/img/png/driverside.png",alt:""},null,8,en),(a=e.form)!=null&&a.previewFrontPhoto?A("",!0):(g(),y("p",tn," Example of Driver Side use JPG, PNG, or BMP file "))])]),c("div",sn,[on,c("div",nn,[c("img",{class:"w-full h-full object-cover",src:i.bucket+"public/img/png/back.png",alt:""},null,8,an),(h=e.form)!=null&&h.previewFrontPhoto?A("",!0):(g(),y("p",rn," Example of Back use JPG, PNG, or BMP file "))])]),c("div",ln,[cn,c("div",hn,[c("img",{class:"w-full h-full object-cover",src:i.bucket+"public/img/png/passenger.png",alt:""},null,8,dn),(d=e.form)!=null&&d.previewFrontPhoto?A("",!0):(g(),y("p",un," Example of Passenger Side use JPG, PNG, or BMP file "))])]),c("div",mn,[pn,c("div",fn,[c("img",{class:"w-full h-full object-cover",src:i.bucket+"public/img/png/tireandrim.png",alt:""},null,8,gn),(u=e.form)!=null&&u.previewFrontPhoto?A("",!0):(g(),y("p",vn," Example of Tire and Rim use JPG, PNG, or BMP file "))])])])]),c("div",null,[bn,c("div",wn,[c("div",xn,[yn,c("div",_n,[c("img",{class:"w-full h-full object-cover",src:i.bucket+"public/img/png/tacomentro.png",alt:""},null,8,Rn),(m=e.form)!=null&&m.previewFrontPhoto?A("",!0):(g(),y("p",Mn," Example of Drivers Display (Odometer) use JPG, PNG, or BMP file "))])]),c("div",zn,[An,c("div",Sn,[c("img",{class:"w-full h-full object-cover",src:i.bucket+"public/img/png/dentro.png",alt:""},null,8,En),(p=e.form)!=null&&p.previewFrontPhoto?A("",!0):(g(),y("p",Dn," Example of Drivers Side use JPG, PNG, or BMP file "))])]),c("div",kn,[Cn,c("div",Pn,[c("img",{class:"w-full h-full object-cover",src:i.bucket+"public/img/png/tavblero.png",alt:""},null,8,Tn),(x=e.form)!=null&&x.previewFrontPhoto?A("",!0):(g(),y("p",jn," Example of Center Console use JPG, PNG, or BMP file "))])]),c("div",$n,[On,c("div",Ln,[c("img",{class:"w-full h-full object-cover",src:i.bucket+"public/img/png/asientosatras.png",alt:""},null,8,Wn),(f=e.form)!=null&&f.previewFrontPhoto?A("",!0):(g(),y("p",In," Example of Rear Seats use JPG, PNG, or BMP file "))])])])])])])])])],512)),[[le,i.statusModalView.isActive]])}const Yn=J(Eo,[["render",Hn]]);export{Vn as M,Nn as a,Yn as b,is as c,ro as d,So as e,je as v};
