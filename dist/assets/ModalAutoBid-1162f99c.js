import{_ as K,r,L as Q,A as G,w as q,b as J,e as R,k as I,v as T,o as u,c as p,f as t,K as b,F as L,N as w,Q as W,D as X,n as Y,O as j}from"./index-52aee758.js";import{C as $}from"./CurrencyInput-3579b922.js";import{v as F}from"./ModalBidNow-551b73de.js";import{M as ee}from"./modalAutoBid-e02608f5.js";import{u as te}from"./auctions-e190dc77.js";import{_ as se}from"./image-0fc6b0a0.js";const ae="/assets/canceledAuto-eca2ad76.svg",oe={props:{form:{type:Object},index:{type:Function}},setup(E){const a=r(!0),S=r(""),e=r(E.form),s=ee(),g=r(0),f=r(null),v=r(null),m=r(!1),_=te(),y=Q(),C=r(G(()=>"http://files.autosensei.ca/")),k=()=>{g.value+=1,s.data.vehicleDetails.basePrice+=100,f.value=F(e.value,n.value,s.data.vehicleDetails.basePrice,s.from),v.value=Object.entries(f.value).length},n=r({step1:!0,step2:!1,step3:!1}),x=r(""),A=o=>{let i=o.target.value;i&&(e.value.cardNumber=i.replaceAll(" ","").split("").map((d,l)=>l>0&&l%4==0?" "+d:d).join(""))},M=()=>{s.closeModal(!1),e.value.placeyourbid=0,e.value.cardNumber=void 0,e.value.nameOnCard=void 0,e.value.expiryDate=void 0,e.value.cvv=void 0,e.value.saveCard=void 0,e.value.termsConditions=void 0,e.value.notify=void 0,e.value.creditCard=void 0},B=(o,i)=>{switch(x.value=i,o){case 1:n.value.step1=!1,n.value.step2=!0;break;case 2:i=="edit"?(n.value.step1=!1,n.value.step2=!0):s.closeModal(!1);break}},V=async(o,i)=>{var d,l;switch(x.value=i,o){case 1:n.value.step1=!1,n.value.step2=!0;break;case 2:let D={amount:null,biddingLimit:null};m.value=!0;try{await _.autionsBit({uuid:s.data._id,payload:D})}catch(h){j(((l=(d=h==null?void 0:h.response)==null?void 0:d.data)==null?void 0:l.message)||"An error has occurred",{type:"error"}),m.value=!1}finally{m.value=!1,s.closeModal(!1),j("Successfully cancelled your auto bid",{type:"success",position:"top-center",theme:"colored"})}break}},H=async()=>{var i,d;let o={biddingLimit:e.value.placeyourbid};m.value=!0;try{await _.autionsBitUpdate({uuid:s.data._id,payload:o})}catch(l){j(((d=(i=l==null?void 0:l.response)==null?void 0:i.data)==null?void 0:d.message)||"An error has occurred",{type:"error"}),m.value=!1}finally{j("Successfully cancelled your auto bid",{type:"success",position:"top-center",theme:"colored"}),m.value=!1,s.closeModal(!1)}};return q(e.value,async(o,i)=>{var d,l;f.value=F(e.value,n.value,s.data.vehicleDetails.basePrice,s.from,y.userData),v.value=Object.entries(f.value).length,o.placeyourbid>((l=(d=s==null?void 0:s.data)==null?void 0:d.vehicleDetails)==null?void 0:l.basePrice)&&(g.value+=1)}),J(()=>{if(s.data.bids[0]){console.log("statusModal.data",s.data),s.data.vehicleDetails.basePrice=s.data.bids[0].amount;const o=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});s.data.amountBid=o==null?void 0:o.format(s.data.amountBid)}}),{isOpen:a,formData:e,value:S,addAmount:k,counterKey:g,sizeObjet:v,invalid:f,steps:n,formatCardNumber:A,statusModal:s,authStore:y,closet:M,candelAutobid:V,editAutobid:B,state:x,updateAmounBit:H,bucket:C}},components:{CurrencyInput:$}},le={class:"fixed z-[100] inset-0 flex items-end md:items-center justify-center bg-base-black bg-opacity-50"},ie={class:"w-full md:w-auto md:max-w-xl overflow-auto bg-white rounded-lg shadow-xl animation-fade-modal"},de={class:"p-2 md:p-4 rounded-t-lg bg-base-black flex items-center justify-between"},ne=t("p",{class:"text-md md:text-xl text-white"},"Auto Bid",-1),ce=t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),re=[ce],ue={key:0},me={class:"flex gap-3 items-start border-b border-[#E0E0E0] p-2 pb-0 md:p-5"},pe={class:"w-[40%] h-[100px] md:w-[160px] md:h-[125px]"},be=["src"],fe={key:1,class:"shadow-xl w-full rounded-lg object-cover",src:se,alt:""},ve={class:"h-[100px] mb-2 flex md:justify-between flex-col"},xe={class:"font-semibold capitalize md:text-base text-sm"},he=t("p",{class:"capitalize text-sm md:text-base mt-8"},"Current Bid",-1),_e={class:"font-medium text-sm text-base-black md:text-2xl"},ye={class:"md:m-5 p-2 m-2 md:p-4 border rounded-lg border-[#E0E0E0]"},we=t("p",{class:"text-sm md:text-base font-semibold"},"Bid Information",-1),ge={class:"flex gap-2 md:gap-3 mt-4 flex-col"},Ce={class:"flex gap-2 items-center justify-between"},ke=t("div",{class:"flex gap-2 items-center"},[t("svg",{class:"md:h-[22px] h-[15px] w-[15px] md:w-[22px]",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"23",viewBox:"0 0 22 23",fill:"none"},[t("path",{d:"M2.74967 3.25H19.2497C19.4928 3.25 19.7259 3.34658 19.8979 3.51849C20.0698 3.69039 20.1663 3.92355 20.1663 4.16667V18.8333C20.1663 19.0764 20.0698 19.3096 19.8979 19.4815C19.7259 19.6534 19.4928 19.75 19.2497 19.75H2.74967C2.50656 19.75 2.2734 19.6534 2.10149 19.4815C1.92958 19.3096 1.83301 19.0764 1.83301 18.8333V4.16667C1.83301 3.92355 1.92958 3.69039 2.10149 3.51849C2.2734 3.34658 2.50656 3.25 2.74967 3.25ZM3.66634 5.08333V17.9167H18.333V5.08333H3.66634ZM7.79134 13.3333H12.833C12.9546 13.3333 13.0711 13.285 13.1571 13.1991C13.2431 13.1131 13.2913 12.9966 13.2913 12.875C13.2913 12.7534 13.2431 12.6369 13.1571 12.5509C13.0711 12.465 12.9546 12.4167 12.833 12.4167H9.16634C8.55855 12.4167 7.97566 12.1752 7.54589 11.7455C7.11612 11.3157 6.87467 10.7328 6.87467 10.125C6.87467 9.51721 7.11612 8.93432 7.54589 8.50455C7.97566 8.07478 8.55855 7.83333 9.16634 7.83333H10.083V6H11.9163V7.83333H14.208V9.66667H9.16634C9.04478 9.66667 8.9282 9.71495 8.84225 9.80091C8.7563 9.88686 8.70801 10.0034 8.70801 10.125C8.70801 10.2466 8.7563 10.3631 8.84225 10.4491C8.9282 10.535 9.04478 10.5833 9.16634 10.5833H12.833C13.4408 10.5833 14.0237 10.8248 14.4535 11.2545C14.8832 11.6843 15.1247 12.2672 15.1247 12.875C15.1247 13.4828 14.8832 14.0657 14.4535 14.4955C14.0237 14.9252 13.4408 15.1667 12.833 15.1667H11.9163V17H10.083V15.1667H7.79134V13.3333Z",fill:"#0A0A0A"})]),t("p",{class:"text-xs font-medium md:text-base"},"Maximum Bid Amount")],-1),Ae={class:"font-medium text-xs md:text-base"},Me={class:"flex gap-2 items-center justify-between"},Be=t("div",{class:"flex gap-2 items-center"},[t("svg",{class:"md:h-[22px] h-[15px] w-[15px] md:w-[22px]",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"23",viewBox:"0 0 22 23",fill:"none"},[t("path",{d:"M2.74967 3.25H19.2497C19.4928 3.25 19.7259 3.34658 19.8979 3.51849C20.0698 3.69039 20.1663 3.92355 20.1663 4.16667V18.8333C20.1663 19.0764 20.0698 19.3096 19.8979 19.4815C19.7259 19.6534 19.4928 19.75 19.2497 19.75H2.74967C2.50656 19.75 2.2734 19.6534 2.10149 19.4815C1.92958 19.3096 1.83301 19.0764 1.83301 18.8333V4.16667C1.83301 3.92355 1.92958 3.69039 2.10149 3.51849C2.2734 3.34658 2.50656 3.25 2.74967 3.25ZM18.333 10.5833H3.66634V17.9167H18.333V10.5833ZM18.333 8.75V5.08333H3.66634V8.75H18.333ZM12.833 14.25H16.4997V16.0833H12.833V14.25Z",fill:"#0A0A0A"})]),t("p",{class:"text-xs font-medium md:text-base"},"Credit Card Name")],-1),Ve={class:"font-medium text-xs md:text-base"},He={class:"flex gap-2 items-center justify-between"},De=t("div",{class:"flex gap-2 items-center"},[t("p",{class:"text-xs whitespace-pre font-medium md:text-base"},"Credit Card Number")],-1),je={class:"font-medium text-xs whitespace-pre md:text-base"},Ee={class:"flex w-full gap-4 p-2 md:p-5 pt-0 items-center"},Se={key:1},Ne={key:0,class:"p-5"},Oe=t("div",{class:"flex gap-1 flex-col justify-start"},[t("p",{class:"font-semibold text-sm md:text-base"},"Maximum Bid Amount"),t("p",{class:"text-xs md:text-base"},"Please enter a price higher than the current bid")],-1),ze={class:"text-[#858585] mt-2"},Pe={class:"form-group mt-4"},Ue=t("label",{for:"html",class:"text-xs md:text-base"},"Notify me when the current bid approaches my maximum bid amount",-1),Ze=["disabled"],Ie=t("div",{class:"p-5 flex flex-col items-center gap-4"},[t("img",{src:ae,alt:""}),t("p",{class:"font-semibold text-xl"},"Letâ€™s keep your bids winning"),t("p",{class:"text-center"},"Give your best bid amount reducing the time spent watching the bid with our auto bid feature. Are you sure want to cancel?")],-1),Le={class:"flex w-full gap-4 p-5 pt-0 items-center"};function Fe(E,a,S,e,s,g){var v,m,_,y,C,k,n,x,A,M,B,V,H,o,i,d,l,D,h,N,O,z,P,U,Z;const f=R("CurrencyInput");return I((u(),p("div",le,[t("div",ie,[t("div",de,[ne,(u(),p("svg",{onClick:a[0]||(a[0]=(...c)=>e.closet&&e.closet(...c)),xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"#fff"},re))]),e.steps.step1||e.steps.step2&&e.state=="edit"?(u(),p("div",ue,[t("div",me,[t("div",pe,[(v=e.statusModal.data)!=null&&v.photos?(u(),p("img",{key:0,class:"w-full h-full shadow-xl rounded-lg object-cover",src:e.bucket+((m=e.statusModal.data)==null?void 0:m.photos[0].url),alt:""},null,8,be)):(u(),p("img",fe))]),t("div",ve,[t("p",xe,b((y=(_=e.statusModal.data)==null?void 0:_.vehicleDetails)==null?void 0:y.year)+" "+b((k=(C=e.statusModal.data)==null?void 0:C.vehicleDetails)==null?void 0:k.make)+" "+b((x=(n=e.statusModal.data)==null?void 0:n.vehicleDetails)==null?void 0:x.model),1),t("div",null,[he,t("p",_e,"$"+b((M=(A=e.statusModal.data)==null?void 0:A.bids[0])==null?void 0:M.amount),1)])])]),e.steps.step1?(u(),p(L,{key:0},[t("div",ye,[we,t("div",ge,[t("div",Ce,[ke,t("p",Ae,"$"+b((V=(B=e.statusModal.data)==null?void 0:B.bids[0])==null?void 0:V.biddingLimit),1)]),t("div",Me,[Be,t("p",Ve,b((d=(i=(o=(H=e.statusModal.data)==null?void 0:H.bids[0])==null?void 0:o.paymentMethod)==null?void 0:i.billingDetails)==null?void 0:d.name),1)]),t("div",He,[De,t("p",je,"**** **** **** "+b((N=(h=(D=(l=e.statusModal.data)==null?void 0:l.bids[0])==null?void 0:D.paymentMethod)==null?void 0:h.card)==null?void 0:N.last4),1)])])]),t("div",Ee,[t("button",{onClick:a[1]||(a[1]=c=>e.candelAutobid(1,"cancel")),class:"btn w-full border rounded-lg border-[#E0E0E0] whitespace-pre text-error"},"Cancel Auto Bid"),t("button",{onClick:a[2]||(a[2]=c=>e.editAutobid(1,"edit")),class:"btn w-full bg-primary text-blue-dark"},"Edit Auto Bid")])],64)):w("",!0)])):w("",!0),e.steps.step2?(u(),p("div",Se,[e.state=="edit"?(u(),p("div",Ne,[Oe,(u(),W(f,{key:e.counterKey,modelValue:e.formData.placeyourbid,"onUpdate:modelValue":a[3]||(a[3]=c=>e.formData.placeyourbid=c),error:!!((O=e.invalid)!=null&&O.placeyourbid),options:{currency:"USD"},placeHolder:`$ Min ${(U=(P=(z=e.statusModal)==null?void 0:z.data)==null?void 0:P.vehicleDetails)==null?void 0:U.basePrice}`},null,8,["modelValue","error","placeHolder"])),t("p",ze,b((Z=e.invalid)==null?void 0:Z.placeyourbid),1),t("div",Pe,[I(t("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=c=>e.formData.notify=c),id:"html"},null,512),[[X,e.formData.notify]]),Ue]),t("button",{onClick:a[5]||(a[5]=(...c)=>e.updateAmounBit&&e.updateAmounBit(...c)),class:Y([e.sizeObjet==0?"bg-primary":"bg-base-gray text-white","btn w-full text-blue-dark"]),disabled:e.sizeObjet!=0},"Update Auto Bid",10,Ze)])):w("",!0),e.state=="cancel"?(u(),p(L,{key:1},[Ie,t("div",Le,[t("button",{onClick:a[6]||(a[6]=c=>e.editAutobid(2,"cancel")),class:"btn w-full bg-primary text-blue-dark"},"Keep Auto Bid"),t("button",{onClick:a[7]||(a[7]=c=>e.candelAutobid(2,"cancel")),class:"btn w-full border rounded-lg border-[#E0E0E0] text-error"},"Cancel Auto Bid")])],64)):w("",!0)])):w("",!0)])],512)),[[T,e.statusModal.isActive]])}const Te=K(oe,[["render",Fe]]);export{Te as M};
