import{_ as J,r as A,w as kt,e as $,o as g,c as y,h as C,i as G,f as h,n as F,K as O,k as Y,W as nt,N as R,F as I,m as rt,P as Pt,A as Qt,v as lt,Q as E,a as K,J as It,a5 as ft,a6 as Kt,g as ve,a4 as Ht,b as be,O as we,l as Bt}from"./index-770610b1.js";import{v as Tt}from"./validationCreateAutions-5e70d8d4.js";import{h as jt}from"./moment-fbc5633a.js";const xe={props:{form:{type:Object},steps:{type:Object},save:{type:Function}},setup(t){const e=A(t.form),i=A(t.steps),o=A(null),n=A(),s=A(),r=a=>{i.value.step1=!0,i.value.step2=!1},l=a=>{switch(a){case 1:Object.entries(n.value).length===0&&(i.value.step1=!1,i.value.step2=!0);break;case 2:t.save();break}};return kt(e.value,async(a,c)=>{a&&(n.value=Tt(e.value,"Launch Auction","date and time"),o.value=Object.entries(n.value).length,s.value=null,s.value=jt(e.value.auctionDate).format("LL"))}),{formData:e,next:l,steps:i,invalid:n,sizeObjet:o,back:r,newDate:s}}},ye={key:0,class:"w-full flex flex-col md:gap-2"},_e=h("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Auction Date",-1),Me={class:"w-full flex flex-col mt-4 md:gap-2"},ze={class:"flex justify-center gap-6 items-center"},Ae={class:"w-full flex flex-col md:gap-2"},Re=h("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Auction Time",-1),Se=rt('<option value="00">00.00 AM</option><option value="01">01.00 AM</option><option value="02">02.00 AM</option><option value="03">03.00 AM</option><option value="04">04.00 AM</option><option value="05">05.00 AM</option><option value="06">06.00 AM</option><option value="07">07.00 AM</option><option value="08">08.00 AM</option><option value="09">09.00 AM</option><option value="10">10.00 AM</option><option value="11">11.00 AM</option><option value="12">12.00 PM</option><option value="13">13.00 PM</option><option value="14">14.00 PM</option><option value="15">15.00 PM</option><option value="16">16.00 PM</option><option value="17">17.00 PM</option><option value="18">18.00 PM</option><option value="19">19.00 PM</option><option value="20">20.00 PM</option><option value="21">21.00 PM</option><option value="22">22.00 PM</option><option value="23">23.00 PM</option><option value="24">24.00 PM</option>',25),Ee=[Se],De=h("p",{class:"mt-7"}," - ",-1),Ce={class:"w-full flex flex-col md:gap-2"},ke=h("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Auction Duration",-1),Pe=h("option",{value:"45"},"45 Minutes",-1),Te=h("option",{value:"50"},"50 Minutes",-1),je=h("option",{value:"60"},"60 Minutes",-1),$e=h("option",{value:"65"},"65 Minutes",-1),Oe=[Pe,Te,je,$e],Le={class:"m-4 p-4 rounded-lg border-[#E0E0E0] border-[1px]"},We=h("p",{class:"font-semibold text-xs md:text-base"},"Launch Information",-1),Ie=h("div",{class:"flex justify-between py-1 md:gap-2"},[h("p",{class:"text-xs md:text-base"},"Launch Option"),h("p",{class:"text-xs md:text-base"},"Choose the date & time")],-1),He={class:"flex justify-between py-1 md:gap-2"},Be=h("p",{class:"text-xs md:text-base"},"Auction Date",-1),Fe={class:"font-semibold text-xs md:text-base"},Ne={class:"flex justify-between py-1 md:gap-2"},Ye=h("p",{class:"text-xs md:text-base"},"Auction Time",-1),Ue={class:"font-semibold text-xs md:text-base"},Xe={class:"flex justify-between py-1 md:gap-2"},Ve=h("p",{class:"text-xs md:text-base"},"Auction Duration",-1),Ge={class:"font-semibold text-xs md:text-base"},Ze=h("p",{class:"px-4 pt-4 text-xs md:text-base border-[#E0E0E0] border-t-[1px]"},"Are you sure you want to launch auction with this option?",-1),qe=["disabled"],Je={key:3,class:"pt-4 flex gap-4"};function Qe(t,e,i,o,n,s){var l,a,c;const r=$("VueDatePicker");return g(),y(I,null,[o.steps.step1?(g(),y("div",ye,[_e,C(r,{"enable-time-picker":!1,modelValue:o.formData.auctionDate,"onUpdate:modelValue":e[0]||(e[0]=d=>o.formData.auctionDate=d),"min-date":new Date,class:F(["custom-picker",((l=o.invalid)==null?void 0:l.auctionDate)&&"error-picker"])},{"calendar-header":G(({index:d,day:u})=>[h("div",{class:F(d===5||d===6?"red-color":"")},O(u),3)]),_:1},8,["modelValue","min-date","class"]),h("div",Me,[h("div",ze,[h("div",Ae,[Re,Y(h("select",{"onUpdate:modelValue":e[1]||(e[1]=d=>o.formData.auctionTime=d),class:F([(a=o.invalid)!=null&&a.auctionTime?"border-error":"border-[#E0E0E0]","border custom-select-launch text-[#858585] md:p-3 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"])},Ee,2),[[nt,o.formData.auctionTime]])]),De,h("div",Ce,[ke,Y(h("select",{"onUpdate:modelValue":e[2]||(e[2]=d=>o.formData.auctionDuration=d),class:F([(c=o.invalid)!=null&&c.auctionDuration?"border-error":"border-[#E0E0E0]","border custom-select-launch text-[#858585] md:p-3 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"])},Oe,2),[[nt,o.formData.auctionDuration]])])])])])):R("",!0),o.steps.step2?(g(),y(I,{key:1},[h("div",Le,[We,Ie,h("div",He,[Be,h("p",Fe,O(o.newDate),1)]),h("div",Ne,[Ye,h("p",Ue,O(o.formData.auctionTime),1)]),h("div",Xe,[Ve,h("p",Ge,O(o.formData.auctionDuration)+" Minutes",1)])]),Ze],64)):R("",!0),o.steps.step1?(g(),y("div",{key:2,class:"pt-4",onClick:e[3]||(e[3]=d=>o.next(1))},[h("button",{disabled:o.sizeObjet!=0,class:F([o.sizeObjet==0?"bg-primary":"bg-base-gray text-white","w-full md:h-[41px] h-[35px] text-blue-100 text-xs font-semibold bg-primary rounded"])}," Next ",10,qe)])):R("",!0),o.steps.step2?(g(),y("div",Je,[h("button",{onClick:e[4]||(e[4]=(...d)=>o.back&&o.back(...d)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 border-[#E0E0E0] border-[1px] rounded"}," No "),h("button",{onClick:e[5]||(e[5]=d=>o.next(2)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 bg-primary rounded"}," Yes ")])):R("",!0)],64)}const Ke=J(xe,[["render",Qe]]),ti={props:{form:{type:Object},steps:{type:Object},active:{type:Boolean},save:{type:Function}},components:{},setup(t){const e=A(t.form),i=A(t.steps),o=A(),n=A(null),s=A(),r=a=>{i.value.step1=!0,i.value.step2=!1},l=a=>{switch(a){case 1:Object.entries(o.value).length===0&&(i.value.step1=!1,i.value.step2=!0);break;case 2:t.save();break}};return kt(e.value,async(a,c)=>{a&&(o.value=Tt(e.value,"Launch Auction","hours weekeng"),n.value=Object.entries(o.value).length,s.value=null,s.value=jt(e.value.auctionDate).format("LL"))}),{formData:e,next:l,back:r,steps:i,sizeObjet:n,invalid:o}}},ei={key:0,class:"w-full flex flex-col p-4 mt-4 gap-2"},ii={class:"flex justify-center gap-6 items-center"},oi={class:"w-full flex flex-col md:gap-2"},si=h("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Saturday",-1),ni=h("option",{value:"19.00 PM",selected:""},"19.00 PM",-1),ai=[ni],ri=h("p",{class:"mt-7"}," - ",-1),li={class:"w-full flex flex-col md:gap-2"},hi=h("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Monday",-1),ci=rt('<option value="Select time" selected>Select time</option><option value="00">00.00 AM</option><option value="01">01.00 AM</option><option value="02">02.00 AM</option><option value="03">03.00 AM</option><option value="04">04.00 AM</option><option value="05">05.00 AM</option><option value="06">06.00 AM</option><option value="07">07.00 AM</option><option value="08">08.00 AM</option><option value="09">09.00 AM</option><option value="10">10.00 AM</option><option value="11">11.00 AM</option><option value="12">12.00 PM</option><option value="13">13.00 PM</option><option value="14">14.00 PM</option><option value="15">15.00 PM</option><option value="16">16.00 PM</option><option value="17">17.00 PM</option><option value="18">18.00 PM</option><option value="19">19.00 PM</option><option value="20">20.00 PM</option><option value="21">21.00 PM</option><option value="22">22.00 PM</option><option value="23">23.00 PM</option><option value="24">24.00 PM</option>',26),di=[ci],ui={class:"m-4 p-4 rounded-lg border-[#E0E0E0] border-[1px]"},mi=rt('<p class="font-semibold text-xs md:text-base">Launch Information</p><div class="flex justify-between py-1 gap-2"><p class="text-xs md:text-base">Launch Options</p><p class="text-xs md:text-base">After Hours (Weekend)</p></div><div class="flex justify-between py-1 gap-2"><p class="text-xs md:text-base">Auction Date</p><p class="font-semibold text-xs md:text-base"></p></div><div class="flex justify-between py-1 gap-2"><p class="text-xs md:text-base">From</p><p class="font-semibold text-xs md:text-base">Saturday, 19.00 PM</p></div>',4),pi={class:"flex justify-between py-1 gap-2"},fi=h("p",{class:"text-xs md:text-base"},"To",-1),gi={class:"font-semibold text-xs md:text-base"},vi=h("p",{class:"px-4 pt-4 text-xs md:text-base border-[#E0E0E0] border-t-[1px]"}," Are you sure you want to launch auction with this option?",-1),bi=["disabled"],wi={key:3,class:"pt-4 flex gap-4"};function xi(t,e,i,o,n,s){var r;return g(),y(I,null,[o.steps.step1?(g(),y("div",ei,[h("div",ii,[h("div",oi,[si,Y(h("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.formData.daySaturday=l),disabled:"",class:"custom-select-launch border-none text-[#858585] md:p-3 bg-[#E0E0E0] text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"},ai,512),[[nt,o.formData.daySaturday]])]),ri,h("div",li,[hi,Y(h("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>o.formData.dayMonday=l),class:F([(r=o.invalid)!=null&&r.auctionTime?"border-error":"border-[#E0E0E0]","custom-select-launch border text-[#858585] md:p-3 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"])},di,2),[[nt,o.formData.dayMonday]])])])])):R("",!0),o.steps.step2?(g(),y(I,{key:1},[h("div",ui,[mi,h("div",pi,[fi,h("p",gi,"Monday, "+O(o.formData.dayMonday),1)])]),vi],64)):R("",!0),o.steps.step1?(g(),y("div",{key:2,class:"pt-4",onClick:e[2]||(e[2]=l=>o.next(1))},[h("button",{disabled:o.sizeObjet!=0,class:F([o.sizeObjet==0?"bg-primary":"bg-base-gray text-white","w-full md:h-[41px] h-[35px] text-blue-100 text-xs font-semibold bg-primary rounded"])}," Next ",10,bi)])):R("",!0),o.steps.step2?(g(),y("div",wi,[h("button",{onClick:e[3]||(e[3]=(...l)=>o.back&&o.back(...l)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 border-[#E0E0E0] border-[1px] rounded"}," No "),h("button",{onClick:e[4]||(e[4]=l=>o.next(2)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 bg-primary rounded"}," Yes ")])):R("",!0)],64)}const yi=J(ti,[["render",xi]]),_i={props:{form:{type:Object},steps:{type:Object},save:{type:Function}},components:{},setup(t){const e=A(t.form),i=A(t.steps),o=A();return{formData:e,next:r=>{switch(o.value=Tt(e.value,"Launch Auction","after verified"),r){case 1:Object.entries(o.value).length===0&&(i.value.step1=!1,i.value.step2=!0);break;case 2:t.save();break}},back:r=>{i.value.step1=!0,i.value.step2=!1},steps:i,invalid:o}}},Mi={key:0,class:"w-full flex mt-4 flex-col md:gap-4"},zi=h("label",{class:"text-xs font-medium mb-2 md:text-base",for:""},"Auction Durations",-1),Ai=h("option",{value:"45"},"45 Minutes",-1),Ri=h("option",{value:"50"},"50 Minutes",-1),Si=h("option",{value:"60"},"60 Minutes",-1),Ei=h("option",{value:"65"},"65 Minutes",-1),Di=[Ai,Ri,Si,Ei],Ci={class:"m-2 p-2 md:p-4 rounded-lg border-[#E0E0E0] border-[1px]"},ki=h("p",{class:"font-semibold text-xs md:text-base"},"Launch Information",-1),Pi=h("div",{class:"flex justify-between py-2 gap-2"},[h("p",{class:"text-xs md:text-base"},"Launch Options"),h("p",{class:"text-xs md:text-base"},"Launch now after verified")],-1),Ti={class:"flex justify-between py-2 gap-2"},ji=h("p",{class:"text-xs md:text-base"},"Auction Durations",-1),$i={class:"font-semibold text-xs md:text-base"},Oi=h("p",{class:"px-4 pt-4 text-xs md:text-base border-[#E0E0E0] border-t-[1px]"},"Are you sure you want to launch auction with this option? You can't cancel after it's been launched ",-1),Li=h("button",{class:"w-full md:h-[41px] h-[35px] text-blue-100 text-xs md:text-base font-semibold bg-primary rounded"}," Next ",-1),Wi=[Li],Ii={key:3,class:"pt-4 flex gap-4"};function Hi(t,e,i,o,n,s){var r;return g(),y(I,null,[o.steps.step1?(g(),y("div",Mi,[zi,Y(h("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.formData.auctionDuration=l),class:F([(r=o.invalid)!=null&&r.auctionDuration?"border-error":"border-[#E0E0E0]","border text-[#858585] md:p-3 custom-select-launch text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full"])},Di,2),[[nt,o.formData.auctionDuration]])])):R("",!0),o.steps.step2?(g(),y(I,{key:1},[h("div",Ci,[ki,Pi,h("div",Ti,[ji,h("p",$i,O(o.formData.auctionDuration)+" Minutes",1)])]),Oi],64)):R("",!0),o.steps.step1?(g(),y("div",{key:2,class:"pt-4",onClick:e[1]||(e[1]=l=>o.next(1))},Wi)):R("",!0),o.steps.step2?(g(),y("div",Ii,[h("button",{onClick:e[2]||(e[2]=(...l)=>o.back&&o.back(...l)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 border-[#E0E0E0] border-[1px] rounded"}," No "),h("button",{onClick:e[3]||(e[3]=l=>o.next(2)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 bg-primary rounded"}," Yes ")])):R("",!0)],64)}const Bi=J(_i,[["render",Hi]]),Fi={props:{form:{type:Object},steps:{type:Object},save:{type:Function}},setup(t){const e=A(t.form),i=A(t.steps),o=A(null),n=A(),s=A(),r=c=>{i.value.step1=!0,i.value.step2=!1};function l(c,d=0){let u=new Date;if(!c)return u;let m=24*60*60*1e3;return u.setHours(c,d,0,0),u.setTime(u.getTime()+m),u}return{formData:e,next:c=>{switch(c){case 1:s.value=jt(l(9)).format("MMMM DD, h:mm: A"),i.value.step1=!1,i.value.step2=!0;break;case 2:e.value.launchOptions="none",t.save();break}},steps:i,invalid:n,sizeObjet:o,back:r,newDate:s}}},Ni={class:"m-4 p-4 rounded-lg border-[#E0E0E0] border-[1px]"},Yi=h("p",{class:"font-semibold text-xs md:text-base"},"Launch Information",-1),Ui=h("div",{class:"flex justify-between py-1 md:gap-2"},[h("p",{class:"text-xs md:text-base"},"Launch Option"),h("p",{class:"text-xs md:text-base"},"Next Day")],-1),Xi={class:"flex justify-between py-1 md:gap-2"},Vi=h("p",{class:"text-xs md:text-base"},"Auction Date",-1),Gi={class:"font-semibold text-xs md:text-base"},Zi=h("div",{class:"flex justify-between py-1 md:gap-2"},[h("p",{class:"text-xs md:text-base"},"Auction Duration"),h("p",{class:"font-semibold text-xs md:text-base"},"480 Minutes")],-1),qi=h("p",{class:"px-4 pt-4 text-xs md:text-base border-[#E0E0E0] border-t-[1px]"},"Are you sure you want to launch auction with this option?",-1),Ji=h("button",{id:"nextAuction",class:"w-full md:h-[41px] h-[35px] text-blue-100 text-xs font-semibold bg-primary rounded"}," Launch Auction for Tomorrow ",-1),Qi=[Ji],Ki={key:2,class:"pt-4 flex gap-4"};function to(t,e,i,o,n,s){return g(),y(I,null,[o.steps.step2?(g(),y(I,{key:0},[h("div",Ni,[Yi,Ui,h("div",Xi,[Vi,h("p",Gi,O(o.newDate),1)]),Zi]),qi],64)):R("",!0),o.steps.step1?(g(),y("div",{key:1,class:"pt-4",onClick:e[0]||(e[0]=r=>o.next(1))},Qi)):R("",!0),o.steps.step2?(g(),y("div",Ki,[h("button",{onClick:e[1]||(e[1]=(...r)=>o.back&&o.back(...r)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 border-[#E0E0E0] border-[1px] rounded"}," No "),h("button",{id:"completeAuction",onClick:e[2]||(e[2]=r=>o.next(2)),class:"w-full text-xs md:text-base h-[30px] md:h-[41px] text-blue-100 bg-primary rounded"}," Yes ")])):R("",!0)],64)}const eo=J(Fi,[["render",to]]),io=Pt("modalLaunch",{state:()=>({isActive:!1}),actions:{openModal(t){this.isActive=t},closeModal(t){this.isActive=t}}}),oo={props:{form:{type:Object},launch:{type:Boolean},invalid:{type:Object},modalLaunch:{type:Function},isActive:{type:Boolean}},components:{DateAndTime:Ke,HoursWeekeng:yi,AfterVerified:Bi,NextDay:eo},setup(t){const e=A(t.isActive),i=A(t.form),o=io(),n=A(Qt(()=>"https://s3.us-east-2.amazonaws.com/files.autosensei.ca/")),s=A({step1:!0,step2:!1}),r=A({step1:!0,step2:!1}),l=A({step1:!0,step2:!1});return kt(i.value,async(d,u)=>{if(d)switch(d.launchOptions){case"Launch now after verified":i.value.auctionDate="",i.value.auctionTime="",i.value.dayMonday="Select time";break;case"Choose the date & time":i.value.dayMonday="Select time";break;case"Choose after hours (weekend)":i.value.auctionDate="",i.value.auctionTime="";break}}),{isOpen:e,formData:i,save:()=>{t.modalLaunch()},stepsVerifiqued:s,stepsDateTime:r,stepsDateWeekeng:l,statusModal:o,newtDayDate:()=>{dateTomorrow(9)},bucket:n}}},so={class:"fixed inset-0 flex items-end md:items-center md:justify-center bg-base-black bg-opacity-50"},no={class:"max-w-md overflow-auto bg-white rounded-lg shadow-xl animation-fade-modal"},ao={class:"md:p-4 p-2 rounded-t-lg bg-[#22282F] flex items-center justify-between"},ro=h("p",{class:"text-sm md:text-xl text-white"},"Launch Auction",-1),lo=h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),ho=[lo],co={class:"p-2 pb-0 md:p-4 flex gap-3 flex-col"},uo=rt('<div class="flex justify-start items-center gap-2"><p class="text-xs md:text-base">Options</p><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8.78145 8.00048L5.48145 4.70048L6.42411 3.75781L10.6668 8.00048L6.42411 12.2431L5.48145 11.3005L8.78145 8.00048Z" fill="#858585"></path></svg><p class="text-[#858585] text-xs md:text-base">Summary</p></div>',1),mo={class:"flex gap-3 items-start"},po={key:0,class:"w-[90px] h-[70px] md:w-[120px] md:h-[90px]"},fo=["src"],go={class:"font-semibold text-xs md:text-base"},vo={class:"text-[10px] md:text-base"},bo={class:"mt-2 border-[#E0E0E0] border-t-[1px]"},wo={class:"p-2 md:p-4"},xo=h("p",{class:"md:font-semibold text-xs md:text-base"},"Launch Options",-1),yo=h("p",{class:"text-[#858585] text-[10px] md:text-base"},"After you launch the auction we will review & approve your auction. Your auction will be listed the next day from 9 am to 5pm. ",-1);function _o(t,e,i,o,n,s){var l,a,c,d,u,m,p,x,f,v,z,w,S,Z;const r=$("NextDay");return Y((g(),y("div",so,[h("div",no,[h("div",ao,[ro,(g(),y("svg",{onClick:e[0]||(e[0]=Bn=>o.statusModal.closeModal(!1)),xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"#fff"},ho))]),h("div",co,[uo,h("div",mo,[((a=(l=o.formData)==null?void 0:l.images)==null?void 0:a.length)>0?(g(),y("div",po,[h("img",{class:"w-full h-full rounded-lg object-cover",src:(c=o.formData)!=null&&c.images[0].bucket?o.bucket+((u=(d=o.formData)==null?void 0:d.images[0])==null?void 0:u.preview):(p=(m=o.formData)==null?void 0:m.images[0])==null?void 0:p.preview,alt:""},null,8,fo)])):R("",!0),h("div",null,[h("p",go,O((x=o.formData)==null?void 0:x.year)+" "+O((f=o.formData)==null?void 0:f.make)+" "+O((v=o.formData)==null?void 0:v.model),1),h("p",vo,O((w=(z=o.formData)==null?void 0:z.saveCity)==null?void 0:w.name)+", "+O((Z=(S=o.formData)==null?void 0:S.saveProvince)==null?void 0:Z.name),1)])])]),h("div",bo,[h("div",wo,[o.stepsVerifiqued.step1&&o.formData.launchOptions=="none"||o.stepsVerifiqued.step1&&o.formData.launchOptions=="Launch now after verified"||o.stepsDateTime.step1&&o.formData.launchOptions=="Choose the date & time"||o.stepsDateWeekeng.step1&&o.formData.launchOptions=="Choose after hours (weekend)"||o.formData.launchOptions==null?(g(),y(I,{key:0},[xo,yo],64)):R("",!0),C(r,{steps:o.stepsVerifiqued,form:o.formData,save:o.save},null,8,["steps","form","save"])])])])],512)),[[lt,o.statusModal.isActive]])}const Un=J(oo,[["render",_o]]);function Ft(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,o)}return i}function _(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Ft(Object(i),!0).forEach(function(o){L(t,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ft(Object(i)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(i,o))})}return t}function L(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Mo(t,e){if(t==null)return{};var i,o,n=function(r,l){if(r==null)return{};var a,c,d={},u=Object.keys(r);for(c=0;c<u.length;c++)a=u[c],l.indexOf(a)>=0||(d[a]=r[a]);return d}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)i=s[o],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Q(t){return function(e){if(Array.isArray(e))return wt(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,i){if(e){if(typeof e=="string")return wt(e,i);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return wt(e,i)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wt(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var Nt,zo,ht,D=(Nt=function(t){/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var e={}.hasOwnProperty;function i(){for(var o=[],n=0;n<arguments.length;n++){var s=arguments[n];if(s){var r=typeof s;if(r==="string"||r==="number")o.push(s);else if(Array.isArray(s)){if(s.length){var l=i.apply(null,s);l&&o.push(l)}}else if(r==="object")if(s.toString===Object.prototype.toString)for(var a in s)e.call(s,a)&&s[a]&&o.push(a);else o.push(s.toString())}}return o.join(" ")}t.exports?(i.default=i,t.exports=i):window.classNames=i})()},Nt(ht={path:zo,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(e==null&&ht.path)}},ht.exports),ht.exports),H=function(t){return function(e,i){if(!e)return t;var o;typeof e=="string"?o=e:i=e;var n=t;return o&&(n+="__"+o),n+(i?Object.keys(i).reduce(function(s,r){var l=i[r];return l&&(s+=" "+(typeof l=="boolean"?n+"--"+r:n+"--"+r+"_"+l)),s},""):"")}};function At(t,e,i){var o,n,s,r,l;function a(){var d=Date.now()-r;d<e&&d>=0?o=setTimeout(a,e-d):(o=null,i||(l=t.apply(s,n),s=n=null))}e==null&&(e=100);var c=function(){s=this,n=arguments,r=Date.now();var d=i&&!o;return o||(o=setTimeout(a,e)),d&&(l=t.apply(s,n),s=n=null),l};return c.clear=function(){o&&(clearTimeout(o),o=null)},c.flush=function(){o&&(l=t.apply(s,n),s=n=null,clearTimeout(o),o=null)},c}At.debounce=At;var Rt=At,b=function(){return b=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},b.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function te(t,e){var i,o;return t&&e?(i=""+t+e[0].toUpperCase()+e.slice(1),o=t+"-"+e):(i=t||e,o=t||e),{name:i,classname:o}}function ee(t){return/^blob:/.test(t)}function Yt(t){return ee(t)||function(e){return/^data:/.test(e)}(t)}function tt(t){return!!(t&&t.constructor&&t.call&&t.apply)}function k(t){return t===void 0}function pt(t){return typeof t=="object"&&t!==null}function St(t,e,i){var o={};return pt(t)?(Object.keys(e).forEach(function(n){k(t[n])?o[n]=e[n]:pt(e[n])?pt(t[n])?o[n]=St(t[n],e[n],i[n]):o[n]=t[n]?e[n]:i[n]:e[n]===!0||e[n]===!1?o[n]=!!t[n]:o[n]=t[n]}),o):t?e:i}function ct(t){var e=Number(t);return Number.isNaN(e)?t:e}function Ut(t){return typeof(t=="number"||function(e){return typeof e=="object"&&e!==null}(t)&&toString.call(t)=="[object Number]")&&!ie(t)}function ie(t){return t!=t}function oe(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}var st=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.type="manipulateImage",this.move=t,this.scale=e},Ao=function(t,e){e===void 0&&(e={}),this.type="resize",this.directions=t,this.params=e},$t=function(t){this.type="move",this.directions=t},Ro=function(){function t(e,i,o,n,s){this.type="drag",this.nativeEvent=e,this.position=o,this.previousPosition=n,this.element=i,this.anchor=s}return t.prototype.shift=function(){var e=this,i=e.element,o=e.anchor,n=e.position;if(i){var s=i.getBoundingClientRect(),r=s.left,l=s.top;return{left:n.left-r-o.left,top:n.top-l-o.top}}return{left:0,top:0}},t}(),Ot={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(t){t.cancelable&&!this.disabled&&t.touches.length===1&&(this.touches=Q(t.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),t.touches.length&&this.initAnchor(this.touches.reduce(function(e,i){return{clientX:e.clientX+i.clientX/t.touches.length,clientY:e.clientY+i.clientY/t.touches.length}},{clientX:0,clientY:0})),t.preventDefault&&t.preventDefault(),t.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(t){this.touches.length&&(this.processMove(t,t.touches),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation())},onMouseDown:function(t){if(!this.disabled){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.initAnchor(e),t.stopPropagation()}},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(t){var e=this.$refs.draggable.getBoundingClientRect(),i=e.left,o=e.right,n=e.bottom,s=e.top;this.anchor={left:t.clientX-i,top:t.clientY-s,bottom:n-t.clientY,right:o-t.clientX}},processMove:function(t,e){var i=Q(e);if(this.touches.length){if(this.touches.length===1&&i.length===1){var o=this.$refs.draggable;this.$emit("drag",new Ro(t,o,{left:i[0].clientX,top:i[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=i}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"]};Ot.render=function(t,e,i,o,n,s){return g(),E("div",{ref:"draggable",class:i.classname,onTouchstart:e[1]||(e[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:e[2]||(e[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onMouseover:e[3]||(e[3]=function(){return s.onMouseOver&&s.onMouseOver.apply(s,arguments)}),onMouseleave:e[4]||(e[4]=function(){return s.onMouseLeave&&s.onMouseLeave.apply(s,arguments)})},[K(t.$slots,"default")],34)};var xt=H("vue-handler-wrapper"),se={name:"HandlerWrapper",components:{DraggableElement:Ot},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var t;if(this.horizontalPosition||this.verticalPosition){var e,i=te(this.horizontalPosition,this.verticalPosition);t=xt((L(e={},i.classname,!0),L(e,"disabled",this.disabled),e))}else t=xt({disabled:this.disabled});return{root:t,draggable:xt("draggable")}}},emits:["leave","enter","drag","drag-end"]};se.render=function(t,e,i,o,n,s){var r=$("DraggableElement");return g(),E("div",{class:s.classes.root},[C(r,{class:s.classes.draggable,onDrag:e[1]||(e[1]=function(l){return t.$emit("drag",l)}),onDragEnd:e[2]||(e[2]=function(l){return t.$emit("drag-end")}),onLeave:e[3]||(e[3]=function(l){return t.$emit("leave")}),onEnter:e[4]||(e[4]=function(l){return t.$emit("enter")})},{default:G(function(){return[K(t.$slots,"default")]}),_:3},8,["class"])],2)};var So=H("vue-line-wrapper"),ne={name:"LineWrapper",components:{DraggableElement:Ot},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var t;return So((L(t={},this.position,!0),L(t,"disabled",this.disabled),t))}},emits:["leave","enter","drag","drag-end"]};ne.render=function(t,e,i,o,n,s){var r=$("DraggableElement");return g(),E(r,{class:s.classname,onDrag:e[1]||(e[1]=function(l){return t.$emit("drag",l)}),onDragEnd:e[2]||(e[2]=function(l){return t.$emit("drag-end")}),onLeave:e[3]||(e[3]=function(l){return t.$emit("leave")}),onEnter:e[4]||(e[4]=function(l){return t.$emit("enter")})},{default:G(function(){return[K(t.$slots,"default")]}),_:3},8,["class"])};var N=["left","right","top","bottom"],Eo=["left","right"],Do=["top","bottom"],Co=["left","top"],ko=["fill-area","fit-area","stencil","none"],Xt={left:0,top:0,width:0,height:0};function Vt(t,e,i){return!(i=i||["width","height","left","top"]).some(function(o){return t[o]!==e[o]})}function U(t){return{left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height}}function et(t,e){return{left:t.left-e.left,top:t.top-e.top}}function P(t){return{left:t.left+t.width/2,top:t.top+t.height/2}}function at(t,e){var i={left:0,top:0,right:0,bottom:0};return N.forEach(function(o){var n=e[o],s=U(t)[o];i[o]=n!==void 0&&s!==void 0?o==="left"||o==="top"?Math.max(0,n-s):Math.max(0,s-n):0}),i}function B(t,e){return{left:t.left-e.left,top:t.top-e.top,width:t.width+e.left+e.right,height:t.height+e.top+e.bottom}}function gt(t){return{left:-t.left,top:-t.top}}function j(t,e){return b(b({},t),{left:t.left+e.left,top:t.top+e.top})}function W(t,e,i,o){if(e!==1){if(i){var n=P(t);return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2+(i.left-n.left)*(o||1-e),top:t.top+t.height*(1-e)/2+(i.top-n.top)*(o||1-e)}}return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2,top:t.top+t.height*(1-e)/2}}return t}function M(t){return t.width/t.height}function it(t,e){return Math.min(e.right!==void 0&&e.left!==void 0?(e.right-e.left)/t.width:1/0,e.bottom!==void 0&&e.top!==void 0?(e.bottom-e.top)/t.height:1/0)}function ot(t,e){var i={left:0,top:0},o=at(t,e);return o.left&&o.left>0?i.left=o.left:o.right&&o.right>0&&(i.left=-o.right),o.top&&o.top>0?i.top=o.top:o.bottom&&o.bottom>0&&(i.top=-o.bottom),i}function yt(t,e){var i;return e.minimum&&t<e.minimum?i=e.minimum:e.maximum&&t>e.maximum&&(i=e.maximum),i}function ae(t,e){var i=M(t),o=M(e);return e.width<1/0&&e.height<1/0?i>o?{width:e.width,height:e.width/i}:{width:e.height*i,height:e.height}:e.width<1/0?{width:e.width,height:e.width/i}:e.height<1/0?{width:e.height*i,height:e.height}:t}function re(t,e){var i=e*Math.PI/180;return{width:Math.abs(t.width*Math.cos(i))+Math.abs(t.height*Math.sin(i)),height:Math.abs(t.width*Math.sin(i))+Math.abs(t.height*Math.cos(i))}}function q(t,e){var i=e*Math.PI/180;return{left:t.left*Math.cos(i)-t.top*Math.sin(i),top:t.left*Math.sin(i)+t.top*Math.cos(i)}}function vt(t,e){var i=at(T(t,e),e);return i.left+i.right+i.top+i.bottom?i.left+i.right>i.top+i.bottom?Math.min((t.width+i.left+i.right)/t.width,it(t,e)):Math.min((t.height+i.top+i.bottom)/t.height,it(t,e)):1}function T(t,e,i){i===void 0&&(i=!1);var o=ot(t,e);return j(t,i?gt(o):o)}function Et(t){return{width:t.right!==void 0&&t.left!==void 0?t.right-t.left:1/0,height:t.bottom!==void 0&&t.top!==void 0?t.bottom-t.top:1/0}}function Po(t,e){return b(b({},t),{minWidth:Math.min(e.width,t.minWidth),minHeight:Math.min(e.height,t.minHeight),maxWidth:Math.min(e.width,t.maxWidth),maxHeight:Math.min(e.height,t.maxHeight)})}function le(t,e,i){i===void 0&&(i=!0);var o={};return N.forEach(function(n){var s=t[n],r=e[n];s!==void 0&&r!==void 0?o[n]=n==="left"||n==="top"?i?Math.max(s,r):Math.min(s,r):i?Math.min(s,r):Math.max(s,r):r!==void 0?o[n]=r:s!==void 0&&(o[n]=s)}),o}function bt(t,e){return le(t,e,!0)}function Gt(t){var e=t.size,i=t.aspectRatio,o=t.ignoreMinimum,n=t.sizeRestrictions;return!!((e.correctRatio||M(e)>=i.minimum&&M(e)<=i.maximum)&&e.height<=n.maxHeight&&e.width<=n.maxWidth&&e.width&&e.height&&(o||e.height>=n.minHeight&&e.width>=n.minWidth))}function Zt(t,e){return Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)}function V(t){var e=t.width,i=t.height,o=t.sizeRestrictions,n={minimum:t.aspectRatio&&t.aspectRatio.minimum||0,maximum:t.aspectRatio&&t.aspectRatio.maximum||1/0},s={width:Math.max(o.minWidth,Math.min(o.maxWidth,e)),height:Math.max(o.minHeight,Math.min(o.maxHeight,i))};function r(c,d){return d===void 0&&(d=!1),c.reduce(function(u,m){return Gt({size:m,aspectRatio:n,sizeRestrictions:o,ignoreMinimum:d})&&(!u||Zt(m,{width:e,height:i})<Zt(u,{width:e,height:i}))?m:u},null)}var l=[];n&&[n.minimum,n.maximum].forEach(function(c){c&&l.push({width:s.width,height:s.width/c,correctRatio:!0},{width:s.height*c,height:s.height,correctRatio:!0})}),Gt({size:s,aspectRatio:n,sizeRestrictions:o})&&l.push(s);var a=r(l)||r(l,!0);return a&&{width:a.width,height:a.height}}function Dt(t){var e=t.event,i=t.coordinates,o=t.positionRestrictions,n=o===void 0?{}:o,s=j(i,e.directions);return j(s,ot(s,n))}function To(t){var e=t.coordinates,i=t.transform,o=t.imageSize,n=t.sizeRestrictions,s=t.positionRestrictions,r=t.aspectRatio,l=t.visibleArea,a=function(d,u){return Dt({coordinates:d,positionRestrictions:s,event:new $t({left:u.left-d.left,top:u.top-d.top})})},c=b({},e);return(Array.isArray(i)?i:[i]).forEach(function(d){var u={};k((u=typeof d=="function"?d({coordinates:c,imageSize:o,visibleArea:l}):d).width)&&k(u.height)||(c=function(m,p){var x=b(b(b({},m),V({width:p.width,height:p.height,sizeRestrictions:n,aspectRatio:r})),{left:0,top:0});return a(x,{left:m.left,top:m.top})}(c,b(b({},c),u))),k(u.left)&&k(u.top)||(c=a(c,b(b({},c),u)))}),c}function jo(t){t.event;var e=t.getAreaRestrictions,i=t.boundaries,o=t.coordinates,n=t.visibleArea;t.aspectRatio;var s=t.stencilSize,r=t.sizeRestrictions,l=t.positionRestrictions;t.stencilReference;var a,c,d,u=b({},o),m=b({},n),p=b({},s);a=M(p),c=M(u),d===void 0&&(d=.001),(a===0||c===0?Math.abs(c-a)<d:Math.abs(c/a)<1+d&&Math.abs(c/a)>1-d)||(u=b(b({},u),V({sizeRestrictions:r,width:u.width,height:u.height,aspectRatio:{minimum:M(p),maximum:M(p)}})));var x=vt(m=W(m,u.width*i.width/(m.width*p.width)),e({visibleArea:m,type:"resize"}));return x!==1&&(m=W(m,x),u=W(u,x)),m=T(m=j(m,et(P(u),P(m))),e({visibleArea:m,type:"move"})),{coordinates:u=T(u,bt(U(m),l)),visibleArea:m}}function $o(t){var e=t.event,i=t.getAreaRestrictions,o=t.boundaries,n=t.coordinates,s=t.visibleArea;t.aspectRatio,t.stencilSize,t.sizeRestrictions;var r=t.positionRestrictions;t.stencilReference;var l=b({},n),a=b({},s);if(n&&s&&e.type!=="manipulateImage"){var c={width:0,height:0};a.width,o.width,M(o)>M(l)?(c.height=.8*o.height,c.width=c.height*M(l)):(c.width=.8*o.width,c.height=c.width*M(l));var d=vt(a=W(a,l.width*o.width/(a.width*c.width)),i({visibleArea:a,type:"resize"}));a=W(a,d),d!==1&&(c.height/=d,c.width/=d),a=T(a=j(a,et(P(l),P(a))),i({visibleArea:a,type:"move"})),l=T(l,bt(U(a),r))}return{coordinates:l,visibleArea:a}}function Oo(t){var e=t.event,i=t.coordinates,o=t.visibleArea,n=t.getAreaRestrictions,s=b({},o),r=b({},i);if(e.type==="setCoordinates"){var l=Math.max(0,r.width-s.width),a=Math.max(0,r.height-s.height);l>a?s=W(s,Math.min(r.width/s.width,it(s,n({visibleArea:s,type:"resize"})))):a>l&&(s=W(s,Math.min(r.height/s.height,it(s,n({visibleArea:s,type:"resize"}))))),s=T(s=j(s,gt(ot(r,U(s)))),n({visibleArea:s,type:"move"}))}return{visibleArea:s,coordinates:r}}function Lo(t){var e=t.imageSize,i=t.visibleArea,o=t.coordinates,n=i||e;return{left:(i?i.left:0)+n.width/2-o.width/2,top:(i?i.top:0)+n.height/2-o.height/2}}function Wo(t){var e=t.imageSize,i=t.visibleArea,o=t.aspectRatio,n=t.sizeRestrictions,s=i||e,r=Math.min(o.maximum||1/0,Math.max(o.minimum||0,M(s))),l=s.width<s.height?{width:.8*s.width,height:.8*s.width/r}:{height:.8*s.height,width:.8*s.height*r};return V(b(b({},l),{aspectRatio:o,sizeRestrictions:n}))}function Io(t){var e,i,o=t.imageSize,n=t.visibleArea,s=t.boundaries,r=t.aspectRatio,l=t.sizeRestrictions,a=t.stencilSize,c=n||o;return M(c)>M(s)?i=(e=a.height*c.height/s.height)*M(a):e=(i=a.width*c.width/s.width)/M(a),V({width:i,height:e,aspectRatio:r,sizeRestrictions:l})}function Ho(t){var e=t.getAreaRestrictions,i=t.coordinates,o=t.imageSize,n=M(t.boundaries);if(i){var s={height:Math.max(i.height,o.height),width:Math.max(i.width,o.width)},r=ae({width:M(s)>n?s.width:s.height*n,height:M(s)>n?s.width/n:s.height},Et(e())),l={left:i.left+i.width/2-r.width/2,top:i.top+i.height/2-r.height/2,width:r.width,height:r.height},a=at(i,U(b({left:0,top:0},o))),c={};return!a.left&&!a.right&&l.width<=o.width&&(c.left=0,c.right=o.width),!a.top&&!a.bottom&&l.height<=o.height&&(c.top=0,c.bottom=o.height),T(l,c)}var d=M(o);return r={height:d>n?o.height:o.width/n,width:d>n?o.height*n:o.width},{left:o.width/2-r.width/2,top:o.height/2-r.height/2,width:r.width,height:r.height}}function dt(t,e){return le(t,U(e))}function Bo(t){var e=t.event,i=t.coordinates,o=t.visibleArea,n=t.sizeRestrictions,s=t.getAreaRestrictions,r=t.positionRestrictions,l=t.adjustStencil,a=e.scale,c=e.move,d=b({},o),u=b({},i),m=1,p=1,x=a.factor&&Math.abs(a.factor-1)>.001;d=j(d,{left:c.left||0,top:c.top||0});var f={stencil:{minimum:Math.max(n.minWidth?n.minWidth/u.width:0,n.minHeight?n.minHeight/u.height:0),maximum:Math.min(n.maxWidth?n.maxWidth/u.width:1/0,n.maxHeight?n.maxHeight/u.height:1/0,it(u,r))},area:{maximum:it(d,s({visibleArea:d,type:"resize"}))}};a.factor&&x&&(a.factor<1?(p=Math.max(a.factor,f.stencil.minimum))>1&&(p=1):a.factor>1&&(p=Math.min(a.factor,Math.min(f.area.maximum,f.stencil.maximum)))<1&&(p=1)),p&&(d=W(d,p,a.center));var v=i.left-o.left,z=o.width+o.left-(i.width+i.left),w=i.top-o.top,S=o.height+o.top-(i.height+i.top);return d=T(d=j(d,ot(d,{left:r.left!==void 0?r.left-v*p:void 0,top:r.top!==void 0?r.top-w*p:void 0,bottom:r.bottom!==void 0?r.bottom+S*p:void 0,right:r.right!==void 0?r.right+z*p:void 0})),s({visibleArea:d,type:"move"})),u.width=u.width*p,u.height=u.height*p,u.left=d.left+v*p,u.top=d.top+w*p,u=T(u,bt(U(d),r)),a.factor&&x&&l&&(a.factor>1?m=Math.min(f.area.maximum,a.factor)/p:a.factor<1&&(m=Math.max(u.height/d.height,u.width/d.width,a.factor/p)),m!==1&&(d=j(d=T(d=W(d,m,a.factor>1?a.center:P(u)),s({visibleArea:d,type:"move"})),gt(ot(u,U(d)))))),{coordinates:u,visibleArea:d}}function Fo(t){var e=t.aspectRatio,i=t.getAreaRestrictions,o=t.coordinates,n=t.visibleArea,s=t.sizeRestrictions,r=t.positionRestrictions,l=t.imageSize,a=t.previousImageSize,c=t.angle,d=b({},o),u=b({},n),m=q(P(b({left:0,top:0},a)),c);return(d=b(b({},V({sizeRestrictions:s,aspectRatio:e,width:d.width,height:d.height})),q(P(d),c))).left-=m.left-l.width/2+d.width/2,d.top-=m.top-l.height/2+d.height/2,u=W(u,vt(u,i({visibleArea:u,type:"resize"}))),{coordinates:d=T(d,r),visibleArea:u=T(u=j(u,et(P(d),P(o))),i({visibleArea:u,type:"move"}))}}function No(t){var e=t.flip,i=t.previousFlip,o=t.rotate;t.aspectRatio;var n=t.getAreaRestrictions,s=t.coordinates,r=t.visibleArea,l=t.imageSize,a=b({},s),c=b({},r),d=i.horizontal!==e.horizontal,u=i.vertical!==e.vertical;if(d||u){var m=q({left:l.width/2,top:l.height/2},-o),p=q(P(a),-o),x=q({left:d?m.left-(p.left-m.left):p.left,top:u?m.top-(p.top-m.top):p.top},o);a=j(a,et(x,P(a))),p=q(P(c),-o),c=T(c=j(c,et(x=q({left:d?m.left-(p.left-m.left):p.left,top:u?m.top-(p.top-m.top):p.top},o),P(c))),n({visibleArea:c,type:"move"}))}return{coordinates:a,visibleArea:c}}function qt(t){var e=t.directions,i=t.coordinates,o=t.positionRestrictions,n=o===void 0?{}:o,s=t.sizeRestrictions,r=t.preserveRatio,l=t.compensate,a=b({},e),c=B(i,a).width,d=B(i,a).height;c<0&&(a.left<0&&a.right<0?(a.left=-(i.width-s.minWidth)/(a.left/a.right),a.right=-(i.width-s.minWidth)/(a.right/a.left)):a.left<0?a.left=-(i.width-s.minWidth):a.right<0&&(a.right=-(i.width-s.minWidth))),d<0&&(a.top<0&&a.bottom<0?(a.top=-(i.height-s.minHeight)/(a.top/a.bottom),a.bottom=-(i.height-s.minHeight)/(a.bottom/a.top)):a.top<0?a.top=-(i.height-s.minHeight):a.bottom<0&&(a.bottom=-(i.height-s.minHeight)));var u=at(B(i,a),n);l&&(u.left&&u.left>0&&u.right===0?(a.right+=u.left,a.left-=u.left):u.right&&u.right>0&&u.left===0&&(a.left+=u.right,a.right-=u.right),u.top&&u.top>0&&u.bottom===0?(a.bottom+=u.top,a.top-=u.top):u.bottom&&u.bottom>0&&u.top===0&&(a.top+=u.bottom,a.bottom-=u.bottom),u=at(B(i,a),n));var m={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(N.forEach(function(f){var v=u[f];v&&a[f]&&(m[f]=Math.max(0,1-v/a[f]))}),r){var p=Math.min.apply(null,N.map(function(f){return m[f]}));p!==1/0&&N.forEach(function(f){a[f]*=p})}else N.forEach(function(f){m[f]!==1/0&&(a[f]*=m[f])});if(c=B(i,a).width,d=B(i,a).height,a.right+a.left&&(c>s.maxWidth?m.width=(s.maxWidth-i.width)/(a.right+a.left):c<s.minWidth&&(m.width=(s.minWidth-i.width)/(a.right+a.left))),a.bottom+a.top&&(d>s.maxHeight?m.height=(s.maxHeight-i.height)/(a.bottom+a.top):d<s.minHeight&&(m.height=(s.minHeight-i.height)/(a.bottom+a.top))),r){var x=Math.min(m.width,m.height);x!==1/0&&N.forEach(function(f){a[f]*=x})}else m.width!==1/0&&Eo.forEach(function(f){a[f]*=m.width}),m.height!==1/0&&Do.forEach(function(f){a[f]*=m.height});return a}function ut(t,e,i){return e==0&&i==0?t/2:e==0?0:i==0?t:t*Math.abs(e/(e+i))}var Yo=H("vue-simple-handler"),Uo=H("vue-simple-handler-wrapper"),Lt={name:"SimpleHandler",components:{HandlerWrapper:se},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var t,e=(L(t={},this.horizontalPosition,!!this.horizontalPosition),L(t,this.verticalPosition,!!this.verticalPosition),L(t,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),!!(this.verticalPosition&&this.horizontalPosition)),L(t,"hover",this.hover),t);return{default:D(Yo(e),this.defaultClass,this.hover&&this.hoverClass),wrapper:D(Uo(e),this.wrapperClass)}}},methods:{onDrag:function(t){this.$emit("drag",t)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Lt.render=function(t,e,i,o,n,s){var r=$("HandlerWrapper");return g(),E(r,{class:s.classes.wrapper,"vertical-position":i.verticalPosition,"horizontal-position":i.horizontalPosition,disabled:i.disabled,onDrag:s.onDrag,onDragEnd:s.onDragEnd,onEnter:s.onEnter,onLeave:s.onLeave},{default:G(function(){return[C("div",{class:s.classes.default},null,2)]}),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Xo=H("vue-simple-line"),Vo=H("vue-simple-line-wrapper"),Wt={name:"SimpleLine",components:{LineWrapper:ne},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:D(Xo(L({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:D(Vo(L({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(t){this.$emit("drag",t)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Wt.render=function(t,e,i,o,n,s){var r=$("LineWrapper");return g(),E(r,{class:s.classes.wrapper,position:i.position,disabled:i.disabled,onDrag:s.onDrag,onDragEnd:s.onDragEnd,onEnter:s.onEnter,onLeave:s.onLeave},{default:G(function(){return[C("div",{class:s.classes.root},null,2)]}),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var _t=H("vue-bounding-box"),Go=["east","west",null],Zo=["south","north",null],he={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return Lt}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return Wt}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var t=[];return Go.forEach(function(e){Zo.forEach(function(i){if(e!==i){var o=te(e,i),n=o.name,s=o.classname;t.push({name:n,classname:s,verticalDirection:i,horizontalDirection:e})}})}),{points:t}},computed:{style:function(){var t={};return this.width&&this.height&&(t.width="".concat(this.width,"px"),t.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),t},classes:function(){var t=this.handlersClasses,e=this.handlersWrappersClasses,i=this.linesClasses,o=this.linesWrappersClasses;return{root:_t(),handlers:t,handlersWrappers:e,lines:i,linesWrappers:o}},lineNodes:function(){var t=this,e=[];return this.points.forEach(function(i){i.horizontalDirection&&i.verticalDirection||!t.lines[i.name]||e.push({name:i.name,component:t.linesComponent,class:D(t.classes.lines.default,t.classes.lines[i.name],!t.resizable&&t.classes.lines.disabled),wrapperClass:D(t.classes.linesWrappers.default,t.classes.linesWrappers[i.name],!t.resizable&&t.classes.linesWrappers.disabled),hoverClass:t.classes.lines.hover,verticalDirection:i.verticalDirection,horizontalDirection:i.horizontalDirection,disabled:!t.resizable})}),e},handlerNodes:function(){var t=this,e=[],i=this.width,o=this.height;return this.points.forEach(function(n){if(t.handlers[n.name]){var s={name:n.name,component:t.handlersComponent,class:D(t.classes.handlers.default,t.classes.handlers[n.name]),wrapperClass:D(t.classes.handlersWrappers.default,t.classes.handlersWrappers[n.name]),hoverClass:t.classes.handlers.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection,disabled:!t.resizable};if(i&&o){var r=n.horizontalDirection,l=n.verticalDirection,a=r==="east"?i:r==="west"?0:i/2,c=l==="south"?o:l==="north"?0:o/2;s.wrapperClass=_t("handler"),s.wrapperStyle={transform:"translate(".concat(a,"px, ").concat(c,"px)")},t.transitions&&t.transitions.enabled&&(s.wrapperStyle.transition="".concat(t.transitions.time,"ms ").concat(t.transitions.timingFunction))}else s.wrapperClass=_t("handler",L({},n.classname,!0));e.push(s)}}),e}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(t,e,i){var o,n=t.shift(),s=n.left,r=n.top,l={left:0,right:0,top:0,bottom:0};e==="west"?l.left-=s:e==="east"&&(l.right+=s),i==="north"?l.top-=r:i==="south"&&(l.bottom+=r),!i&&e?o="width":i&&!e&&(o="height"),this.resizable&&this.$emit("resize",new Ao(l,{allowedDirections:{left:e==="west"||!e,right:e==="east"||!e,bottom:i==="south"||!i,top:i==="north"||!i},preserveAspectRatio:t.nativeEvent&&t.nativeEvent.shiftKey,respectDirection:o}))}},emits:["resize","resize-end"]};he.render=function(t,e,i,o,n,s){return g(),E("div",{ref:"box",class:s.classes.root,style:s.style},[K(t.$slots,"default"),C("div",null,[(g(!0),E(I,null,It(s.lineNodes,function(r){return g(),E(ft(r.component),{key:r.name,"default-class":r.class,"hover-class":r.hoverClass,"wrapper-class":r.wrapperClass,position:r.name,disabled:r.disabled,onDrag:function(l){return s.onHandlerDrag(l,r.horizontalDirection,r.verticalDirection)},onDragEnd:e[1]||(e[1]=function(l){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])}),128))]),(g(!0),E(I,null,It(s.handlerNodes,function(r){return g(),E("div",{key:r.name,style:r.wrapperStyle,class:r.wrapperClass},[(g(),E(ft(r.component),{"default-class":r.class,"hover-class":r.hoverClass,"wrapper-class":r.wrapperClass,"horizontal-position":r.horizontalDirection,"vertical-position":r.verticalDirection,disabled:r.disabled,onDrag:function(l){return s.onHandlerDrag(l,r.horizontalDirection,r.verticalDirection)},onDragEnd:e[2]||(e[2]=function(l){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)}),128))],6)};var qo=H("vue-draggable-area"),ce={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:qo()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(t){if(t.cancelable){var e=this.movable&&t.touches.length===1;e&&(this.touches=Q(t.touches)),(this.touchStarted||e)&&(t.preventDefault(),t.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(t){this.touches.length>=1&&(this.touchStarted?(this.processMove(t,t.touches),t.preventDefault(),t.stopPropagation()):oe({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:t.touches[0].clientX,y:t.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(t){if(this.movable&&t.button===0){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.initAnchor(e),t.stopPropagation()}},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.cancelable&&t.preventDefault(),t.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(t){var e=this.$refs.container.getBoundingClientRect(),i=e.left,o=e.top;this.anchor={x:t.clientX-i,y:t.clientY-o}},processMove:function(t,e){var i=Q(e);if(this.touches.length){var o=this.$refs.container.getBoundingClientRect(),n=o.left,s=o.top;this.touches.length===1&&i.length===1&&this.$emit("move",new $t({left:i[0].clientX-(n+this.anchor.x),top:i[0].clientY-(s+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};ce.render=function(t,e,i,o,n,s){return g(),E("div",{ref:"container",onTouchstart:e[1]||(e[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:e[2]||(e[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)})},[K(t.$slots,"default")],544)};function Mt(t){var e,i;return{rotate:t.rotate||0,flip:{horizontal:((e=t==null?void 0:t.flip)===null||e===void 0?void 0:e.horizontal)||!1,vertical:((i=t==null?void 0:t.flip)===null||i===void 0?void 0:i.vertical)||!1}}}function Jo(t){return new Promise(function(e,i){try{if(t)if(/^data:/i.test(t))e(function(a){a=a.replace(/^data:([^;]+);base64,/gim,"");for(var c=atob(a),d=c.length,u=new ArrayBuffer(d),m=new Uint8Array(u),p=0;p<d;p++)m[p]=c.charCodeAt(p);return u}(t));else if(/^blob:/i.test(t)){var o=new FileReader;o.onload=function(a){e(a.target.result)},s=t,r=function(a){o.readAsArrayBuffer(a)},(l=new XMLHttpRequest).open("GET",s,!0),l.responseType="blob",l.onload=function(){this.status!=200&&this.status!==0||r(this.response)},l.send()}else{var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===4&&(n.status===200||n.status===0?e(n.response):i("Warning: could not load an image to parse its orientation"),n=null)},n.onprogress=function(){n.getResponseHeader("content-type")!=="image/jpeg"&&n.abort()},n.withCredentials=!1,n.open("GET",t,!0),n.responseType="arraybuffer",n.send(null)}else i("Error: the image is empty")}catch(a){i(a)}var s,r,l})}function de(t){var e=t.rotate,i=t.flip,o=t.scaleX,n=t.scaleY,s="";return s+=" rotate("+e+"deg) ",s+=" scaleX("+o*(i.horizontal?-1:1)+") ",s+=" scaleY("+n*(i.vertical?-1:1)+") "}function Qo(t){try{var e,i=new DataView(t),o=void 0,n=void 0,s=void 0,r=void 0;if(i.getUint8(0)===255&&i.getUint8(1)===216)for(var l=i.byteLength,a=2;a+1<l;){if(i.getUint8(a)===255&&i.getUint8(a+1)===225){s=a;break}a++}if(s&&(o=s+10,function(p,x,f){var v,z="";for(v=x,f+=x;v<f;v++)z+=String.fromCharCode(p.getUint8(v));return z}(i,s+4,4)==="Exif")){var c=i.getUint16(o);if(((n=c===18761)||c===19789)&&i.getUint16(o+2,n)===42){var d=i.getUint32(o+4,n);d>=8&&(r=o+d)}}if(r){for(var u=i.getUint16(r,n),m=0;m<u;m++)if(a=r+12*m+2,i.getUint16(a,n)===274){a+=8,e=i.getUint16(a,n),i.setUint16(a,1,n);break}}return e}catch{return null}}function Jt(t,e){var i=e.getBoundingClientRect(),o=i.left,n=i.top,s={left:0,top:0},r=0;return t.forEach(function(l){s.left+=(l.clientX-o)/t.length,s.top+=(l.clientY-n)/t.length}),t.forEach(function(l){r+=oe({x:s.left,y:s.top},{x:l.clientX-o,y:l.clientY-n})}),{centerMass:s,spread:r,count:t.length}}var ue={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=Rt(this.processEnd),this.touches=[]},methods:{processMove:function(t,e){if(this.touches.length){if(this.touches.length===1&&e.length===1)this.$emit("move",new st({left:this.touches[0].clientX-e[0].clientX,top:this.touches[0].clientY-e[0].clientY}));else if(this.touches.length>1&&this.touchResize){var i=Jt(e,this.$refs.container),o=this.oldGeometricProperties;o.count===i.count&&o.count>1&&this.$emit("resize",new st({left:o.centerMass.left-i.centerMass.left,top:o.centerMass.top-i.centerMass.top},{factor:o.spread/i.spread,center:i.centerMass})),this.oldGeometricProperties=i}this.touches=e}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(t){return this.eventsFilter?this.eventsFilter(t,this.transforming)!==!1:(t.preventDefault(),t.stopPropagation(),!0)},onTouchStart:function(t){if(t.cancelable&&(this.touchMove||this.touchResize&&t.touches.length>1)&&this.processEvent(t)){var e=this.$refs.container,i=e.getBoundingClientRect(),o=i.left,n=i.top,s=i.bottom,r=i.right;this.touches=Q(t.touches).filter(function(l){return l.clientX>o&&l.clientX<r&&l.clientY>n&&l.clientY<s}),this.oldGeometricProperties=Jt(this.touches,e)}},onTouchEnd:function(t){t.touches.length===0&&(this.touches=[],this.processEnd())},onTouchMove:function(t){var e=this;if(this.touches.length){var i=Q(t.touches).filter(function(o){return!o.identifier||e.touches.find(function(n){return n.identifier===o.identifier})});this.processEvent(t)&&(this.processMove(t,i),this.processStart())}},onMouseDown:function(t){if(this.mouseMove&&"buttons"in t&&t.buttons===1&&this.processEvent(t)){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.processStart()}},onMouseMove:function(t){this.touches.length&&this.processEvent(t)&&this.processMove(t,[{clientX:t.clientX,clientY:t.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(t){if(this.wheelResize&&this.processEvent(t)){var e=this.$refs.container.getBoundingClientRect(),i=e.left,o=e.top,n=1+this.wheelResize.ratio*(r=t.deltaY||t.detail||t.wheelDelta,(l=+r)==0||ie(l)?l:l>0?1:-1),s={left:t.clientX-i,top:t.clientY-o};this.$emit("resize",new st({},{factor:n,center:s})),this.touches.length||this.debouncedProcessEnd()}var r,l}},emits:["resize","move","transform-end"]};ue.render=function(t,e,i,o,n,s){return g(),E("div",{ref:"container",onTouchstart:e[1]||(e[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:e[2]||(e[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onWheel:e[3]||(e[3]=function(){return s.onWheel&&s.onWheel.apply(s,arguments)})},[K(t.$slots,"default")],544)};var Ct={components:{TransformableImage:ue},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"]};Ct.render=function(t,e,i,o,n,s){var r=$("transformable-image");return g(),E(r,{"touch-move":i.touchMove,"touch-resize":i.touchResize,"mouse-move":i.mouseMove,"wheel-resize":i.wheelResize,onMove:e[1]||(e[1]=function(l){return t.$emit("move",l)}),onResize:e[2]||(e[2]=function(l){return t.$emit("resize",l)})},{default:G(function(){return[K(t.$slots,"default")]}),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])};var mt=H("vue-preview"),me={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:mt({fill:this.fill}),wrapper:mt("wrapper"),imageWrapper:mt("image-wrapper"),image:D(mt("image"),this.imageClass)}},style:function(){if(this.fill)return{};var t={};return this.width&&(t.width="".concat(this.size.width,"px")),this.height&&(t.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),t},wrapperStyle:function(){var t={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),t},imageStyle:function(){if(this.coordinates&&this.image){var t=this.coordinates.width/this.size.width,e=_(_({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/t,scaleY:1/t}),i=this.imageSize.width,o=this.imageSize.height,n=re({width:i,height:o},e.rotate),s={width:"".concat(i,"px"),height:"".concat(o,"px"),left:"0px",top:"0px"},r={rotate:{left:(i-n.width)*e.scaleX/2,top:(o-n.height)*e.scaleY/2},scale:{left:(1-e.scaleX)*i/2,top:(1-e.scaleY)*o/2}};return s.transform=`translate(
				`.concat(-this.coordinates.left/t-r.rotate.left-r.scale.left,"px,").concat(-this.coordinates.top/t-r.rotate.top-r.scale.top,"px) ")+de(e),this.transitions&&this.transitions.enabled&&(s.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),s}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(t){(t.width||t.height)&&this.onChangeImage()}},mounted:function(){var t=this;this.onChangeImage(),this.$refs.image.addEventListener("load",function(){t.refreshImage()}),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var t=this.$refs.image;this.calculatedImageSize.height=t.naturalHeight,this.calculatedImageSize.width=t.naturalWidth},refresh:function(){var t=this.$refs.root;this.width||(this.calculatedSize.width=t.clientWidth),this.height||(this.calculatedSize.height=t.clientHeight)},onChangeImage:function(){var t=this.$refs.image;t&&t.complete&&this.refreshImage(),this.refresh()}}};me.render=function(t,e,i,o,n,s){return g(),E("div",{ref:"root",class:s.classes.root,style:s.style},[C("div",{ref:"wrapper",class:s.classes.wrapper,style:s.wrapperStyle},[Y(C("img",{ref:"image",src:i.image&&i.image.src,class:s.classes.image,style:s.imageStyle},null,14,["src"]),[[lt,i.image&&i.image.src]])],6)],6)};var pe={components:{Preview:me},inheritAttrs:!1};pe.render=function(t,e,i,o,n,s){var r=$("preview");return g(),E(r,Kt(t.$attrs,{fill:!0}),null,16)};var zt=H("vue-rectangle-stencil"),fe={name:"RectangleStencil",components:{StencilPreview:pe,BoundingBox:he,DraggableArea:ce},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return Lt}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return Wt}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:D(zt({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:D(zt("preview"),this.previewClass),boundingBox:D(zt("bounding-box"),this.boundingBoxClass)}},style:function(){var t=this.stencilCoordinates,e=t.height,i=t.width,o=t.left,n=t.top,s={width:"".concat(i,"px"),height:"".concat(e,"px"),transform:"translate(".concat(o,"px, ").concat(n,"px)")};return this.transitions&&this.transitions.enabled&&(s.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),s}},methods:{onMove:function(t){this.$emit("move",t),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(t){this.$emit("resize",t),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"]};fe.render=function(t,e,i,o,n,s){var r=$("stencil-preview"),l=$("draggable-area"),a=$("bounding-box");return g(),E("div",{class:s.classes.stencil,style:s.style},[C(a,{width:i.stencilCoordinates.width,height:i.stencilCoordinates.height,transitions:i.transitions,class:s.classes.boundingBox,handlers:i.handlers,"handlers-component":i.handlersComponent,"handlers-classes":i.handlersClasses,"handlers-wrappers-classes":i.handlersWrappersClasses,lines:i.lines,"lines-component":i.linesComponent,"lines-classes":i.linesClasses,"lines-wrappers-classes":i.linesWrappersClasses,resizable:i.resizable,onResize:s.onResize,onResizeEnd:s.onResizeEnd},{default:G(function(){return[C(l,{movable:i.movable,onMove:s.onMove,onMoveEnd:s.onMoveEnd},{default:G(function(){return[C(r,{image:i.image,coordinates:i.coordinates,width:i.stencilCoordinates.width,height:i.stencilCoordinates.height,class:s.classes.preview,transitions:i.transitions},null,8,["image","coordinates","width","height","class","transitions"])]}),_:1},8,["movable","onMove","onMoveEnd"])]}),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var Ko=["transitions"],X=H("vue-advanced-cropper"),ge={name:"Cropper",components:{BackgroundWrapper:Ct},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return fe}},backgroundWrapperComponent:{type:[Object,String],default:function(){return Ct}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(t){return ko.indexOf(t)!==-1}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(t){return!(typeof t=="string"&&t!=="fill"&&t!=="fit")}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(t){var e=t.event,i=t.coordinates,o=t.aspectRatio,n=t.positionRestrictions,s=t.sizeRestrictions,r=b(b({},i),{right:i.left+i.width,bottom:i.top+i.height}),l=e.params||{},a=b({},e.directions),c=l.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};s.widthFrozen&&(a.left=0,a.right=0),s.heightFrozen&&(a.top=0,a.bottom=0),N.forEach(function(Z){c[Z]||(a[Z]=0)});var d=B(r,a=qt({coordinates:r,directions:a,sizeRestrictions:s,positionRestrictions:n})).width,u=B(r,a).height,m=l.preserveRatio?M(r):yt(d/u,o);if(m){var p=l.respectDirection;if(p||(p=r.width>=r.height||m===1?"width":"height"),p==="width"){var x=d/m-r.height;if(c.top&&c.bottom){var f=a.top,v=a.bottom;a.bottom=ut(x,v,f),a.top=ut(x,f,v)}else c.bottom?a.bottom=x:c.top?a.top=x:c.right?a.right=0:c.left&&(a.left=0)}else if(p==="height"){var z=r.width-u*m;if(c.left&&c.right){var w=a.left,S=a.right;a.left=-ut(z,w,S),a.right=-ut(z,S,w)}else c.left?a.left=-z:c.right?a.right=-z:c.top?a.top=0:c.bottom&&(a.bottom=0)}a=qt({directions:a,coordinates:r,sizeRestrictions:s,positionRestrictions:n,preserveRatio:!0,compensate:l.compensate})}return d=B(r,a).width,u=B(r,a).height,(m=l.preserveRatio?M(r):yt(d/u,o))&&Math.abs(m-d/u)>.001&&N.forEach(function(Z){c[Z]||(a[Z]=0)}),Dt({event:new $t({left:-a.left,top:-a.top}),coordinates:{width:i.width+a.right+a.left,height:i.height+a.top+a.bottom,left:i.left,top:i.top},positionRestrictions:n})}},moveAlgorithm:{type:Function,default:Dt},initStretcher:{type:Function,default:function(t){var e=t.stretcher,i=t.imageSize,o=M(i);e.style.width=i.width+"px",e.style.height=e.clientWidth/o+"px",e.style.width=e.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(t){var e=t.visibleArea,i=t.coordinates,o=t.aspectRatio,n=t.sizeRestrictions,s=t.positionRestrictions,r=b(b({},i),V({width:i.width,height:i.height,aspectRatio:o,sizeRestrictions:{maxWidth:e.width,maxHeight:e.height,minHeight:Math.min(e.height,n.minHeight),minWidth:Math.min(e.width,n.minWidth)}}));return r=T(r=j(r,et(P(i),P(r))),bt(U(e),s))}},fitVisibleArea:{type:Function,default:function(t){var e=t.visibleArea,i=t.boundaries,o=t.getAreaRestrictions,n=t.coordinates,s=b({},e);s.height=s.width/M(i),s.top+=(e.height-s.height)/2,(n.height-s.height>0||n.width-s.width>0)&&(s=W(s,Math.max(n.height/s.height,n.width/s.width)));var r=gt(ot(n,U(s=W(s,vt(s,o({visibleArea:s,type:"resize"}))))));return s.width<n.width&&(r.left=0),s.height<n.height&&(r.top=0),s=T(s=j(s,r),o({visibleArea:s,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(t){var e=t.visibleArea,i=t.boundaries,o=t.imageSize,n=t.imageRestriction,s=t.type,r={};return n==="fill-area"?r={left:0,top:0,right:o.width,bottom:o.height}:n==="fit-area"&&(M(i)>M(o)?(r={top:0,bottom:o.height},e&&s==="move"&&(e.width>o.width?(r.left=-(e.width-o.width)/2,r.right=o.width-r.left):(r.left=0,r.right=o.width))):(r={left:0,right:o.width},e&&s==="move"&&(e.height>o.height?(r.top=-(e.height-o.height)/2,r.bottom=o.height-r.top):(r.top=0,r.bottom=o.height)))),r}},sizeRestrictionsAlgorithm:{type:Function,default:function(t){return{minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(t){var e=t.imageSize,i={};return t.imageRestriction!=="none"&&(i={left:0,top:0,right:e.width,bottom:e.height}),i}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:_({},Xt)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var t=function(e){return e*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(t))+Math.abs(this.imageAttributes.height*Math.sin(t)),height:Math.abs(this.imageAttributes.width*Math.sin(t))+Math.abs(this.imageAttributes.height*Math.cos(t))}},initialized:function(){return!!(this.visibleArea&&this.imageLoaded)},settings:function(){var t=St(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:St(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:t}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var t=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:k(this.minWidth)?0:ct(this.minWidth),minHeight:k(this.minHeight)?0:ct(this.minHeight),maxWidth:k(this.maxWidth)?1/0:ct(this.maxWidth),maxHeight:k(this.maxHeight)?1/0:ct(this.maxHeight)});if(t=function(o){var n=o.areaRestrictions,s=o.sizeRestrictions;o.imageSize;var r=o.boundaries,l=o.positionRestrictions;o.imageRestriction;var a=b(b({},s),{minWidth:s.minWidth!==void 0?s.minWidth:0,minHeight:s.minHeight!==void 0?s.minHeight:0,maxWidth:s.maxWidth!==void 0?s.maxWidth:1/0,maxHeight:s.maxHeight!==void 0?s.maxHeight:1/0});l.left!==void 0&&l.right!==void 0&&(a.maxWidth=Math.min(a.maxWidth,l.right-l.left)),l.bottom!==void 0&&l.top!==void 0&&(a.maxHeight=Math.min(a.maxHeight,l.bottom-l.top));var c=Et(n),d=ae(r,c);return c.width<1/0&&(!a.maxWidth||a.maxWidth>d.width)&&(a.maxWidth=Math.min(a.maxWidth,d.width)),c.height<1/0&&(!a.maxHeight||a.maxHeight>d.height)&&(a.maxHeight=Math.min(a.maxHeight,d.height)),a.minWidth>a.maxWidth&&(a.minWidth=a.maxWidth,a.widthFrozen=!0),a.minHeight>a.maxHeight&&(a.minHeight=a.maxHeight,a.heightFrozen=!0),a}({sizeRestrictions:t,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var e=this.getStencilSize(),i=Et(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));t.maxWidth=Math.min(t.maxWidth,i.width*e.width/this.boundaries.width),t.maxHeight=Math.min(t.maxHeight,i.height*e.height/this.boundaries.height),t.maxWidth<t.minWidth&&(t.minWidth=t.maxWidth),t.maxHeight<t.minHeight&&(t.minHeight=t.maxHeight)}return t}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:X(),image:D(X("image"),this.imageClass),stencil:X("stencil"),boundaries:D(X("boundaries"),this.boundariesClass),stretcher:D(X("stretcher")),background:D(X("background"),this.backgroundClass),foreground:D(X("foreground"),this.foregroundClass),imageWrapper:D(X("image-wrapper")),cropperWrapper:D(X("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var t=this.coordinates,e=t.width,i=t.height,o=t.left,n=t.top;return{width:e/this.coefficient,height:i/this.coefficient,left:(o-this.visibleArea.left)/this.coefficient,top:(n-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var t={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(t.opacity="0"),t},imageStyle:function(){var t=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},e={left:(t.width-this.imageSize.width)/(2*this.coefficient),top:(t.height-this.imageSize.height)/(2*this.coefficient)},i={left:(1-1/this.coefficient)*t.width/2,top:(1-1/this.coefficient)*t.height/2},o=_(_({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/t.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/t.height)}),n={width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-e.left-i.left-this.imageTransforms.translateX,"px, ").concat(-e.top-i.top-this.imageTransforms.translateY,"px)")+de(o)};return this.transitionsOptions.enabled&&(n.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),n}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var t=this;this.$nextTick(function(){t.resetCoordinates(),t.runAutoZoom("setCoordinates"),t.onChange()})},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(t,e){["aspectRatio","minAspectRatio","maxAspectRatio"].find(function(i){return t[i]!==e[i]})&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=Rt(this.update,this.debounce),this.debouncedDisableTransitions=Rt(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var t=this.initialized?this.prepareResult(_({},this.coordinates)):this.defaultCoordinates(),e={rotate:this.imageTransforms.rotate%360,flip:_({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var i=this;return{image:this.image,coordinates:t,visibleArea:this.visibleArea?_({},this.visibleArea):null,imageTransforms:e,get canvas(){return i.canvas?i.getCanvas():void 0}}}return{image:this.image,coordinates:t,visibleArea:this.visibleArea?_({},this.visibleArea):null,canvas:void 0,imageTransforms:e}},zoom:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.transitions,n=o===void 0||o;this.onManipulateImage(new st({},{factor:1/t,center:e}),{normalize:!1,transitions:n})},move:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.transitions,n=o===void 0||o;this.onManipulateImage(new st({left:t||0,top:e||0}),{normalize:!1,transitions:n})},setCoordinates:function(t){var e=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.autoZoom,n=o===void 0||o,s=i.transitions,r=s===void 0||s;this.$nextTick(function(){e.imageLoaded?(e.transitionsActive||(r&&e.enableTransitions(),e.coordinates=e.applyTransform(t),n&&e.runAutoZoom("setCoordinates"),r&&e.debouncedDisableTransitions()),e.onChange()):e.delayedTransforms=t})},refresh:function(){var t=this,e=this.$refs.image;if(this.src&&e)return this.initialized?this.updateVisibleArea().then(function(){t.onChange()}):this.resetVisibleArea().then(function(){t.onChange()})},reset:function(){var t=this;return this.resetVisibleArea().then(function(){t.onChange(!1)})},awaitRender:function(t){var e=this;this.awaiting||(this.awaiting=!0,this.$nextTick(function(){t(),e.awaiting=!1}))},prepareResult:function(t){return this.roundResult?function(e){var i=e.coordinates,o=e.sizeRestrictions,n=e.positionRestrictions,s={width:Math.round(i.width),height:Math.round(i.height),left:Math.round(i.left),top:Math.round(i.top)};return s.width>o.maxWidth?s.width=Math.floor(i.width):s.width<o.minWidth&&(s.width=Math.ceil(i.width)),s.height>o.maxHeight?s.height=Math.floor(i.height):s.height<o.minHeight&&(s.height=Math.ceil(i.height)),T(s,n)}(_(_({},this.getPublicProperties()),{},{positionRestrictions:dt(this.positionRestrictions,this.visibleArea),coordinates:t})):t},processAutoZoom:function(t,e,i,o){var n=this.autoZoomAlgorithm;n||(n=this.stencilSize?jo:this.autoZoom?$o:Oo);var s=n({event:{type:t,params:o},visibleArea:e,coordinates:i,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return _(_({},s),{},{changed:!Vt(s.visibleArea,e)||!Vt(s.coordinates,i)})},runAutoZoom:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.transitions,o=i!==void 0&&i,n=Mo(e,Ko),s=this.processAutoZoom(t,this.visibleArea,this.coordinates,n),r=s.visibleArea,l=s.coordinates,a=s.changed;o&&a&&this.enableTransitions(),this.visibleArea=r,this.coordinates=l,o&&a&&this.debouncedDisableTransitions()},normalizeEvent:function(t){return function(e){var i=e.event,o=e.visibleArea,n=e.coefficient;if(i.type==="manipulateImage")return b(b({},i),{move:{left:i.move&&i.move.left?n*i.move.left:0,top:i.move&&i.move.top?n*i.move.top:0},scale:{factor:i.scale&&i.scale.factor?i.scale.factor:1,center:i.scale&&i.scale.center?{left:i.scale.center.left*n+o.left,top:i.scale.center.top*n+o.top}:null}});if(i.type==="resize"){var s=b(b({},i),{directions:b({},i.directions)});return N.forEach(function(l){s.directions[l]*=n}),s}if(i.type==="move"){var r=b(b({},i),{directions:b({},i.directions)});return Co.forEach(function(l){r.directions[l]*=n}),r}return i}(_(_({},this.getPublicProperties()),{},{event:t}))},getCanvas:function(){if(this.$refs.canvas){var t=this.$refs.canvas,e=this.$refs.image,i=this.imageTransforms.rotate!==0||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(l,a,c){var d=c.rotate,u=c.flip,m={width:a.naturalWidth,height:a.naturalHeight},p=re(m,d),x=l.getContext("2d");l.height=p.height,l.width=p.width,x.save();var f=q(P(b({left:0,top:0},m)),d);return x.translate(-(f.left-p.width/2),-(f.top-p.height/2)),x.rotate(d*Math.PI/180),x.translate(u.horizontal?m.width:0,u.vertical?m.height:0),x.scale(u.horizontal?-1:1,u.vertical?-1:1),x.drawImage(a,0,0,m.width,m.height),x.restore(),l}(this.$refs.sourceCanvas,e,this.imageTransforms):e,o=_({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),n=function(l){return l.find(function(a){return c=a,!Number.isNaN(parseFloat(c))&&isFinite(c);var c})},s=V({sizeRestrictions:{minWidth:n([o.width,o.minWidth])||0,minHeight:n([o.height,o.minHeight])||0,maxWidth:n([o.width,o.maxWidth])||1/0,maxHeight:n([o.height,o.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(o.maxArea&&s.width*s.height>o.maxArea){var r=Math.sqrt(o.maxArea/(s.width*s.height));s={width:Math.round(r*s.width),height:Math.round(r*s.height)}}return function(l,a,c,d,u){l.width=d?d.width:c.width,l.height=d?d.height:c.height;var m=l.getContext("2d");m.clearRect(0,0,l.width,l.height),u&&(u.imageSmoothingEnabled&&(m.imageSmoothingEnabled=u.imageSmoothingEnabled),u.imageSmoothingQuality&&(m.imageSmoothingQuality=u.imageSmoothingQuality),u.fillColor&&(m.fillStyle=u.fillColor,m.fillRect(0,0,l.width,l.height),m.save()));var p=c.left<0?-c.left:0,x=c.top<0?-c.top:0;m.drawImage(a,c.left+p,c.top+x,c.width,c.height,p,x,l.width,l.height)}(t,i,this.coordinates,s,o),t}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(t){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.visibleArea&&e?Po(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,o=this.visibleArea&&e?dt(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return To({transform:t,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:i,positionRestrictions:o,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var t=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var e=this.defaultSize;e||(e=this.stencilSize?Io:Wo);var i=this.sizeRestrictions;i.minWidth,i.minHeight,i.maxWidth,i.maxHeight;var o=tt(e)?e({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):e,n=this.defaultPosition||Lo,s=[o,function(r){var l=r.coordinates;return _({},tt(n)?n({coordinates:l,imageSize:t.imageSize,visibleArea:t.visibleArea}):t.defaultPosition)}];this.delayedTransforms&&s.push.apply(s,Q(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(s,!0),this.delayedTransforms=null}},clearImage:function(){var t=this;this.imageLoaded=!1,setTimeout(function(){var e=t.$refs.stretcher;e&&(e.style.height="auto",e.style.width="auto"),t.coordinates=t.defaultCoordinates(),t.boundaries={width:0,height:0}},this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var t=this,e=this.$refs.stretcher,i=this.$refs.cropper;return this.initStretcher({cropper:i,stretcher:e,imageSize:this.imageSize}),this.$nextTick().then(function(){var o={cropper:i,imageSize:t.imageSize};if(tt(t.defaultBoundaries)?t.boundaries=t.defaultBoundaries(o):t.defaultBoundaries==="fit"?t.boundaries=function(n){var s=n.cropper,r=n.imageSize,l=s.clientHeight,a=s.clientWidth,c=l,d=r.width*l/r.height;return d>a&&(d=a,c=r.height*a/r.width),{width:d,height:c}}(o):t.boundaries=function(n){var s=n.cropper;return{width:s.clientWidth,height:s.clientHeight}}(o),!t.boundaries.width||!t.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")})},resetVisibleArea:function(){var t=this;return this.appliedImageTransforms=_(_({},this.defaultImageTransforms),{},{flip:_({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then(function(){t.priority!=="visible-area"&&(t.visibleArea=null,t.resetCoordinates());var e,i,o,n,s,r,l=t.defaultVisibleArea||Ho;t.visibleArea=tt(l)?l({imageSize:t.imageSize,boundaries:t.boundaries,coordinates:t.priority!=="visible-area"?t.coordinates:null,getAreaRestrictions:t.getAreaRestrictions,stencilSize:t.getStencilSize()}):t.defaultVisibleArea,t.visibleArea=(e={visibleArea:t.visibleArea,boundaries:t.boundaries,getAreaRestrictions:t.getAreaRestrictions},i=e.visibleArea,o=e.boundaries,n=e.getAreaRestrictions,s=b({},i),r=M(o),s.width/s.height!==r&&(s.height=s.width/r),T(s,n({visibleArea:s,type:"move"}))),t.priority==="visible-area"?t.resetCoordinates():t.coordinates=t.fitCoordinates({visibleArea:t.visibleArea,coordinates:t.coordinates,aspectRatio:t.getAspectRatio(),positionRestrictions:t.positionRestrictions,sizeRestrictions:t.sizeRestrictions}),t.runAutoZoom("resetVisibleArea")}).catch(function(){t.visibleArea=null})},updateVisibleArea:function(){var t=this;return this.updateBoundaries().then(function(){t.visibleArea=t.fitVisibleArea({imageSize:t.imageSize,boundaries:t.boundaries,visibleArea:t.visibleArea,coordinates:t.coordinates,getAreaRestrictions:t.getAreaRestrictions}),t.coordinates=t.fitCoordinates({visibleArea:t.visibleArea,coordinates:t.coordinates,aspectRatio:t.getAspectRatio(),positionRestrictions:t.positionRestrictions,sizeRestrictions:t.sizeRestrictions}),t.runAutoZoom("updateVisibleArea")}).catch(function(){t.visibleArea=null})},onChange:function(){var t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];t&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var t,e=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(n){if(Yt(n))return!1;var s=window.location,r=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(n)||[],l={protocol:r[1]||"",host:r[2]||"",port:r[3]||""},a=function(c){return c.port||((c.protocol||s.protocol)==="http"?80:433)};return!(!l.protocol&&!l.host&&!l.port||l.protocol&&l.protocol==s.protocol&&l.host&&l.host==s.host&&l.host&&a(l)==a(s))}(this.src)){var i=k(this.crossOrigin)?this.canvas:this.crossOrigin;i===!0&&(i="anonymous"),this.imageAttributes.crossOrigin=i||null}if(this.checkOrientation){var o=(t=this.src,new Promise(function(n){Jo(t).then(function(s){var r=Qo(s);n(s?{source:t,arrayBuffer:s,orientation:r}:{source:t,arrayBuffer:null,orientation:null})}).catch(function(s){console.warn(s),n({source:t,arrayBuffer:null,orientation:null})})}));setTimeout(function(){o.then(e.onParseImage)},this.transitionTime)}else setTimeout(function(){e.onParseImage({source:e.src})},this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var t=this,e=this.$refs.image;e&&!this.imageLoaded&&(this.imageAttributes.height=e.naturalHeight,this.imageAttributes.width=e.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then(function(){t.$emit("ready"),t.onChange(!1)}))},onParseImage:function(t){var e=this,i=t.source,o=t.arrayBuffer,n=t.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,o&&n&&n>1?ee(i)||!Yt(i)?(this.imageAttributes.src=URL.createObjectURL(new Blob([o])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(s){for(var r=[],l=new Uint8Array(s);l.length>0;){var a=l.subarray(0,8192);r.push(String.fromCharCode.apply(null,Array.from?Array.from(a):a.slice())),l=l.subarray(8192)}return"data:image/jpeg;base64,"+btoa(r.join(""))}(o):this.imageAttributes.src=i,tt(this.defaultTransforms)?this.appliedImageTransforms=Mt(this.defaultTransforms()):pt(this.defaultTransforms)?this.appliedImageTransforms=Mt(this.defaultTransforms):this.appliedImageTransforms=function(s){var r=Mt({});if(s)switch(s){case 2:r.flip.horizontal=!0;break;case 3:r.rotate=-180;break;case 4:r.flip.vertical=!0;break;case 5:r.rotate=90,r.flip.vertical=!0;break;case 6:r.rotate=90;break;case 7:r.rotate=90,r.flip.horizontal=!0;break;case 8:r.rotate=-90}return r}(n),this.defaultImageTransforms=_(_({},this.appliedImageTransforms),{},{flip:_({},this.appliedImageTransforms.flip)}),this.$nextTick(function(){var s=e.$refs.image;s&&s.complete&&(function(r){return!!r.naturalWidth}(s)?e.onSuccessLoadImage():e.onFailLoadImage())})},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(t){var e=this;this.transitionsOptions.enabled||this.awaitRender(function(){e.coordinates=e.moveAlgorithm(_(_({},e.getPublicProperties()),{},{positionRestrictions:dt(e.positionRestrictions,e.visibleArea),coordinates:e.coordinates,event:e.normalizeEvent(t)})),e.onChange()})},onResize:function(t){var e=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender(function(){var i=e.sizeRestrictions,o=Math.min(e.coordinates.width,e.coordinates.height,20*e.coefficient);e.coordinates=e.resizeAlgorithm(_(_({},e.getPublicProperties()),{},{positionRestrictions:dt(e.positionRestrictions,e.visibleArea),sizeRestrictions:{maxWidth:Math.min(i.maxWidth,e.visibleArea.width),maxHeight:Math.min(i.maxHeight,e.visibleArea.height),minWidth:Math.max(i.minWidth,o),minHeight:Math.max(i.minHeight,o)},event:e.normalizeEvent(t)})),e.onChange(),e.ticking=!1})},onManipulateImage:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.transitionsOptions.enabled){var i=e.transitions,o=i!==void 0&&i,n=e.normalize,s=n===void 0||n;o&&this.enableTransitions();var r=Bo(_(_({},this.getPublicProperties()),{},{event:s?this.normalizeEvent(t):t,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),l=r.visibleArea,a=r.coordinates;this.visibleArea=l,this.coordinates=a,this.runAutoZoom("manipulateImage"),this.onChange(),o&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.visibleArea,i=t.type,o=i===void 0?"move":i;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:e,type:o})},getAspectRatio:function(t){var e,i,o=this.stencilProps,n=o.aspectRatio,s=o.minAspectRatio,r=o.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var l=this.$refs.stencil.aspectRatios();e=l.minimum,i=l.maximum}if(k(e)&&(e=k(n)?s:n),k(i)&&(i=k(n)?r:n),!t&&(k(e)||k(i))){var a=this.getStencilSize(),c=a?M(a):null;k(e)&&(e=Ut(c)?c:void 0),k(i)&&(i=Ut(c)?c:void 0)}return{minimum:e,maximum:i}},getStencilSize:function(){if(this.stencilSize)return t={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},e=t.boundaries,i=t.stencilSize,o=t.aspectRatio,yt(M(n=tt(i)?i({boundaries:e,aspectRatio:o}):i),o)&&(n=V({sizeRestrictions:{maxWidth:e.width,maxHeight:e.height,minWidth:0,minHeight:0},width:n.width,height:n.height,aspectRatio:{minimum:o.minimum,maximum:o.maximum}})),(n.width>e.width||n.height>e.height)&&(n=V({sizeRestrictions:{maxWidth:e.width,maxHeight:e.height,minWidth:0,minHeight:0},width:n.width,height:n.height,aspectRatio:{minimum:M(n),maximum:M(n)}})),n;var t,e,i,o,n},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return _({},Xt)},flip:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.transitions,n=o===void 0||o;if(!this.transitionsActive){n&&this.enableTransitions();var s=_({},this.imageTransforms.flip),r=No({flip:{horizontal:t?!s.horizontal:s.horizontal,vertical:e?!s.vertical:s.vertical},previousFlip:s,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),l=r.visibleArea,a=r.coordinates;t&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),e&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=l,this.coordinates=a,this.onChange(),n&&this.debouncedDisableTransitions()}},rotate:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.transitions,o=i===void 0||i;if(!this.transitionsActive){o&&this.enableTransitions();var n=_({},this.imageSize);this.appliedImageTransforms.rotate+=t;var s=Fo({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:n,imageSize:this.imageSize,angle:t,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),r=s.visibleArea,l=s.coordinates,a=this.processAutoZoom("rotateImage",r,l);r=a.visibleArea,l=a.coordinates,this.visibleArea=r,this.coordinates=l,this.onChange(),o&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},ts={key:0,ref:"canvas",style:{display:"none"}},es={key:1,ref:"sourceCanvas",style:{display:"none"}};ge.render=function(t,e,i,o,n,s){return g(),E("div",{ref:"cropper",class:s.classes.cropper},[C("div",{ref:"stretcher",class:s.classes.stretcher},null,2),C("div",{class:s.classes.boundaries,style:s.boundariesStyle},[(g(),E(ft(i.backgroundWrapperComponent),{class:s.classes.cropperWrapper,"wheel-resize":s.settings.resizeImage.wheel,"touch-resize":s.settings.resizeImage.touch,"touch-move":s.settings.moveImage.touch,"mouse-move":s.settings.moveImage.mouse,onMove:s.onManipulateImage,onResize:s.onManipulateImage},{default:G(function(){return[C("div",{class:s.classes.background,style:s.boundariesStyle},null,6),C("div",{class:s.classes.imageWrapper},[C("img",{ref:"image",crossorigin:n.imageAttributes.crossOrigin,src:n.imageAttributes.src,class:s.classes.image,style:s.imageStyle,onMousedown:e[1]||(e[1]=ve(function(){},["prevent"]))},null,46,["crossorigin","src"])],2),C("div",{class:s.classes.foreground,style:s.boundariesStyle},null,6),Y((g(),E(ft(i.stencilComponent),Kt({ref:"stencil",image:s.image,coordinates:n.coordinates,"stencil-coordinates":s.stencilCoordinates,transitions:s.transitionsOptions},i.stencilProps,{onResize:s.onResize,onResizeEnd:s.onResizeEnd,onMove:s.onMove,onMoveEnd:s.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[lt,n.imageLoaded]]),i.canvas?(g(),E("canvas",ts,null,512)):R("",!0),i.canvas?(g(),E("canvas",es,null,512)):R("",!0)]}),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};const is={props:{zoom:{type:Number,default:0}},data(){return{focus:!1}},mounted(){window.addEventListener("mouseup",this.onStop,{passive:!1}),window.addEventListener("mousemove",this.onDrag,{passive:!1}),window.addEventListener("touchmove",this.onDrag,{passive:!1}),window.addEventListener("touchend",this.onStop,{passive:!1})},destroyed(){window.removeEventListener("mouseup",this.onStop),window.removeEventListener("mousemove",this.onDrag),window.removeEventListener("touchmove",this.onDrag),window.removeEventListener("touchend",this.onStop)},methods:{onDrag(t){if(this.focus){const e=t.touches?t.touches[0].clientX:t.clientX,i=this.$refs.line;if(i){const{left:o,width:n}=i.getBoundingClientRect();this.$emit("change",Math.min(1,Math.max(0,e-o)/n))}t.preventDefault&&t.preventDefault()}},onStop(){this.focus=!1},onStart(t){this.focus=!0,this.onDrag(t)}}},os={class:"twitter-navigation"},ss={class:"twitter-navigation__wrapper"},ns={class:"twitter-navigation__line"};function as(t,e,i,o,n,s){return g(),y("div",os,[h("div",ss,[h("div",{class:"twitter-navigation__line-wrapper",ref:"line",onMousedown:e[0]||(e[0]=(...r)=>s.onStart&&s.onStart(...r)),onTouchstart:e[1]||(e[1]=(...r)=>s.onStart&&s.onStart(...r))},[h("div",ns,[h("div",{class:"twitter-navigation__fill",style:Ht({flexGrow:i.zoom})},null,4),h("div",{class:F(["twitter-navigation__circle",{"twitter-navigation__circle--focus":n.focus}]),style:Ht({left:`${i.zoom*100}%`})},[h("div",{class:F(["twitter-navigation__inner-circle",{"twitter-navigation__inner-circle--focus":n.focus}])},null,2)],6)])],544)])])}const rs=J(is,[["render",as]]),ls=Pt("modalImageCustom",{state:()=>({isActive:!1,img:null,typeImg:null}),actions:{openModal({active:t,img:e,type:i}){this.isActive=t,this.img=e,this.typeImg=i},closeModal(t){this.isActive=t}}});const hs={props:{form:{type:Object},img:{type:Object}},setup(t){const e=A(!1),i=ls(),o=A(t.form),n=A(0),s=A(null),r=A(i.img),l=({imageSize:f})=>({width:Math.min(f.height,f.width),height:Math.min(f.height,f.width)}),a=({boundaries:f})=>({width:Math.min(f.height,f.width)-48,height:Math.min(f.height,f.width)-48}),c=async f=>{var v=f.target;let z=v.files[0].type.split("/");if(z[1]=="jpg"||z[1]=="jpeg"||z[1]=="png"||z[1]=="webp"){if(v.files&&v.files[0])try{const w=await p(v.files[0]);return w&&(r.value=w,e.value=!1),w}catch(w){e.value=!1,console.error(w);return}}else we("File not supported,allowed files (jpg,jpeg,png,webp)",{type:"error"})},d=f=>{const v=s.value;if(v){const{coordinates:z,imageSize:w}=v;w.width/w.height>z.width/z.height?n.value=(v.imageSize.height-v.coordinates.height)/(v.imageSize.height-v.sizeRestrictions.minHeight):n.value=(v.imageSize.width-v.coordinates.width)/(v.imageSize.width-v.sizeRestrictions.minWidth)}},u=f=>{const v=s.value;if(v)if(v.imageSize.height<v.imageSize.width){const z=v.sizeRestrictions.minHeight,w=v.imageSize.height;v.zoom((w-n.value*(w-z))/(w-f*(w-z)))}else{const z=v.sizeRestrictions.minWidth,w=v.imageSize.width;v.zoom((w-n.value*(w-z))/(w-f*(w-z)))}},m=()=>{const{canvas:f}=s.value.getResult();f&&f.toBlob(async v=>{let z=i.img.name;var w=new File([v],z,{lastModified:new Date().getTime(),type:v.type});let S=f.toDataURL("image/jpeg");switch(i.typeImg){case"document":o.value.previewDocument=S,o.value.document=w;break;case"driver":o.value.previewDriver=S,o.value.driverDocument=w;break;case"frontPhoto":o.value.previewFrontPhoto=S,o.value.frontPhoto=w;break;case"front":o.value.previewFront=S,o.value.front=w;break;case"driverSide":o.value.previewDriverSide=S,o.value.driverSide=w;break;case"back":o.value.previewBack=S,o.value.back=w;break;case"passengerSide":o.value.previewPassengerSide=S,o.value.passengerSide=w;break;case"tireAndRim":o.value.previewTireAndRim=S,o.value.tireAndRim=w;break;case"driversDisplay":o.value.previewDriversDisplay=S,o.value.driversDisplay=w;break;case"driversSide":o.value.previewDriversSide=S,o.value.driversSide=w;break;case"centerConsole":o.value.previewCenterConsole=S,o.value.centerConsole=w;break;case"rearSeats":o.value.previewRearSeats=S,o.value.rearSeats=w;break;case"vehicleDamage":o.value.previewVehicleDamage=S,o.value.vehicleDamage=w;break;case"additionalDocuments":o.value.previewAdditionalDocuments=S,o.value.additionalDocuments=w;break;case"vehicleVideo":o.value.previewVehicleVideo=S,o.value.vehicleVideo=w;break}i.closeModal(!1)},"image/png")},p=f=>new Promise((v,z)=>{const w=new FileReader;w.readAsDataURL(f),w.onload=()=>v(w.result),w.onerror=z});async function x(f){e.value=!0;try{const v=await p(f);return v&&(r.value=v,e.value=!1),v}catch(v){e.value=!1,console.error(v);return}}return be(()=>{i.img&&x(i.img)}),{onZoom:u,onChange:d,uploadImage:c,stencilSize:a,defaultSize:l,loading:e,statusModalImage:i,croppers:s,zoom:n,imgPreview:r,saveEditPhoto:m}},components:{Cropper:ge,Navigation:rs}},cs={class:"fixed z-[100] inset-0 flex items-end md:items-center md:justify-center bg-base-black bg-opacity-50"},ds={class:"max-w-md w-full overflow-auto bg-white rounded-lg shadow-xl animation-fade-modal"},us={class:"md:p-4 p-2 rounded-t-lg bg-base-black flex items-center justify-between"},ms=h("p",{class:"md:text-xl text-white"},"Edit & Crop Image",-1),ps=h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),fs=[ps],gs={class:"relative"},vs={key:0,class:"md:min-h-[400px] h-full flex justify-center items-center"},bs=rt('<div class="w-full h-full flex justify-center items-center"><div class="text-indigo-700"><div class="md:h-[80px] md:w-[80px]"><div class="animate-bounce"><svg xmlns="http://www.w3.org/2000/svg" class="animate-spin" fill="#c1f861" stroke="#fff" stroke-width="0" viewBox="0 0 16 16"><path d="M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 4c2.209 0 4 1.791 4 4s-1.791 4-4 4-4-1.791-4-4 1.791-4 4-4zM12.773 12.773c-1.275 1.275-2.97 1.977-4.773 1.977s-3.498-0.702-4.773-1.977-1.977-2.97-1.977-4.773c0-1.803 0.702-3.498 1.977-4.773l1.061 1.061c0 0 0 0 0 0-2.047 2.047-2.047 5.378 0 7.425 0.992 0.992 2.31 1.538 3.712 1.538s2.721-0.546 3.712-1.538c2.047-2.047 2.047-5.378 0-7.425l1.061-1.061c1.275 1.275 1.977 2.97 1.977 4.773s-0.702 3.498-1.977 4.773z"></path></svg></div><p class="text-base-gray font-medium pl-2">Loading...</p></div></div></div>',1),ws=[bs],xs={class:"flex justify-between gap-12 p-2 md:p-4"},ys={class:"w-full px-2"},_s=h("p",{class:"text-sm md:text-base"},"Zoom",-1),Ms={class:"flex w-full justify-end p-2 md:p-4 gap-3"},zs={class:"label-upload btn bg-white border border-[#E0E0E0]"},As=h("div",{class:"btn-up"},"Replace",-1);function Rs(t,e,i,o,n,s){const r=$("cropper"),l=$("Navigation");return Y((g(),y("div",cs,[h("div",ds,[h("div",us,[ms,(g(),y("svg",{onClick:e[0]||(e[0]=a=>o.statusModalImage.closeModal(!1)),xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-8 md:w-8 md:h-8 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"#fff"},fs))]),h("div",gs,[o.loading?(g(),y("div",vs,ws)):(g(),y(I,{key:1},[C(r,{ref:"croppers",class:"twitter-cropper","background-class":"twitter-cropper__background","foreground-class":"twitter-cropper__foreground","image-restriction":"stencil","stencil-size":o.stencilSize,"stencil-props":{lines:{},handlers:{},movable:!1,scalable:!1,aspectRatio:1,previewClass:"twitter-cropper__stencil"},transitions:!1,debounce:!1,"default-size":o.defaultSize,"min-width":150,"min-height":150,src:o.imgPreview,onChange:o.onChange},null,8,["stencil-size","default-size","src","onChange"]),h("div",xs,[h("div",ys,[_s,C(l,{zoom:o.zoom,onChange:o.onZoom},null,8,["zoom","onChange"])])]),h("div",Ms,[h("label",zs,[h("input",{type:"file",hidden:"",ref:"file",onChange:e[1]||(e[1]=a=>o.uploadImage(a)),accept:".jpg, .jpeg,.png,.webp"},null,544),As]),h("button",{onClick:e[2]||(e[2]=(...a)=>o.saveEditPhoto&&o.saveEditPhoto(...a)),class:"btn bg-primary"},"Upload")])],64))])])],512)),[[lt,o.statusModalImage.isActive]])}const Xn=J(hs,[["render",Rs]]),Ss=Pt("modalGuidePhotos",{state:()=>({isActive:!1}),actions:{openModal({isActive:t,data:e}){this.isActive=t},closeModal(t){this.isActive=t}}}),Es={setup(t){const e=Ss(),i=A(Qt(()=>"https://s3.us-east-2.amazonaws.com/files.autosensei.ca/"));return{statusModalView:e,bucket:i}}},Ds={class:"fixed inset-0 flex items-end md:items-center md:justify-center bg-base-black bg-opacity-50"},Cs={class:"max-w-xl w-full h-[70vh] overflow-hidden bg-white rounded-lg shadow-xl animation-fade-modal"},ks={class:"h-full"},Ps={class:"md:p-4 p-2 rounded-t-lg bg-[#22282F] flex items-center justify-between"},Ts=h("p",{class:"text-md md:text-xl text-white"},"Guide",-1),js=h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),$s=[js],Os={class:"w-full p-2 h-full"},Ls=h("p",{class:"font-Nohemi text-sm md:text-xl"},[Bt("It is recommended to upload detailed photos of the car as indicated in this guide. "),h("br"),h("br"),Bt(" Example: ")],-1),Ws={class:"flex h-[60vh] pb-24 sm:pb-28 mt-3 overflow-auto gap-3 flex-col"},Is=h("p",{class:"font-Inter mb-2 text-sm sm:text-base font-semibold"},"Exterior Photos",-1),Hs={class:"grid grid-cols-2 md:grid-cols-3 px-2 gap-2 sm:gap-4 m-auto lg:px-3"},Bs={class:"flex w-full flex-col gap-2"},Fs=h("div",{class:"flex items-center gap-3"},[h("p",{class:"font-medium text-xs md:text-sm"},"3/4 Front Photo")],-1),Ns={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},Ys=["src"],Us={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},Xs={class:"flex w-full flex-col gap-2"},Vs=h("div",{class:"flex items-center gap-3"},[h("p",{class:"font-medium text-xs md:text-sm"},"Front")],-1),Gs={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},Zs=["src"],qs={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},Js={class:"flex w-full flex-col gap-2"},Qs=h("div",{class:"flex items-center gap-3"},[h("p",{class:"font-medium text-xs md:text-sm"},"Driver Side")],-1),Ks={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},tn=["src"],en={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},on={class:"flex w-full flex-col gap-2"},sn=h("div",{class:"flex items-center gap-3"},[h("p",{class:"font-medium text-xs md:text-sm"},"Back")],-1),nn={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},an=["src"],rn={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},ln={class:"flex w-full flex-col gap-2"},hn=h("div",{class:"flex items-center gap-3"},[h("p",{class:"font-medium text-xs md:text-sm"},"Passenger Side")],-1),cn={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},dn=["src"],un={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},mn={class:"flex w-full flex-col gap-2"},pn=h("div",{class:"flex items-center gap-3"},[h("p",{class:"font-medium text-xs md:text-sm"},"Tire and Rim")],-1),fn={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},gn=["src"],vn={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},bn=h("p",{class:"font-Inter mb-2 text-sm sm:text-base font-semibold"},"Interior Photos",-1),wn={class:"grid grid-cols-2 md:grid-cols-3 px-2 gap-2 sm:gap-4 m-auto lg:px-3"},xn={class:"flex w-full flex-col gap-2"},yn=h("div",{class:"flex items-center gap-3"},[h("p",{class:"font-medium text-xs md:text-sm whitespace-pre"},"Drivers D. (Odometer)")],-1),_n={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},Mn=["src"],zn={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},An={class:"flex w-full flex-col gap-2"},Rn=h("div",{class:"flex items-center gap-3"},[h("p",{class:"font-medium text-xs md:text-sm"},"Drivers Side")],-1),Sn={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},En=["src"],Dn={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},Cn={class:"flex w-full flex-col gap-2"},kn=h("div",{class:"flex items-center gap-3"},[h("p",{class:"font-medium text-xs md:text-sm"},"Center Console")],-1),Pn={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},Tn=["src"],jn={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"},$n={class:"flex w-full flex-col gap-2"},On=h("div",{class:"flex items-center gap-3"},[h("p",{class:"font-medium text-xs md:text-sm"},"Rear Seats")],-1),Ln={class:"flex flex-col h-full shadow-image-upload rounded-xl relative gap-4 bg-white items-center p-5 group"},Wn=["src"],In={key:0,class:"text-[8px] sm:text-[11px] text-center font-medium text-[#858585]"};function Hn(t,e,i,o,n,s){var r,l,a,c,d,u,m,p,x,f;return Y((g(),y("div",Ds,[h("div",Cs,[h("div",ks,[h("div",Ps,[Ts,(g(),y("svg",{onClick:e[0]||(e[0]=v=>o.statusModalView.closeModal(!1)),xmlns:"http://www.w3.org/2000/svg",class:"w-5 md:w-8 md:h-8 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"#fff"},$s))]),h("div",Os,[Ls,h("div",Ws,[h("div",null,[Is,h("div",Hs,[h("div",Bs,[Fs,h("div",Ns,[h("img",{class:"w-full h-full object-cover",src:o.bucket+"public/img/png/mainphoto.png",alt:""},null,8,Ys),(r=t.form)!=null&&r.previewFrontPhoto?R("",!0):(g(),y("p",Us," Example of 3/4 Front use JPG, PNG, or BMP file "))])]),h("div",Xs,[Vs,h("div",Gs,[h("img",{class:"w-full h-full object-cover",src:o.bucket+"public/img/png/front.png",alt:""},null,8,Zs),(l=t.form)!=null&&l.previewFrontPhoto?R("",!0):(g(),y("p",qs," Example of front use JPG, PNG, or BMP file "))])]),h("div",Js,[Qs,h("div",Ks,[h("img",{class:"w-full h-full object-cover",src:o.bucket+"public/img/png/driverside.png",alt:""},null,8,tn),(a=t.form)!=null&&a.previewFrontPhoto?R("",!0):(g(),y("p",en," Example of Driver Side use JPG, PNG, or BMP file "))])]),h("div",on,[sn,h("div",nn,[h("img",{class:"w-full h-full object-cover",src:o.bucket+"public/img/png/back.png",alt:""},null,8,an),(c=t.form)!=null&&c.previewFrontPhoto?R("",!0):(g(),y("p",rn," Example of Back use JPG, PNG, or BMP file "))])]),h("div",ln,[hn,h("div",cn,[h("img",{class:"w-full h-full object-cover",src:o.bucket+"public/img/png/passenger.png",alt:""},null,8,dn),(d=t.form)!=null&&d.previewFrontPhoto?R("",!0):(g(),y("p",un," Example of Passenger Side use JPG, PNG, or BMP file "))])]),h("div",mn,[pn,h("div",fn,[h("img",{class:"w-full h-full object-cover",src:o.bucket+"public/img/png/tireandrim.png",alt:""},null,8,gn),(u=t.form)!=null&&u.previewFrontPhoto?R("",!0):(g(),y("p",vn," Example of Tire and Rim use JPG, PNG, or BMP file "))])])])]),h("div",null,[bn,h("div",wn,[h("div",xn,[yn,h("div",_n,[h("img",{class:"w-full h-full object-cover",src:o.bucket+"public/img/png/tacomentro.png",alt:""},null,8,Mn),(m=t.form)!=null&&m.previewFrontPhoto?R("",!0):(g(),y("p",zn," Example of Drivers Display (Odometer) use JPG, PNG, or BMP file "))])]),h("div",An,[Rn,h("div",Sn,[h("img",{class:"w-full h-full object-cover",src:o.bucket+"public/img/png/dentro.png",alt:""},null,8,En),(p=t.form)!=null&&p.previewFrontPhoto?R("",!0):(g(),y("p",Dn," Example of Drivers Side use JPG, PNG, or BMP file "))])]),h("div",Cn,[kn,h("div",Pn,[h("img",{class:"w-full h-full object-cover",src:o.bucket+"public/img/png/tavblero.png",alt:""},null,8,Tn),(x=t.form)!=null&&x.previewFrontPhoto?R("",!0):(g(),y("p",jn," Example of Center Console use JPG, PNG, or BMP file "))])]),h("div",$n,[On,h("div",Ln,[h("img",{class:"w-full h-full object-cover",src:o.bucket+"public/img/png/asientosatras.png",alt:""},null,8,Wn),(f=t.form)!=null&&f.previewFrontPhoto?R("",!0):(g(),y("p",In," Example of Rear Seats use JPG, PNG, or BMP file "))])])])])])])])])],512)),[[lt,o.statusModalView.isActive]])}const Vn=J(Es,[["render",Hn]]);export{Un as M,Xn as a,Vn as b,io as c,ls as d,Ss as e};
